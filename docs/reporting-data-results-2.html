<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R Programming for Research</title>
  <meta name="description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R Programming for Research" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R Programming for Research" />
  
  <meta name="twitter:description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016." />
  

<meta name="author" content="Brooke Anderson and Rachel Severson">


<meta name="date" content="2018-11-25">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="exploring-data-2.html">
<link rel="next" href="reporting-results-2a.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.8.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.39.2/plotly-latest.min.js"></script>
<link href="libs/bokehjs-0.12.2/bokeh.min.css" rel="stylesheet" />
<link href="libs/bokehjs-0.12.2/loader.css" rel="stylesheet" />
<script src="libs/bokehjs-0.12.2/bokeh.min.js"></script>
<script src="libs/rbokeh-binding-0.5.0/rbokeh.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.4/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Programming for Research</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Online course book, ERHS 535</a></li>
<li class="chapter" data-level="" data-path="course-information.html"><a href="course-information.html"><i class="fa fa-check"></i>Course information</a><ul>
<li class="chapter" data-level="0.1" data-path="course-information.html"><a href="course-information.html#course-overview"><i class="fa fa-check"></i><b>0.1</b> Course overview</a></li>
<li class="chapter" data-level="0.2" data-path="course-information.html"><a href="course-information.html#time-and-place"><i class="fa fa-check"></i><b>0.2</b> Time and place</a></li>
<li class="chapter" data-level="0.3" data-path="course-information.html"><a href="course-information.html#detailed-schedule"><i class="fa fa-check"></i><b>0.3</b> Detailed schedule</a></li>
<li class="chapter" data-level="0.4" data-path="course-information.html"><a href="course-information.html#grading"><i class="fa fa-check"></i><b>0.4</b> Grading</a><ul>
<li class="chapter" data-level="0.4.1" data-path="course-information.html"><a href="course-information.html#attendance-and-class-participation"><i class="fa fa-check"></i><b>0.4.1</b> Attendance and class participation</a></li>
<li class="chapter" data-level="0.4.2" data-path="course-information.html"><a href="course-information.html#weekly-in-course-group-exercises"><i class="fa fa-check"></i><b>0.4.2</b> Weekly in-course group exercises</a></li>
<li class="chapter" data-level="0.4.3" data-path="course-information.html"><a href="course-information.html#in-class-quizzes"><i class="fa fa-check"></i><b>0.4.3</b> In-class quizzes</a></li>
<li class="chapter" data-level="0.4.4" data-path="course-information.html"><a href="course-information.html#homework"><i class="fa fa-check"></i><b>0.4.4</b> Homework</a></li>
<li class="chapter" data-level="0.4.5" data-path="course-information.html"><a href="course-information.html#final-group-project"><i class="fa fa-check"></i><b>0.4.5</b> Final group project</a></li>
</ul></li>
<li class="chapter" data-level="0.5" data-path="course-information.html"><a href="course-information.html#course-set-up"><i class="fa fa-check"></i><b>0.5</b> Course set-up</a></li>
<li class="chapter" data-level="0.6" data-path="course-information.html"><a href="course-information.html#coursebook"><i class="fa fa-check"></i><b>0.6</b> Coursebook</a><ul>
<li class="chapter" data-level="0.6.1" data-path="course-information.html"><a href="course-information.html#other-helpful-books-not-required"><i class="fa fa-check"></i><b>0.6.1</b> Other helpful books (not required)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Part I: Preliminaries</b></span></li>
<li class="chapter" data-level="1" data-path="r-preliminaries.html"><a href="r-preliminaries.html"><i class="fa fa-check"></i><b>1</b> R Preliminaries</a><ul>
<li class="chapter" data-level="1.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#objectives"><i class="fa fa-check"></i><b>1.1</b> Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-and-r-studio"><i class="fa fa-check"></i><b>1.2</b> R and R Studio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#what-is-r"><i class="fa fa-check"></i><b>1.2.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#open-source-software"><i class="fa fa-check"></i><b>1.2.2</b> Open-source software</a></li>
<li class="chapter" data-level="1.2.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#what-is-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> What is RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#the-package-system"><i class="fa fa-check"></i><b>1.3</b> The “package” system</a><ul>
<li class="chapter" data-level="1.3.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-packages"><i class="fa fa-check"></i><b>1.3.1</b> R packages</a></li>
<li class="chapter" data-level="1.3.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#installing-from-cran"><i class="fa fa-check"></i><b>1.3.2</b> Installing from CRAN</a></li>
<li class="chapter" data-level="1.3.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#loading-an-installed-package"><i class="fa fa-check"></i><b>1.3.3</b> Loading an installed package</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="r-preliminaries.html"><a href="r-preliminaries.html#basic-code-conventions-of-r"><i class="fa fa-check"></i><b>1.4</b> Basic code conventions of R</a><ul>
<li class="chapter" data-level="1.4.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-objects"><i class="fa fa-check"></i><b>1.4.1</b> R objects</a></li>
<li class="chapter" data-level="1.4.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#rs-mvp-the-gets-arrow"><i class="fa fa-check"></i><b>1.4.2</b> R’s MVP: The <em>gets arrow</em></a></li>
<li class="chapter" data-level="1.4.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#assignment-operator-wars---vs."><i class="fa fa-check"></i><b>1.4.3</b> Assignment operator wars: <code>&lt;-</code> vs. <code>=</code></a></li>
<li class="chapter" data-level="1.4.4" data-path="r-preliminaries.html"><a href="r-preliminaries.html#naming-objects"><i class="fa fa-check"></i><b>1.4.4</b> Naming objects</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="r-preliminaries.html"><a href="r-preliminaries.html#rs-most-basic-object-types"><i class="fa fa-check"></i><b>1.5</b> R’s most basic object types</a><ul>
<li class="chapter" data-level="1.5.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#vectors"><i class="fa fa-check"></i><b>1.5.1</b> Vectors</a></li>
<li class="chapter" data-level="1.5.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#dataframes"><i class="fa fa-check"></i><b>1.5.2</b> Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="r-preliminaries.html"><a href="r-preliminaries.html#using-r-functions"><i class="fa fa-check"></i><b>1.6</b> Using R functions</a><ul>
<li class="chapter" data-level="1.6.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#function-structure"><i class="fa fa-check"></i><b>1.6.1</b> Function structure</a></li>
<li class="chapter" data-level="1.6.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#function-help-files"><i class="fa fa-check"></i><b>1.6.2</b> Function help files</a></li>
<li class="chapter" data-level="1.6.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#function-parameters"><i class="fa fa-check"></i><b>1.6.3</b> Function parameters</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-scripts"><i class="fa fa-check"></i><b>1.7</b> R scripts</a><ul>
<li class="chapter" data-level="1.7.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#commenting-code"><i class="fa fa-check"></i><b>1.7.1</b> Commenting code</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="r-preliminaries.html"><a href="r-preliminaries.html#in-course-exercise"><i class="fa fa-check"></i><b>1.8</b> In-course Exercise</a><ul>
<li class="chapter" data-level="1.8.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#about-the-dataset"><i class="fa fa-check"></i><b>1.8.1</b> About the dataset</a></li>
<li class="chapter" data-level="1.8.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#manually-creating-vectors-and-a-dataframe"><i class="fa fa-check"></i><b>1.8.2</b> Manually creating vectors and a dataframe</a></li>
<li class="chapter" data-level="1.8.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#installing-and-using-a-package"><i class="fa fa-check"></i><b>1.8.3</b> Installing and using a package</a></li>
<li class="chapter" data-level="1.8.4" data-path="r-preliminaries.html"><a href="r-preliminaries.html#getting-the-data-onto-your-computer"><i class="fa fa-check"></i><b>1.8.4</b> Getting the data onto your computer</a></li>
<li class="chapter" data-level="1.8.5" data-path="r-preliminaries.html"><a href="r-preliminaries.html#getting-the-data-into-r"><i class="fa fa-check"></i><b>1.8.5</b> Getting the data into R</a></li>
<li class="chapter" data-level="1.8.6" data-path="r-preliminaries.html"><a href="r-preliminaries.html#checking-out-the-data"><i class="fa fa-check"></i><b>1.8.6</b> Checking out the data</a></li>
<li class="chapter" data-level="1.8.7" data-path="r-preliminaries.html"><a href="r-preliminaries.html#using-the-data-to-answer-questions"><i class="fa fa-check"></i><b>1.8.7</b> Using the data to answer questions</a></li>
<li class="chapter" data-level="1.8.8" data-path="r-preliminaries.html"><a href="r-preliminaries.html#writing-your-code-as-an-r-script"><i class="fa fa-check"></i><b>1.8.8</b> Writing your code as an R script</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Part II: Basics</b></span></li>
<li class="chapter" data-level="2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html"><i class="fa fa-check"></i><b>2</b> Entering and cleaning data #1</a><ul>
<li class="chapter" data-level="2.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#objectives-1"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#overview"><i class="fa fa-check"></i><b>2.2</b> Overview</a></li>
<li class="chapter" data-level="2.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.3</b> Reading data into R</a><ul>
<li class="chapter" data-level="2.3.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-local-flat-files"><i class="fa fa-check"></i><b>2.3.1</b> Reading local flat files</a></li>
<li class="chapter" data-level="2.3.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-in-other-file-types"><i class="fa fa-check"></i><b>2.3.2</b> Reading in other file types</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directories-and-pathnames"><i class="fa fa-check"></i><b>2.4</b> Directories and pathnames</a><ul>
<li class="chapter" data-level="2.4.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directory-structure"><i class="fa fa-check"></i><b>2.4.1</b> Directory structure</a></li>
<li class="chapter" data-level="2.4.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#working-directory"><i class="fa fa-check"></i><b>2.4.2</b> Working directory</a></li>
<li class="chapter" data-level="2.4.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#file-and-directory-pathnames"><i class="fa fa-check"></i><b>2.4.3</b> File and directory pathnames</a></li>
<li class="chapter" data-level="2.4.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#diversion-paste"><i class="fa fa-check"></i><b>2.4.4</b> Diversion: <code>paste</code></a></li>
<li class="chapter" data-level="2.4.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-online-flat-files"><i class="fa fa-check"></i><b>2.4.5</b> Reading online flat files</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#data-cleaning"><i class="fa fa-check"></i><b>2.5</b> Data cleaning</a><ul>
<li class="chapter" data-level="2.5.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#renaming-columns"><i class="fa fa-check"></i><b>2.5.1</b> Renaming columns</a></li>
<li class="chapter" data-level="2.5.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#selecting-columns"><i class="fa fa-check"></i><b>2.5.2</b> Selecting columns</a></li>
<li class="chapter" data-level="2.5.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#add-or-change-columns"><i class="fa fa-check"></i><b>2.5.3</b> Add or change columns</a></li>
<li class="chapter" data-level="2.5.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#base-r-equivalents-to-dplyr-functions"><i class="fa fa-check"></i><b>2.5.4</b> Base R equivalents to <code>dplyr</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#dates-and-filtering"><i class="fa fa-check"></i><b>2.6</b> Dates and filtering</a><ul>
<li class="chapter" data-level="2.6.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#dates-in-r"><i class="fa fa-check"></i><b>2.6.1</b> Dates in R</a></li>
<li class="chapter" data-level="2.6.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#filtering-to-certain-rows"><i class="fa fa-check"></i><b>2.6.2</b> Filtering to certain rows</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#piping"><i class="fa fa-check"></i><b>2.7</b> Piping</a></li>
<li class="chapter" data-level="2.8" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#in-course-exercise-1"><i class="fa fa-check"></i><b>2.8</b> In-course Exercise</a><ul>
<li class="chapter" data-level="2.8.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#downloading-and-checking-out-the-example-data"><i class="fa fa-check"></i><b>2.8.1</b> Downloading and checking out the example data</a></li>
<li class="chapter" data-level="2.8.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-in-different-types-of-files"><i class="fa fa-check"></i><b>2.8.2</b> Reading in different types of files</a></li>
<li class="chapter" data-level="2.8.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directory-structure-1"><i class="fa fa-check"></i><b>2.8.3</b> Directory structure</a></li>
<li class="chapter" data-level="2.8.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#cleaning-up-data-1"><i class="fa fa-check"></i><b>2.8.4</b> Cleaning up data #1</a></li>
<li class="chapter" data-level="2.8.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#cleaning-up-data-2"><i class="fa fa-check"></i><b>2.8.5</b> Cleaning up data #2</a></li>
<li class="chapter" data-level="2.8.6" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#piping-1"><i class="fa fa-check"></i><b>2.8.6</b> Piping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploring-data-1.html"><a href="exploring-data-1.html"><i class="fa fa-check"></i><b>3</b> Exploring data #1</a><ul>
<li class="chapter" data-level="3.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#objectives-2"><i class="fa fa-check"></i><b>3.1</b> Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#data-from-a-package"><i class="fa fa-check"></i><b>3.2</b> Data from a package</a></li>
<li class="chapter" data-level="3.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#logical-vectors"><i class="fa fa-check"></i><b>3.3</b> Logical vectors</a></li>
<li class="chapter" data-level="3.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#simple-statistics-functions"><i class="fa fa-check"></i><b>3.4</b> Simple statistics functions</a><ul>
<li class="chapter" data-level="3.4.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#summary-statistics"><i class="fa fa-check"></i><b>3.4.1</b> Summary statistics</a></li>
<li class="chapter" data-level="3.4.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#summarize-function"><i class="fa fa-check"></i><b>3.4.2</b> <code>summarize</code> function</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#plots-to-explore-data"><i class="fa fa-check"></i><b>3.5</b> Plots to explore data</a><ul>
<li class="chapter" data-level="3.5.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#initializing-a-ggplot-object"><i class="fa fa-check"></i><b>3.5.1</b> Initializing a ggplot object</a></li>
<li class="chapter" data-level="3.5.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#plot-aesthetics"><i class="fa fa-check"></i><b>3.5.2</b> Plot aesthetics</a></li>
<li class="chapter" data-level="3.5.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#adding-geoms"><i class="fa fa-check"></i><b>3.5.3</b> Adding geoms</a></li>
<li class="chapter" data-level="3.5.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#constant-aesthetics"><i class="fa fa-check"></i><b>3.5.4</b> Constant aesthetics</a></li>
<li class="chapter" data-level="3.5.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#useful-plot-additions"><i class="fa fa-check"></i><b>3.5.5</b> Useful plot additions</a></li>
<li class="chapter" data-level="3.5.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#example-dataset"><i class="fa fa-check"></i><b>3.5.6</b> Example dataset</a></li>
<li class="chapter" data-level="3.5.7" data-path="exploring-data-1.html"><a href="exploring-data-1.html#histograms"><i class="fa fa-check"></i><b>3.5.7</b> Histograms</a></li>
<li class="chapter" data-level="3.5.8" data-path="exploring-data-1.html"><a href="exploring-data-1.html#scatterplots"><i class="fa fa-check"></i><b>3.5.8</b> Scatterplots</a></li>
<li class="chapter" data-level="3.5.9" data-path="exploring-data-1.html"><a href="exploring-data-1.html#boxplots"><i class="fa fa-check"></i><b>3.5.9</b> Boxplots</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#in-course-exercise-2"><i class="fa fa-check"></i><b>3.6</b> In-course exercise</a><ul>
<li class="chapter" data-level="3.6.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#loading-data-from-an-r-package"><i class="fa fa-check"></i><b>3.6.1</b> Loading data from an R package</a></li>
<li class="chapter" data-level="3.6.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-logical-statements"><i class="fa fa-check"></i><b>3.6.2</b> Exploring the data using logical statements</a></li>
<li class="chapter" data-level="3.6.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-simple-statistics-and-summarize"><i class="fa fa-check"></i><b>3.6.3</b> Exploring the data using simple statistics and <code>summarize</code></a></li>
<li class="chapter" data-level="3.6.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-1"><i class="fa fa-check"></i><b>3.6.4</b> Exploring the data using basic plots #1</a></li>
<li class="chapter" data-level="3.6.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-2"><i class="fa fa-check"></i><b>3.6.5</b> Exploring the data using basic plots #2</a></li>
<li class="chapter" data-level="3.6.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-3"><i class="fa fa-check"></i><b>3.6.6</b> Exploring the data using basic plots #3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html"><i class="fa fa-check"></i><b>4</b> Reporting data results #1</a><ul>
<li class="chapter" data-level="4.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#guidelines-for-good-plots"><i class="fa fa-check"></i><b>4.1</b> Guidelines for good plots</a></li>
<li class="chapter" data-level="4.2" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#high-data-density"><i class="fa fa-check"></i><b>4.2</b> High data density</a></li>
<li class="chapter" data-level="4.3" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#meaningful-labels"><i class="fa fa-check"></i><b>4.3</b> Meaningful labels</a></li>
<li class="chapter" data-level="4.4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#references"><i class="fa fa-check"></i><b>4.4</b> References</a></li>
<li class="chapter" data-level="4.5" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#highlighting"><i class="fa fa-check"></i><b>4.5</b> Highlighting</a></li>
<li class="chapter" data-level="4.6" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#order"><i class="fa fa-check"></i><b>4.6</b> Order</a></li>
<li class="chapter" data-level="4.7" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#small-multiples"><i class="fa fa-check"></i><b>4.7</b> Small multiples</a></li>
<li class="chapter" data-level="4.8" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#advanced-customization"><i class="fa fa-check"></i><b>4.8</b> Advanced customization</a><ul>
<li class="chapter" data-level="4.8.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#scales"><i class="fa fa-check"></i><b>4.8.1</b> Scales</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#to-find-out-more"><i class="fa fa-check"></i><b>4.9</b> To find out more</a></li>
<li class="chapter" data-level="4.10" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#in-course-exercise-3"><i class="fa fa-check"></i><b>4.10</b> In-course exercise</a><ul>
<li class="chapter" data-level="4.10.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#designing-a-plot"><i class="fa fa-check"></i><b>4.10.1</b> Designing a plot</a></li>
<li class="chapter" data-level="4.10.2" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#implementing-plot-guidelines-1"><i class="fa fa-check"></i><b>4.10.2</b> Implementing plot guidelines #1</a></li>
<li class="chapter" data-level="4.10.3" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#implementing-plot-guidelines-2"><i class="fa fa-check"></i><b>4.10.3</b> Implementing plot guidelines #2</a></li>
<li class="chapter" data-level="4.10.4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#data-visualization-cheatsheet"><i class="fa fa-check"></i><b>4.10.4</b> Data visualization cheatsheet</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html"><i class="fa fa-check"></i><b>5</b> Reproducible research #1</a><ul>
<li class="chapter" data-level="5.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#what-is-reproducible-research"><i class="fa fa-check"></i><b>5.1</b> What is reproducible research?</a></li>
<li class="chapter" data-level="5.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#markdown"><i class="fa fa-check"></i><b>5.2</b> Markdown</a></li>
<li class="chapter" data-level="5.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#literate-programming-in-r"><i class="fa fa-check"></i><b>5.3</b> Literate programming in R</a></li>
<li class="chapter" data-level="5.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#style-guidelines"><i class="fa fa-check"></i><b>5.4</b> Style guidelines</a><ul>
<li class="chapter" data-level="5.4.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#line-length"><i class="fa fa-check"></i><b>5.4.1</b> Line length</a></li>
<li class="chapter" data-level="5.4.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#spacing"><i class="fa fa-check"></i><b>5.4.2</b> Spacing</a></li>
<li class="chapter" data-level="5.4.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#semicolons"><i class="fa fa-check"></i><b>5.4.3</b> Semicolons</a></li>
<li class="chapter" data-level="5.4.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#commenting"><i class="fa fa-check"></i><b>5.4.4</b> Commenting</a></li>
<li class="chapter" data-level="5.4.5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#indentation"><i class="fa fa-check"></i><b>5.4.5</b> Indentation</a></li>
<li class="chapter" data-level="5.4.6" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#code-grouping"><i class="fa fa-check"></i><b>5.4.6</b> Code grouping</a></li>
<li class="chapter" data-level="5.4.7" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#broader-guidelines"><i class="fa fa-check"></i><b>5.4.7</b> Broader guidelines</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#more-with-knitr"><i class="fa fa-check"></i><b>5.5</b> More with knitr</a><ul>
<li class="chapter" data-level="5.5.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#equations-in-knitr"><i class="fa fa-check"></i><b>5.5.1</b> Equations in <code>knitr</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#figures-from-file"><i class="fa fa-check"></i><b>5.5.2</b> Figures from file</a></li>
<li class="chapter" data-level="5.5.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#saving-graphics-files"><i class="fa fa-check"></i><b>5.5.3</b> Saving graphics files</a></li>
<li class="chapter" data-level="5.5.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#tables-in-r-markdown"><i class="fa fa-check"></i><b>5.5.4</b> Tables in R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#in-course-exercise-4"><i class="fa fa-check"></i><b>5.6</b> In-course exercise</a><ul>
<li class="chapter" data-level="5.6.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#creating-a-markdown-document"><i class="fa fa-check"></i><b>5.6.1</b> Creating a Markdown document</a></li>
<li class="chapter" data-level="5.6.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#adding-in-r-code"><i class="fa fa-check"></i><b>5.6.2</b> Adding in R code</a></li>
<li class="chapter" data-level="5.6.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#working-with-r-markdown-documents"><i class="fa fa-check"></i><b>5.6.3</b> Working with R Markdown documents</a></li>
<li class="chapter" data-level="5.6.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#r-style-guidelines"><i class="fa fa-check"></i><b>5.6.4</b> R style guidelines</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Part III: Intermediate</b></span></li>
<li class="chapter" data-level="6" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html"><i class="fa fa-check"></i><b>6</b> Entering and cleaning data #2</a><ul>
<li class="chapter" data-level="6.1" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#joining-datasets"><i class="fa fa-check"></i><b>6.1</b> Joining datasets</a></li>
<li class="chapter" data-level="6.2" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#tidy-data"><i class="fa fa-check"></i><b>6.2</b> Tidy data</a></li>
<li class="chapter" data-level="6.3" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#gathering"><i class="fa fa-check"></i><b>6.3</b> Gathering</a></li>
<li class="chapter" data-level="6.4" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#working-with-factors"><i class="fa fa-check"></i><b>6.4</b> Working with factors</a></li>
<li class="chapter" data-level="6.5" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#string-operations-and-regular-expressions"><i class="fa fa-check"></i><b>6.5</b> String operations and regular expressions</a></li>
<li class="chapter" data-level="6.6" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#in-course-exercise-5"><i class="fa fa-check"></i><b>6.6</b> In-course exercise</a><ul>
<li class="chapter" data-level="6.6.1" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#designing-tidy-data"><i class="fa fa-check"></i><b>6.6.1</b> Designing tidy data</a></li>
<li class="chapter" data-level="6.6.2" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#easier-data-wrangling"><i class="fa fa-check"></i><b>6.6.2</b> Easier data wrangling</a></li>
<li class="chapter" data-level="6.6.3" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#more-extensive-data-wrangling"><i class="fa fa-check"></i><b>6.6.3</b> More extensive data wrangling</a></li>
<li class="chapter" data-level="6.6.4" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#tidying-vadeaths-data"><i class="fa fa-check"></i><b>6.6.4</b> Tidying <code>VADeaths</code> data</a></li>
<li class="chapter" data-level="6.6.5" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#exploring-fatality-analysis-reporting-system-fars-data"><i class="fa fa-check"></i><b>6.6.5</b> Exploring Fatality Analysis Reporting System (FARS) data</a></li>
<li class="chapter" data-level="6.6.6" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#baby-names"><i class="fa fa-check"></i><b>6.6.6</b> Baby names</a></li>
<li class="chapter" data-level="6.6.7" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#more-with-baby-names"><i class="fa fa-check"></i><b>6.6.7</b> More with baby names</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="exploring-data-2.html"><a href="exploring-data-2.html"><i class="fa fa-check"></i><b>7</b> Exploring data #2</a><ul>
<li class="chapter" data-level="7.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#simple-statistical-tests-in-r"><i class="fa fa-check"></i><b>7.1</b> Simple statistical tests in R</a></li>
<li class="chapter" data-level="7.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#matrices"><i class="fa fa-check"></i><b>7.2</b> Matrices</a></li>
<li class="chapter" data-level="7.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#lists"><i class="fa fa-check"></i><b>7.3</b> Lists</a></li>
<li class="chapter" data-level="7.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#regression-models"><i class="fa fa-check"></i><b>7.4</b> Regression models</a><ul>
<li class="chapter" data-level="7.4.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#formula-structure"><i class="fa fa-check"></i><b>7.4.1</b> Formula structure</a></li>
<li class="chapter" data-level="7.4.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#linear-models"><i class="fa fa-check"></i><b>7.4.2</b> Linear models</a></li>
<li class="chapter" data-level="7.4.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#generalized-linear-models-glms"><i class="fa fa-check"></i><b>7.4.3</b> Generalized linear models (GLMs)</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="exploring-data-2.html"><a href="exploring-data-2.html#handling-model-objects"><i class="fa fa-check"></i><b>7.5</b> Handling model objects</a><ul>
<li class="chapter" data-level="7.5.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomtidy"><i class="fa fa-check"></i><b>7.5.1</b> broom::tidy</a></li>
<li class="chapter" data-level="7.5.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomaugment"><i class="fa fa-check"></i><b>7.5.2</b> broom::augment</a></li>
<li class="chapter" data-level="7.5.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomglance"><i class="fa fa-check"></i><b>7.5.3</b> broom::glance</a></li>
<li class="chapter" data-level="7.5.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#references-statistics-in-r"><i class="fa fa-check"></i><b>7.5.4</b> References– statistics in R</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="exploring-data-2.html"><a href="exploring-data-2.html#in-course-exercise-6"><i class="fa fa-check"></i><b>7.6</b> In-course exercise</a><ul>
<li class="chapter" data-level="7.6.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#running-a-simple-statistical-test"><i class="fa fa-check"></i><b>7.6.1</b> Running a simple statistical test</a></li>
<li class="chapter" data-level="7.6.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#using-regression-models-to-explore-data-1"><i class="fa fa-check"></i><b>7.6.2</b> Using regression models to explore data #1</a></li>
<li class="chapter" data-level="7.6.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#using-regression-models-to-explore-data-2"><i class="fa fa-check"></i><b>7.6.3</b> Using regression models to explore data #2</a></li>
<li class="chapter" data-level="7.6.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#exploring-fatality-analysis-reporting-system-fars-data-1"><i class="fa fa-check"></i><b>7.6.4</b> Exploring Fatality Analysis Reporting System (FARS) data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html"><i class="fa fa-check"></i><b>8</b> Reporting data results #2</a><ul>
<li class="chapter" data-level="8.1" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#functions"><i class="fa fa-check"></i><b>8.1</b> Functions</a><ul>
<li class="chapter" data-level="8.1.1" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#if-else-statements"><i class="fa fa-check"></i><b>8.1.1</b> if / else statements</a></li>
<li class="chapter" data-level="8.1.2" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#some-other-control-structures"><i class="fa fa-check"></i><b>8.1.2</b> Some other control structures</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#running-the-same-function-multiple-times"><i class="fa fa-check"></i><b>8.2</b> Running the same function multiple times</a><ul>
<li class="chapter" data-level="8.2.1" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#but-but-what-about-nested-loops-etc"><i class="fa fa-check"></i><b>8.2.1</b> But, but what about nested loops etc?</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#in-course-exercise-7"><i class="fa fa-check"></i><b>8.3</b> In-course exercise</a><ul>
<li class="chapter" data-level="8.3.1" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#using-functions-to-load-data"><i class="fa fa-check"></i><b>8.3.1</b> Using functions to load data</a></li>
<li class="chapter" data-level="8.3.2" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#predicting-running-times"><i class="fa fa-check"></i><b>8.3.2</b> Predicting running times</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html"><i class="fa fa-check"></i><b>9</b> Reporting results #2a</a><ul>
<li class="chapter" data-level="9.1" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#example-data"><i class="fa fa-check"></i><b>9.1</b> Example data</a></li>
<li class="chapter" data-level="9.2" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#ggplot2-extras-and-extensions"><i class="fa fa-check"></i><b>9.2</b> <code>ggplot2</code> extras and extensions</a><ul>
<li class="chapter" data-level="9.2.1" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#scales-package"><i class="fa fa-check"></i><b>9.2.1</b> <code>scales</code> package</a></li>
<li class="chapter" data-level="9.2.2" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#ggplot2-extensions"><i class="fa fa-check"></i><b>9.2.2</b> <code>ggplot2</code> extensions</a></li>
<li class="chapter" data-level="9.2.3" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#more-ggplot2-themes"><i class="fa fa-check"></i><b>9.2.3</b> More <code>ggplot2</code> themes</a></li>
<li class="chapter" data-level="9.2.4" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#other-useful-ggplot2-extensions"><i class="fa fa-check"></i><b>9.2.4</b> Other useful <code>ggplot2</code> extensions</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#simple-features"><i class="fa fa-check"></i><b>9.3</b> Simple features</a><ul>
<li class="chapter" data-level="9.3.1" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#introduction-to-simple-features"><i class="fa fa-check"></i><b>9.3.1</b> Introduction to simple features</a></li>
<li class="chapter" data-level="9.3.2" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#state-boundaries"><i class="fa fa-check"></i><b>9.3.2</b> State boundaries</a></li>
<li class="chapter" data-level="9.3.3" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#creating-an-sf-object"><i class="fa fa-check"></i><b>9.3.3</b> Creating an <code>sf</code> object</a></li>
<li class="chapter" data-level="9.3.4" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#reading-in-from-gis-files"><i class="fa fa-check"></i><b>9.3.4</b> Reading in from GIS files</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#in-course-exercise-8"><i class="fa fa-check"></i><b>9.4</b> In-course exercise</a><ul>
<li class="chapter" data-level="9.4.1" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#getting-and-cleaning-the-example-data"><i class="fa fa-check"></i><b>9.4.1</b> Getting and cleaning the example data</a></li>
<li class="chapter" data-level="9.4.2" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#trying-out-ggplot2-extensions"><i class="fa fa-check"></i><b>9.4.2</b> Trying out <code>ggplot2</code> extensions</a></li>
<li class="chapter" data-level="9.4.3" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#using-simple-features-to-map"><i class="fa fa-check"></i><b>9.4.3</b> Using simple features to map</a></li>
<li class="chapter" data-level="9.4.4" data-path="reporting-results-2a.html"><a href="reporting-results-2a.html#more-on-mapping"><i class="fa fa-check"></i><b>9.4.4</b> More on mapping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html"><i class="fa fa-check"></i><b>10</b> Reproducible research #2</a><ul>
<li class="chapter" data-level="10.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#templates"><i class="fa fa-check"></i><b>10.1</b> Templates</a></li>
<li class="chapter" data-level="10.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#r-projects"><i class="fa fa-check"></i><b>10.2</b> R Projects</a><ul>
<li class="chapter" data-level="10.2.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#organization"><i class="fa fa-check"></i><b>10.2.1</b> Organization</a></li>
<li class="chapter" data-level="10.2.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#creating-r-projects"><i class="fa fa-check"></i><b>10.2.2</b> Creating R Projects</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#git"><i class="fa fa-check"></i><b>10.3</b> git</a><ul>
<li class="chapter" data-level="10.3.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#initializing-a-git-repository"><i class="fa fa-check"></i><b>10.3.1</b> Initializing a git repository</a></li>
<li class="chapter" data-level="10.3.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#committing"><i class="fa fa-check"></i><b>10.3.2</b> Committing</a></li>
<li class="chapter" data-level="10.3.3" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#browsing-history"><i class="fa fa-check"></i><b>10.3.3</b> Browsing history</a></li>
<li class="chapter" data-level="10.3.4" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#linking-local-repo-to-github-repo"><i class="fa fa-check"></i><b>10.3.4</b> Linking local repo to GitHub repo</a></li>
<li class="chapter" data-level="10.3.5" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#syncing-rstudio-and-github"><i class="fa fa-check"></i><b>10.3.5</b> Syncing RStudio and GitHub</a></li>
<li class="chapter" data-level="10.3.6" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#issues"><i class="fa fa-check"></i><b>10.3.6</b> Issues</a></li>
<li class="chapter" data-level="10.3.7" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#pull-request"><i class="fa fa-check"></i><b>10.3.7</b> Pull request</a></li>
<li class="chapter" data-level="10.3.8" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#merge-conflicts"><i class="fa fa-check"></i><b>10.3.8</b> Merge conflicts</a></li>
<li class="chapter" data-level="10.3.9" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#find-out-more"><i class="fa fa-check"></i><b>10.3.9</b> Find out more</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#in-course-exercise-9"><i class="fa fa-check"></i><b>10.4</b> In-course exercise</a><ul>
<li class="chapter" data-level="10.4.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#trying-out-templates"><i class="fa fa-check"></i><b>10.4.1</b> Trying out templates</a></li>
<li class="chapter" data-level="10.4.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#organizing-a-project"><i class="fa fa-check"></i><b>10.4.2</b> Organizing a project</a></li>
<li class="chapter" data-level="10.4.3" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#initializing-git-for-an-r-project"><i class="fa fa-check"></i><b>10.4.3</b> Initializing git for an R Project</a></li>
<li class="chapter" data-level="10.4.4" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#linking-your-project-with-a-github-repository"><i class="fa fa-check"></i><b>10.4.4</b> Linking your project with a GitHub repository</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Part IV: Advanced</b></span></li>
<li class="chapter" data-level="11" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html"><i class="fa fa-check"></i><b>11</b> Entering and cleaning data #3</a><ul>
<li class="chapter" data-level="11.1" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#pulling-online-data"><i class="fa fa-check"></i><b>11.1</b> Pulling online data</a><ul>
<li class="chapter" data-level="11.1.1" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#apis"><i class="fa fa-check"></i><b>11.1.1</b> APIs</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#example-r-api-wrapper-packages"><i class="fa fa-check"></i><b>11.2</b> Example R API wrapper packages</a></li>
<li class="chapter" data-level="11.3" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#tigris-package"><i class="fa fa-check"></i><b>11.3</b> <code>tigris</code> package</a></li>
<li class="chapter" data-level="11.4" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#countyweather"><i class="fa fa-check"></i><b>11.4</b> <code>countyweather</code></a></li>
<li class="chapter" data-level="11.5" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#cleaning-very-messy-data"><i class="fa fa-check"></i><b>11.5</b> Cleaning very messy data</a></li>
<li class="chapter" data-level="11.6" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#in-course-exercise-10"><i class="fa fa-check"></i><b>11.6</b> In-course exercise</a><ul>
<li class="chapter" data-level="11.6.1" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#working-with-an-api-wrapper-package"><i class="fa fa-check"></i><b>11.6.1</b> Working with an API wrapper package</a></li>
<li class="chapter" data-level="11.6.2" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#cleaning-very-messy-data-1"><i class="fa fa-check"></i><b>11.6.2</b> Cleaning very messy data</a></li>
<li class="chapter" data-level="11.6.3" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#exploring-network-data"><i class="fa fa-check"></i><b>11.6.3</b> Exploring network data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="exploring-data-3.html"><a href="exploring-data-3.html"><i class="fa fa-check"></i><b>12</b> Exploring data #3</a><ul>
<li class="chapter" data-level="12.1" data-path="exploring-data-3.html"><a href="exploring-data-3.html#simulations"><i class="fa fa-check"></i><b>12.1</b> Simulations</a><ul>
<li class="chapter" data-level="12.1.1" data-path="exploring-data-3.html"><a href="exploring-data-3.html#the-lady-tasting-tea"><i class="fa fa-check"></i><b>12.1.1</b> The lady tasting tea</a></li>
<li class="chapter" data-level="12.1.2" data-path="exploring-data-3.html"><a href="exploring-data-3.html#playing-darts"><i class="fa fa-check"></i><b>12.1.2</b> Playing darts</a></li>
<li class="chapter" data-level="12.1.3" data-path="exploring-data-3.html"><a href="exploring-data-3.html#simulations-in-research"><i class="fa fa-check"></i><b>12.1.3</b> Simulations in research</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="exploring-data-3.html"><a href="exploring-data-3.html#other-computationally-intensive-approaches"><i class="fa fa-check"></i><b>12.2</b> Other computationally-intensive approaches</a><ul>
<li class="chapter" data-level="12.2.1" data-path="exploring-data-3.html"><a href="exploring-data-3.html#bootstrap-and-friends"><i class="fa fa-check"></i><b>12.2.1</b> Bootstrap and friends</a></li>
<li class="chapter" data-level="12.2.2" data-path="exploring-data-3.html"><a href="exploring-data-3.html#bayesian-analysis"><i class="fa fa-check"></i><b>12.2.2</b> Bayesian analysis</a></li>
<li class="chapter" data-level="12.2.3" data-path="exploring-data-3.html"><a href="exploring-data-3.html#ensemble-models-and-friends"><i class="fa fa-check"></i><b>12.2.3</b> Ensemble models and friends</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html"><i class="fa fa-check"></i><b>13</b> Reporting data results #3</a><ul>
<li class="chapter" data-level="13.1" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#shiny-web-apps"><i class="fa fa-check"></i><b>13.1</b> Shiny web apps</a><ul>
<li class="chapter" data-level="13.1.1" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#resources-for-learning-shiny"><i class="fa fa-check"></i><b>13.1.1</b> Resources for learning Shiny</a></li>
<li class="chapter" data-level="13.1.2" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#basics-of-shiny-apps"><i class="fa fa-check"></i><b>13.1.2</b> Basics of Shiny apps</a></li>
<li class="chapter" data-level="13.1.3" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#server.r-file"><i class="fa fa-check"></i><b>13.1.3</b> <code>server.R</code> file</a></li>
<li class="chapter" data-level="13.1.4" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#ui.r-file"><i class="fa fa-check"></i><b>13.1.4</b> <code>ui.R</code> file</a></li>
<li class="chapter" data-level="13.1.5" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#making-a-shiny-app"><i class="fa fa-check"></i><b>13.1.5</b> Making a Shiny app</a></li>
<li class="chapter" data-level="13.1.6" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#starting-with-the-ui.r-file"><i class="fa fa-check"></i><b>13.1.6</b> Starting with the <code>ui.R</code> file</a></li>
<li class="chapter" data-level="13.1.7" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#adding-in-widgets"><i class="fa fa-check"></i><b>13.1.7</b> Adding in widgets</a></li>
<li class="chapter" data-level="13.1.8" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#creating-output-in-server.r"><i class="fa fa-check"></i><b>13.1.8</b> Creating output in <code>server.R</code></a></li>
<li class="chapter" data-level="13.1.9" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#making-the-output-reactive"><i class="fa fa-check"></i><b>13.1.9</b> Making the output reactive</a></li>
<li class="chapter" data-level="13.1.10" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#fancier-version"><i class="fa fa-check"></i><b>13.1.10</b> Fancier version</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#htmlwidgets"><i class="fa fa-check"></i><b>13.2</b> htmlWidgets</a><ul>
<li class="chapter" data-level="13.2.1" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#overview-of-htmlwidgets"><i class="fa fa-check"></i><b>13.2.1</b> Overview of htmlWidgets</a></li>
<li class="chapter" data-level="13.2.2" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#plotly-package"><i class="fa fa-check"></i><b>13.2.2</b> <code>plotly</code> package</a></li>
<li class="chapter" data-level="13.2.3" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#rbokeh-package"><i class="fa fa-check"></i><b>13.2.3</b> <code>rbokeh</code> package</a></li>
<li class="chapter" data-level="13.2.4" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#dygraphs-package"><i class="fa fa-check"></i><b>13.2.4</b> <code>dygraphs</code> package</a></li>
<li class="chapter" data-level="13.2.5" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#dt-package"><i class="fa fa-check"></i><b>13.2.5</b> <code>DT</code> package</a></li>
<li class="chapter" data-level="13.2.6" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#creating-your-own-widget"><i class="fa fa-check"></i><b>13.2.6</b> Creating your own widget</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html"><i class="fa fa-check"></i><b>14</b> Reproducible research #3</a><ul>
<li class="chapter" data-level="14.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#overview-of-r-packages"><i class="fa fa-check"></i><b>14.1</b> Overview of R packages</a><ul>
<li class="chapter" data-level="14.1.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#what-is-an-r-package"><i class="fa fa-check"></i><b>14.1.1</b> What is an R package?</a></li>
<li class="chapter" data-level="14.1.2" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#example-nmmaps-package"><i class="fa fa-check"></i><b>14.1.2</b> Example: NMMAPS package</a></li>
<li class="chapter" data-level="14.1.3" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#sharing-an-r-package"><i class="fa fa-check"></i><b>14.1.3</b> Sharing an R package</a></li>
<li class="chapter" data-level="14.1.4" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#package-names"><i class="fa fa-check"></i><b>14.1.4</b> Package names</a></li>
<li class="chapter" data-level="14.1.5" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#package-maintainer"><i class="fa fa-check"></i><b>14.1.5</b> Package maintainer</a></li>
<li class="chapter" data-level="14.1.6" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#find-out-more-1"><i class="fa fa-check"></i><b>14.1.6</b> Find out more</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html"><i class="fa fa-check"></i><b>A</b> Appendix A: Vocabulary</a><ul>
<li class="chapter" data-level="A.1" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-1r-preliminaries-updated-for-2018"><i class="fa fa-check"></i><b>A.1</b> Quiz 1—R Preliminaries (Updated for 2018)</a></li>
<li class="chapter" data-level="A.2" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-2entering-cleaning-data-1-updated-for-2018"><i class="fa fa-check"></i><b>A.2</b> Quiz 2—Entering / cleaning data #1 (Updated for 2018)</a></li>
<li class="chapter" data-level="A.3" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-3-updated-for-2018"><i class="fa fa-check"></i><b>A.3</b> Quiz 3 (Updated for 2018)</a></li>
<li class="chapter" data-level="A.4" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-4-updated-for-2018"><i class="fa fa-check"></i><b>A.4</b> Quiz 4 (Updated for 2018)</a></li>
<li class="chapter" data-level="A.5" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-5-updated-for-2018-no-updates-since-last-week"><i class="fa fa-check"></i><b>A.5</b> Quiz 5 (Updated for 2018; no updates since last week)</a></li>
<li class="chapter" data-level="A.6" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-6-updated-for-2018-no-updates-since-last-week"><i class="fa fa-check"></i><b>A.6</b> Quiz 6 (Updated for 2018; no updates since last week)</a></li>
<li class="chapter" data-level="A.7" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-7-updated-for-2018-no-updates-since-last-week"><i class="fa fa-check"></i><b>A.7</b> Quiz 7 (Updated for 2018; no updates since last week)</a></li>
<li class="chapter" data-level="A.8" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-8-updated-for-2018"><i class="fa fa-check"></i><b>A.8</b> Quiz 8 (Updated for 2018)</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html"><i class="fa fa-check"></i><b>B</b> Appendix B: Homework</a><ul>
<li class="chapter" data-level="B.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-1-updated-for-2018"><i class="fa fa-check"></i><b>B.1</b> Homework #1 (Updated for 2018)</a><ul>
<li class="chapter" data-level="B.1.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#option-1"><i class="fa fa-check"></i><b>B.1.1</b> Option 1</a></li>
<li class="chapter" data-level="B.1.2" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#option-2"><i class="fa fa-check"></i><b>B.1.2</b> Option 2</a></li>
<li class="chapter" data-level="B.1.3" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#special-swirl-commands"><i class="fa fa-check"></i><b>B.1.3</b> Special swirl commands</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-2-updated-for-2018"><i class="fa fa-check"></i><b>B.2</b> Homework #2 (Updated for 2018)</a></li>
<li class="chapter" data-level="B.3" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-3-updated-for-2018"><i class="fa fa-check"></i><b>B.3</b> Homework #3 (Updated for 2018)</a></li>
<li class="chapter" data-level="B.4" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-4-updated-for-2018"><i class="fa fa-check"></i><b>B.4</b> Homework #4 (Updated for 2018)</a><ul>
<li class="chapter" data-level="B.4.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#setting-up-a-github-repository-for-this-project"><i class="fa fa-check"></i><b>B.4.1</b> Setting up a GitHub repository for this project</a></li>
<li class="chapter" data-level="B.4.2" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#estimating-the-proportion-of-unsolved-homicides-in-each-city"><i class="fa fa-check"></i><b>B.4.2</b> Estimating the proportion of unsolved homicides in each city</a></li>
</ul></li>
<li class="chapter" data-level="B.5" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-5-updated-for-2018"><i class="fa fa-check"></i><b>B.5</b> Homework #5 (Updated for 2018)</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Programming for Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reporting-data-results-2" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> Reporting data results #2</h1>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week8.pdf">Download</a> a pdf of the lecture slides covering this topic.</p>
<hr />
<div id="functions" class="section level2">
<h2><span class="header-section-number">8.1</span> Functions</h2>
<p>As you move to larger projects, you will find yourself using the same code a lot. </p>
<p>Examples include:</p>
<ul>
<li>Reading in data from a specific type of equipment (air pollution monitor, accelerometer)</li>
<li>Running a specific type of analysis</li>
<li>Creating a specific type of plot or map</li>
</ul>

<p>If you find yourself cutting and pasting a lot, convert the code to a function.</p>
<p>Advantages of writing functions include:</p>
<ul>
<li>Coding is more efficient</li>
<li>Easier to change your code (if you’ve cut and paste code and you want to change something, you have to change it everywhere - this is an easy way to accidentally create bugs in your code)</li>
<li>Easier to share code with others</li>
</ul>
<p>You can name a function anything you want (although try to avoid names of preexisting-existing functions). You then define any inputs (arguments; separate multiple arguments with commas) and put the code to run in braces:</p>
<div class="sourceCode" id="cb821"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb821-1" data-line-number="1"><span class="co">## Note: this code will not run</span></a>
<a class="sourceLine" id="cb821-2" data-line-number="2">[<span class="cf">function</span> name] &lt;-<span class="st"> </span><span class="cf">function</span>([any arguments]){</a>
<a class="sourceLine" id="cb821-3" data-line-number="3">        [code to run]</a>
<a class="sourceLine" id="cb821-4" data-line-number="4">}</a></code></pre></div>
<p>Here is an example of a very basic function. This function takes a number as input and adds 1 to that number.</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb822-1" data-line-number="1">add_one &lt;-<span class="st"> </span><span class="cf">function</span>(number){</a>
<a class="sourceLine" id="cb822-2" data-line-number="2">  out &lt;-<span class="st"> </span>number <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb822-3" data-line-number="3">  <span class="kw">return</span>(out)</a>
<a class="sourceLine" id="cb822-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb822-5" data-line-number="5"></a>
<a class="sourceLine" id="cb822-6" data-line-number="6"><span class="kw">add_one</span>(<span class="dt">number =</span> <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb824"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb824-1" data-line-number="1"><span class="kw">add_one</span>(<span class="dt">number =</span> <span class="dv">-1</span>)</a></code></pre></div>
<pre><code>## [1] 0</code></pre>
<ul>
<li>Functions can input any type of R object (for example, vectors, data frames, even other functions and ggplot objects)</li>
<li>Similarly, functions can output any type of R object</li>
<li>When defining a function, you can set default values for some of the parameters</li>
<li>You can explicitly specify the value to return from the function</li>
<li>There are ways to check for errors in the arguments a user inputs to the function</li>
</ul>
<p>For example, the following function inputs a data frame (<code>datafr</code>) and a one-element vector (<code>child_id</code>) and returns only rows in the data frame where it’s <code>id</code> column matches <code>child_id</code>. It includes a default value for <code>datafr</code>, but not for <code>child_id</code>.</p>
<div class="sourceCode" id="cb826"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb826-1" data-line-number="1">subset_nepali &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">datafr =</span> nepali, child_id){</a>
<a class="sourceLine" id="cb826-2" data-line-number="2">  datafr &lt;-<span class="st"> </span>datafr <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb826-3" data-line-number="3"><span class="st">            </span><span class="kw">filter</span>(id <span class="op">==</span><span class="st"> </span>child_id)</a>
<a class="sourceLine" id="cb826-4" data-line-number="4">  <span class="kw">return</span>(datafr)</a>
<a class="sourceLine" id="cb826-5" data-line-number="5">}</a></code></pre></div>
<p>If an argument is not given for a parameter with a default, the function will run using the default value for that parameter. For example:</p>
<div class="sourceCode" id="cb827"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb827-1" data-line-number="1"><span class="kw">subset_nepali</span>(<span class="dt">child_id =</span> <span class="st">&quot;120011&quot;</span>)</a></code></pre></div>
<pre><code>##       id  sex   wt   ht mage lit died alive age wt_over_13
## 1 120011 Male 12.8 91.2   35   0    2     5  41      FALSE
## 2 120011 Male 12.8 93.9   35   0    2     5  45      FALSE
## 3 120011 Male 13.1 95.2   35   0    2     5  49       TRUE
## 4 120011 Male 13.8 96.9   35   0    2     5  53       TRUE
## 5 120011 Male   NA   NA   35   0    2     5  57         NA</code></pre>
<p>If an argument is not given for a parameter without a default, the function call will result in an error. For example:</p>
<div class="sourceCode" id="cb829"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb829-1" data-line-number="1"><span class="kw">subset_nepali</span>(<span class="dt">datafr =</span> nepali)</a></code></pre></div>
<pre><code>## Error in filter_impl(.data, quo): Evaluation error: argument &quot;child_id&quot; is missing, with no default.</code></pre>
<p>By default, the function will return the last defined object, although the choice of using <code>return</code> can affect printing behavior when you run the function. For example, I could have written the <code>subset_nepali</code> function like this:</p>
<div class="sourceCode" id="cb831"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb831-1" data-line-number="1">subset_nepali &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">datafr =</span> nepali, child_id){</a>
<a class="sourceLine" id="cb831-2" data-line-number="2">  datafr &lt;-<span class="st"> </span>datafr <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb831-3" data-line-number="3"><span class="st">            </span><span class="kw">filter</span>(id <span class="op">==</span><span class="st"> </span>child_id)</a>
<a class="sourceLine" id="cb831-4" data-line-number="4">}</a></code></pre></div>
<p>In this case, the output will not automatically print out when you call the function without assigning it to an R object:</p>
<div class="sourceCode" id="cb832"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb832-1" data-line-number="1"><span class="kw">subset_nepali</span>(<span class="dt">child_id =</span> <span class="st">&quot;120011&quot;</span>)</a></code></pre></div>
<p>However, the output can be assigned to an R object in the same way as when the function was defined without <code>return</code>:</p>
<div class="sourceCode" id="cb833"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb833-1" data-line-number="1">first_childs_data &lt;-<span class="st"> </span><span class="kw">subset_nepali</span>(<span class="dt">child_id =</span> <span class="st">&quot;120011&quot;</span>)</a>
<a class="sourceLine" id="cb833-2" data-line-number="2">first_childs_data</a></code></pre></div>
<pre><code>##       id  sex   wt   ht mage lit died alive age wt_over_13
## 1 120011 Male 12.8 91.2   35   0    2     5  41      FALSE
## 2 120011 Male 12.8 93.9   35   0    2     5  45      FALSE
## 3 120011 Male 13.1 95.2   35   0    2     5  49       TRUE
## 4 120011 Male 13.8 96.9   35   0    2     5  53       TRUE
## 5 120011 Male   NA   NA   35   0    2     5  57         NA</code></pre>
<div class="rmdwarning">
<p>
R is very “good” at running functions! It will look for (scope) the variables in your function in various places (environments). So your functions may run even when you don’t expect them to, potentially, with unexpected results!
</p>
</div>
<p>The <code>return</code> function can also be used to return an object other than the last defined object (although this doesn’t tend to be something you need to do very often). If you did not use <code>return</code> in the following code, it will output “Test output”:</p>
<div class="sourceCode" id="cb835"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb835-1" data-line-number="1">subset_nepali &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">datafr =</span> nepali, child_id){</a>
<a class="sourceLine" id="cb835-2" data-line-number="2">  datafr &lt;-<span class="st"> </span>datafr <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb835-3" data-line-number="3"><span class="st">            </span><span class="kw">filter</span>(id <span class="op">==</span><span class="st"> </span>child_id)</a>
<a class="sourceLine" id="cb835-4" data-line-number="4">  a &lt;-<span class="st"> &quot;Test output&quot;</span></a>
<a class="sourceLine" id="cb835-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb835-6" data-line-number="6">(<span class="kw">subset_nepali</span>(<span class="dt">child_id =</span> <span class="st">&quot;120011&quot;</span>))</a></code></pre></div>
<pre><code>## [1] &quot;Test output&quot;</code></pre>
<p>Conversely, you can use <code>return</code> to output <code>datafr</code>, even though it’s not the last object defined:</p>
<div class="sourceCode" id="cb837"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb837-1" data-line-number="1">subset_nepali &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">datafr =</span> nepali, child_id){</a>
<a class="sourceLine" id="cb837-2" data-line-number="2">  datafr &lt;-<span class="st"> </span>datafr <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb837-3" data-line-number="3"><span class="st">            </span><span class="kw">filter</span>(id <span class="op">==</span><span class="st"> </span>child_id)</a>
<a class="sourceLine" id="cb837-4" data-line-number="4">  a &lt;-<span class="st"> &quot;Test output&quot;</span></a>
<a class="sourceLine" id="cb837-5" data-line-number="5">  <span class="kw">return</span>(datafr)</a>
<a class="sourceLine" id="cb837-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb837-7" data-line-number="7"><span class="kw">subset_nepali</span>(<span class="dt">child_id =</span> <span class="st">&quot;120011&quot;</span>)</a></code></pre></div>
<pre><code>##       id  sex   wt   ht mage lit died alive age wt_over_13
## 1 120011 Male 12.8 91.2   35   0    2     5  41      FALSE
## 2 120011 Male 12.8 93.9   35   0    2     5  45      FALSE
## 3 120011 Male 13.1 95.2   35   0    2     5  49       TRUE
## 4 120011 Male 13.8 96.9   35   0    2     5  53       TRUE
## 5 120011 Male   NA   NA   35   0    2     5  57         NA</code></pre>
<p>You can use <code>stop</code> to stop execution of the function and give the user an error message. For example, the <code>subset_nepali</code> function will fail if the user inputs a data frame that does not have a column named “id”:</p>
<div class="sourceCode" id="cb839"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb839-1" data-line-number="1"><span class="kw">subset_nepali</span>(<span class="dt">datafr =</span> <span class="kw">data.frame</span>(<span class="dt">wt =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>)),</a>
<a class="sourceLine" id="cb839-2" data-line-number="2">              <span class="dt">child_id =</span> <span class="st">&quot;12011&quot;</span>)</a></code></pre></div>
<pre><code> Error: comparison (1) is possible only for 
 atomic and list types </code></pre>
<p>You can rewrite the function to stop if the input <code>datafr</code> does not have a column named “id”:</p>
<div class="sourceCode" id="cb841"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb841-1" data-line-number="1">subset_nepali &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">datafr =</span> nepali, child_id){</a>
<a class="sourceLine" id="cb841-2" data-line-number="2">  <span class="cf">if</span>(<span class="op">!</span>(<span class="st">&quot;id&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">colnames</span>(datafr))){</a>
<a class="sourceLine" id="cb841-3" data-line-number="3">    <span class="kw">stop</span>(<span class="st">&quot;`datafr` must include a column named `id`&quot;</span>)</a>
<a class="sourceLine" id="cb841-4" data-line-number="4">  }</a>
<a class="sourceLine" id="cb841-5" data-line-number="5">  datafr &lt;-<span class="st"> </span>datafr <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb841-6" data-line-number="6"><span class="st">    </span><span class="kw">filter</span>(id <span class="op">==</span><span class="st"> </span>child_id)</a>
<a class="sourceLine" id="cb841-7" data-line-number="7">  <span class="kw">return</span>(datafr)</a>
<a class="sourceLine" id="cb841-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb841-9" data-line-number="9"><span class="kw">subset_nepali</span>(<span class="dt">datafr =</span> <span class="kw">data.frame</span>(<span class="dt">wt =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>)),</a>
<a class="sourceLine" id="cb841-10" data-line-number="10">              <span class="dt">child_id =</span> <span class="st">&quot;12011&quot;</span>)</a></code></pre></div>
<pre><code>Error in subset_nepali(datafr = data.frame(wt = rnorm(10)),
child_id = &quot;12011&quot;) : 
  `datafr` must include a column named `id`</code></pre>
<p>The <code>stop</code> function is particularly important if the function would keep running with the wrong input, but would result in the wrong output. </p>
<p>You can also output warnings and messages using the functions <code>warning</code> and <code>message</code>.</p>
<hr />
<div id="if-else-statements" class="section level3">
<h3><span class="header-section-number">8.1.1</span> if / else statements</h3>
<p>There are other control structures you can use in your R code. Two that you will commonly use within R functions are <code>if</code> and <code>ifelse</code> statements. </p>
<p>An <code>if</code> statement tells R that, <strong>if</strong> a certain condition is true, <strong>do</strong> run some code. For example, if you wanted to print out only odd numbers between 1 and 5, one way to do that is with an <code>if</code> statement: (Note: the <code>%%</code> operator in R returns the remainder of the first value (i) divided by the second value (2).)</p>
<div class="sourceCode" id="cb843"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb843-1" data-line-number="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb843-2" data-line-number="2">  <span class="cf">if</span>(i <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb843-3" data-line-number="3">    <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb843-4" data-line-number="4">  }</a>
<a class="sourceLine" id="cb843-5" data-line-number="5">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] 3
## [1] 5</code></pre>
<p>The <code>if</code> statement runs some code if a condition is true, but does nothing if it is false. If you’d like different code to run depending on whether the condition is true or false, you can us an if / else or an if / else if / else statement.</p>
<div class="sourceCode" id="cb845"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb845-1" data-line-number="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb845-2" data-line-number="2">  <span class="cf">if</span>(i <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb845-3" data-line-number="3">    <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb845-4" data-line-number="4">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb845-5" data-line-number="5">    <span class="kw">print</span>(<span class="kw">paste</span>(i, <span class="st">&quot;is even&quot;</span>))</a>
<a class="sourceLine" id="cb845-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb845-7" data-line-number="7">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] &quot;2 is even&quot;
## [1] 3
## [1] &quot;4 is even&quot;
## [1] 5</code></pre>
<p>What would this code do? </p>
<div class="sourceCode" id="cb847"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb847-1" data-line-number="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>){</a>
<a class="sourceLine" id="cb847-2" data-line-number="2">  <span class="cf">if</span>(i <span class="op">%%</span><span class="st"> </span><span class="dv">3</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>i <span class="op">%%</span><span class="st"> </span><span class="dv">5</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb847-3" data-line-number="3">    <span class="kw">print</span>(<span class="st">&quot;FizzBuzz&quot;</span>)</a>
<a class="sourceLine" id="cb847-4" data-line-number="4">  } <span class="cf">else</span> <span class="cf">if</span>(i <span class="op">%%</span><span class="st"> </span><span class="dv">3</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb847-5" data-line-number="5">    <span class="kw">print</span>(<span class="st">&quot;Fizz&quot;</span>)</a>
<a class="sourceLine" id="cb847-6" data-line-number="6">  } <span class="cf">else</span> <span class="cf">if</span>(i <span class="op">%%</span><span class="st"> </span><span class="dv">5</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb847-7" data-line-number="7">    <span class="kw">print</span>(<span class="st">&quot;Buzz&quot;</span>)</a>
<a class="sourceLine" id="cb847-8" data-line-number="8">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb847-9" data-line-number="9">    <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb847-10" data-line-number="10">  }</a>
<a class="sourceLine" id="cb847-11" data-line-number="11">}</a></code></pre></div>
<p>If / else statements are extremely useful in functions. </p>
<p>In R, the <code>if</code> statement evaluates everything in the parentheses and, if that evaluates to <code>TRUE</code>, runs everything in the braces. This means that you can trigger code in an <code>if</code> statement with a single-value logical vector:</p>
<div class="sourceCode" id="cb848"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb848-1" data-line-number="1">weekend &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb848-2" data-line-number="2"><span class="cf">if</span>(weekend){</a>
<a class="sourceLine" id="cb848-3" data-line-number="3">  <span class="kw">print</span>(<span class="st">&quot;It&#39;s the weekend!&quot;</span>)</a>
<a class="sourceLine" id="cb848-4" data-line-number="4">}</a></code></pre></div>
<pre><code>## [1] &quot;It&#39;s the weekend!&quot;</code></pre>
<p>This functionality can be useful with parameters you choose to include when writing your own functions (e.g., <code>print = TRUE</code>).</p>
</div>
<div id="some-other-control-structures" class="section level3">
<h3><span class="header-section-number">8.1.2</span> Some other control structures</h3>
<p>The control structure you are most likely to use in data analysis with R is the “if / else” statement. However, there are a few other control structures you may occasionally find useful:</p>
<ul>
<li><code>next</code></li>
<li><code>break</code></li>
<li><code>while</code></li>
</ul>
<p>You can use the <code>next</code> structure to skip to the next round of a loop when a certain condition is met. For example, we could have used this code to print out odd numbers between 1 and 5:</p>
<div class="sourceCode" id="cb850"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb850-1" data-line-number="1">i &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb850-2" data-line-number="2"><span class="cf">while</span>(i <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb850-3" data-line-number="3">  i &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>i</a>
<a class="sourceLine" id="cb850-4" data-line-number="4">  <span class="cf">if</span>(i <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb850-5" data-line-number="5">    <span class="cf">next</span></a>
<a class="sourceLine" id="cb850-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb850-7" data-line-number="7">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb850-8" data-line-number="8">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] 3
## [1] 5</code></pre>
<p>You can use <code>break</code> to break out of a loop if a certain condition is met. For example, the final code will break out of the loop once <code>i</code> is over 2, so it will only print the numbers 1 through 3:</p>
<div class="sourceCode" id="cb852"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb852-1" data-line-number="1">i &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb852-2" data-line-number="2"><span class="cf">while</span>(i <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb852-3" data-line-number="3">  <span class="cf">if</span>(i <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>){</a>
<a class="sourceLine" id="cb852-4" data-line-number="4">    <span class="cf">break</span></a>
<a class="sourceLine" id="cb852-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb852-6" data-line-number="6">  i &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>i</a>
<a class="sourceLine" id="cb852-7" data-line-number="7">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb852-8" data-line-number="8">}</a></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3</code></pre>
<hr />
</div>
</div>
<div id="running-the-same-function-multiple-times" class="section level2">
<h2><span class="header-section-number">8.2</span> Running the same function multiple times</h2>
<p>We often want to perform the same function on every element of a list (i.e. loop across every element). There is a whole family of <code>map</code> functions, within the <code>purrr</code> package designed to help us do this. For example:</p>
<ul>
<li><code>map</code>: Apply a function over each element of a list or column in a dataframe.</li>
<li><code>map_df</code>: Like <code>map</code> but returns a dataframe.</li>
<li><code>map_dbl</code>: Like <code>map</code>, but returns a numeric vector.</li>
</ul>
<p>Here is the syntax for <code>map</code>:</p>
<div class="sourceCode" id="cb854"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb854-1" data-line-number="1"><span class="co">## Generic code</span></a>
<a class="sourceLine" id="cb854-2" data-line-number="2">purrr<span class="op">::</span><span class="kw">map</span>(<span class="dt">.x =</span> [list, vector, or dataframe], <span class="dt">.f =</span> [<span class="cf">function</span>], ...)</a></code></pre></div>
<p>I’ll use the <code>worldcup</code> data as an example:</p>
<div class="sourceCode" id="cb855"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb855-1" data-line-number="1">ex &lt;-<span class="st"> </span>worldcup[ , <span class="kw">c</span>(<span class="st">&quot;Shots&quot;</span>, <span class="st">&quot;Passes&quot;</span>, <span class="st">&quot;Tackles&quot;</span>, <span class="st">&quot;Saves&quot;</span>)]</a>
<a class="sourceLine" id="cb855-2" data-line-number="2"><span class="kw">head</span>(ex)</a></code></pre></div>
<pre><code>##            Shots Passes Tackles Saves
## Abdoun         0      6       0     0
## Abe            0    101      14     0
## Abidal         0     91       6     0
## Abou Diaby     1    111       5     0
## Aboubakar      2     16       0     0
## Abreu          0     15       0     0</code></pre>
<p>Take the mean of all columns:</p>
<div class="sourceCode" id="cb857"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb857-1" data-line-number="1">purrr<span class="op">::</span><span class="kw">map</span>(ex, mean)</a></code></pre></div>
<pre><code>## $Shots
## [1] 2.304202
## 
## $Passes
## [1] 84.52101
## 
## $Tackles
## [1] 4.191597
## 
## $Saves
## [1] 0.6672269</code></pre>
<p>Take the sum of all columns and return a dataframe:</p>
<div class="sourceCode" id="cb859"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb859-1" data-line-number="1">purrr<span class="op">::</span><span class="kw">map_df</span>(ex, sum)</a></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   Shots Passes Tackles Saves
##   &lt;int&gt;  &lt;int&gt;   &lt;int&gt; &lt;int&gt;
## 1  1371  50290    2494   397</code></pre>
<p>You can use your own function with any of the <code>map</code> functions. For example, if you wanted to calculate a value for each category that is a weighted mean, you could run:</p>
<div class="sourceCode" id="cb861"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb861-1" data-line-number="1">weighted_mean &lt;-<span class="st"> </span><span class="cf">function</span>(soccer_stats, <span class="dt">weight =</span> <span class="kw">runif</span>(<span class="dv">595</span>, <span class="dv">0</span>, <span class="dv">1</span>)){</a>
<a class="sourceLine" id="cb861-2" data-line-number="2">  out &lt;-<span class="st"> </span><span class="kw">mean</span>(soccer_stats <span class="op">*</span><span class="st"> </span>weight)</a>
<a class="sourceLine" id="cb861-3" data-line-number="3">  <span class="kw">return</span>(out)</a>
<a class="sourceLine" id="cb861-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb861-5" data-line-number="5"></a>
<a class="sourceLine" id="cb861-6" data-line-number="6">purrr<span class="op">::</span><span class="kw">map</span>(ex, weighted_mean)</a></code></pre></div>
<pre><code>## $Shots
## [1] 1.189342
## 
## $Passes
## [1] 42.25002
## 
## $Tackles
## [1] 2.004402
## 
## $Saves
## [1] 0.288146</code></pre>
<p>The <code>map()</code> function will apply a function across a list. The different elements of the list do not have to be the same length (unlike a data frame, where the columns all have to have the same length). First let’s create a list to work with:</p>
<div class="sourceCode" id="cb863"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb863-1" data-line-number="1">(ex &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>), <span class="dt">b =</span> <span class="kw">rnorm</span>(<span class="dv">3</span>), <span class="dt">c =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]))</a></code></pre></div>
<pre><code>## $a
## [1] 1 2 3 4 5
## 
## $b
## [1]  1.4585007 -0.8337044  0.4971937
## 
## $c
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;</code></pre>
<p>This call will calculate the mean of each element:</p>
<div class="sourceCode" id="cb865"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb865-1" data-line-number="1">purrr<span class="op">::</span><span class="kw">map</span>(<span class="dt">.x =</span> ex, <span class="dt">.f =</span> mean)</a></code></pre></div>
<pre><code>## $a
## [1] 3
## 
## $b
## [1] 0.3739967
## 
## $c
## [1] NA</code></pre>
<p>You can include arguments for the function that you specify with <code>.f</code>, and they’ll be passed to that function. For example, to get the first value of each element, you can run:</p>
<div class="sourceCode" id="cb867"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb867-1" data-line-number="1">purrr<span class="op">::</span><span class="kw">map</span>(ex, <span class="dt">.f =</span> head, <span class="dt">n =</span> <span class="dv">1</span>)</a></code></pre></div>
<pre><code>## $a
## [1] 1
## 
## $b
## [1] 1.458501
## 
## $c
## [1] &quot;a&quot;</code></pre>
<p>The <code>map_chr()</code> function also applies a function over a list, but it returns a character vector rather than a list:</p>
<div class="sourceCode" id="cb869"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb869-1" data-line-number="1">purrr<span class="op">::</span><span class="kw">map_chr</span>(ex, <span class="dt">.f =</span> head, <span class="dt">n =</span> <span class="dv">1</span>)</a></code></pre></div>
<pre><code>##          a          b          c 
##        &quot;1&quot; &quot;1.458501&quot;        &quot;a&quot;</code></pre>
<div class="rmdnote">
<p>
You can use the <code>apply</code> functions in base R to achieve some of the same functionality as the <code>map</code> functions. However, the <code>map</code> functions work better alongside other <code>tidyverse</code> functions. The <code>apply</code> functions are useful if you are working with matrices.
</p>
</div>
<div class="rmdwarning">
<p>
You can also use <code>for</code> loops in R, but it is much more elegant and efficient to use the <code>map</code> functions instead.
</p>
</div>
<hr />
<div id="but-but-what-about-nested-loops-etc" class="section level3">
<h3><span class="header-section-number">8.2.1</span> But, but what about nested loops etc?</h3>
<p>The trick with <code>purrr</code> is to nest your dataset rather than nest multiple loops. There is no need for all this complexity:</p>
<div class="sourceCode" id="cb871"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb871-1" data-line-number="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">seq_along</span>(x)){</a>
<a class="sourceLine" id="cb871-2" data-line-number="2">  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">seq_along</span>(y)){</a>
<a class="sourceLine" id="cb871-3" data-line-number="3">    <span class="cf">for</span>(k <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">seq_along</span>(z)){</a>
<a class="sourceLine" id="cb871-4" data-line-number="4">      <span class="kw">f</span>(x[i],y[j],z[k],...)</a>
<a class="sourceLine" id="cb871-5" data-line-number="5">    }</a>
<a class="sourceLine" id="cb871-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb871-7" data-line-number="7">}</a></code></pre></div>
<p>Instead we can use <code>nest()</code> to create a tidy, easy to follow sequence of steps:</p>
<div class="sourceCode" id="cb872"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb872-1" data-line-number="1">input <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb872-2" data-line-number="2"><span class="kw">group_by</span>(x, y, z) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb872-3" data-line-number="3"><span class="kw">nest</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb872-4" data-line-number="4"><span class="kw">mutate</span>(<span class="dt">result =</span> <span class="kw">map</span>(data, .f)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb872-5" data-line-number="5"><span class="kw">unnest</span>()</a></code></pre></div>
<p>Sometimes you’ll want to supply more than one argument to a function in parallel. The <code>purrr</code> package provides the <code>pmap</code> function to achieve this. You can provide a list of arguments to <code>pmap</code> and it will run through them in parallel. The “conventional” <code>for</code> loop method would look something like this:</p>
<div class="sourceCode" id="cb873"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb873-1" data-line-number="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq</span>(<span class="dv">1</span>, <span class="kw">length</span>(x), <span class="dt">by =</span> <span class="dv">1</span>)){</a>
<a class="sourceLine" id="cb873-2" data-line-number="2">  out[[i]] &lt;-<span class="st"> </span><span class="kw">f</span>(x[[i]], y[[i]], z[[i]])</a>
<a class="sourceLine" id="cb873-3" data-line-number="3">}</a></code></pre></div>
<p>With <code>purrr::pmap()</code> we can reduce the complexity of our code, limiting the potential for us to make mistakes and making mistakes easier to spot. Let’s start by defining a function with multiple arguments:</p>
<div class="sourceCode" id="cb874"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb874-1" data-line-number="1">fantasy_points &lt;-<span class="st"> </span><span class="cf">function</span>(Position, Time, Shots, Passes, Tackles, Saves){</a>
<a class="sourceLine" id="cb874-2" data-line-number="2">    </a>
<a class="sourceLine" id="cb874-3" data-line-number="3">  <span class="cf">if</span>(Position <span class="op">==</span><span class="st"> &quot;Goalkeeper&quot;</span>){</a>
<a class="sourceLine" id="cb874-4" data-line-number="4">    Points =<span class="st"> </span>Time <span class="op">*</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>Shots <span class="op">*</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span>Passes <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>Tackles <span class="op">*</span><span class="st"> </span><span class="dv">5</span> <span class="op">+</span><span class="st"> </span>Saves <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb874-5" data-line-number="5">  }<span class="cf">else</span> <span class="cf">if</span>(Position <span class="op">==</span><span class="st"> &quot;Defender&quot;</span>){</a>
<a class="sourceLine" id="cb874-6" data-line-number="6">    Points =<span class="st"> </span>Time <span class="op">*</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>Shots <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>Passes <span class="op">*</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>Tackles <span class="op">*</span><span class="st"> </span><span class="dv">5</span> <span class="op">+</span><span class="st"> </span>Saves <span class="op">*</span><span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb874-7" data-line-number="7">  }<span class="cf">else</span> <span class="cf">if</span>(Position <span class="op">==</span><span class="st"> &quot;Midfielder&quot;</span>){</a>
<a class="sourceLine" id="cb874-8" data-line-number="8">    Points =<span class="st"> </span>Time <span class="op">*</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>Shots <span class="op">*</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>Passes <span class="op">*</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>Tackles <span class="op">*</span><span class="st"> </span><span class="dv">4</span> <span class="op">+</span><span class="st"> </span>Saves <span class="op">*</span><span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb874-9" data-line-number="9">  }<span class="cf">else</span> <span class="cf">if</span>(Position <span class="op">==</span><span class="st"> &quot;Forward&quot;</span>){</a>
<a class="sourceLine" id="cb874-10" data-line-number="10">    Points =<span class="st"> </span>Time <span class="op">*</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>Shots <span class="op">*</span><span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>Passes <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>Tackles <span class="op">*</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span>Saves <span class="op">*</span><span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb874-11" data-line-number="11">  } <span class="cf">else</span>{</a>
<a class="sourceLine" id="cb874-12" data-line-number="12">    Points =<span class="st"> </span><span class="dv">-999</span></a>
<a class="sourceLine" id="cb874-13" data-line-number="13">  }</a>
<a class="sourceLine" id="cb874-14" data-line-number="14">  <span class="kw">return</span>(Points)</a>
<a class="sourceLine" id="cb874-15" data-line-number="15">}</a></code></pre></div>
<p>We can select the function arguments from the dataset:</p>
<div class="sourceCode" id="cb875"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb875-1" data-line-number="1">params &lt;-<span class="st"> </span>worldcup <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb875-2" data-line-number="2"><span class="st">          </span><span class="kw">select</span>(Position, Time, Shots, Passes, Tackles, Saves) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb875-3" data-line-number="3"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">Position =</span> <span class="kw">as.character</span>(Position))</a></code></pre></div>
<p>And then add a column to the dataset with the function output:</p>
<div class="sourceCode" id="cb876"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb876-1" data-line-number="1">params<span class="op">$</span>Points &lt;-<span class="st"> </span>params <span class="op">%&gt;%</span><span class="st"> </span>purrr<span class="op">::</span><span class="kw">pmap</span>(fantasy_points)</a></code></pre></div>
<hr />
</div>
</div>
<div id="in-course-exercise-7" class="section level2">
<h2><span class="header-section-number">8.3</span> In-course exercise</h2>
<hr />
<ul>
<li>create a new RMarkdown document for these exercises</li>
<li>make sure you have a folder with the data for the exercise</li>
</ul>
<div id="using-functions-to-load-data" class="section level3">
<h3><span class="header-section-number">8.3.1</span> Using functions to load data</h3>
<ul>
<li>write a function to load one of the running .csv files (note: you’ll need the <code>readr</code> package)</li>
<li>set the function load the all columns as class - character.</li>
</ul>
<p>Example code:</p>
<div class="sourceCode" id="cb877"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb877-1" data-line-number="1"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb877-2" data-line-number="2"></a>
<a class="sourceLine" id="cb877-3" data-line-number="3">read_run_file &lt;-<span class="st"> </span><span class="cf">function</span>(file_name){</a>
<a class="sourceLine" id="cb877-4" data-line-number="4">  <span class="kw">read_csv</span>(file_name, <span class="dt">col_types =</span> <span class="kw">cols</span>(<span class="dt">.default =</span> <span class="st">&quot;c&quot;</span>))</a>
<a class="sourceLine" id="cb877-5" data-line-number="5">}</a></code></pre></div>
<ul>
<li>create a vector of the .csv files in the running folder</li>
<li>load one of the running files using your load function</li>
</ul>
<p>Example code:</p>
<div class="sourceCode" id="cb878"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb878-1" data-line-number="1">files &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="st">&quot;data/running&quot;</span>, <span class="st">&quot;.csv$&quot;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb878-2" data-line-number="2"></a>
<a class="sourceLine" id="cb878-3" data-line-number="3">run_file &lt;-<span class="st"> </span><span class="kw">read_run_file</span>(files[<span class="dv">1</span>])</a></code></pre></div>
<ul>
<li>take a look at the file you just loaded</li>
<li>write a function to tidy the column names</li>
<li>update your file loading function to (1) clean the column names, (2) filter only rows that contain data for complete miles, (3) convert the time strings to <code>hms</code> class using <code>lubridate</code>, (4) convert the remaining character columns to numeric class, (5) add a column containing the file name.</li>
<li>reload a data file using the updated function</li>
</ul>
<p>Example code:</p>
<div class="sourceCode" id="cb879"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb879-1" data-line-number="1"><span class="kw">library</span>(lubridate)</a>
<a class="sourceLine" id="cb879-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb879-3" data-line-number="3"></a>
<a class="sourceLine" id="cb879-4" data-line-number="4">read_run_file &lt;-<span class="st"> </span><span class="cf">function</span>(file){</a>
<a class="sourceLine" id="cb879-5" data-line-number="5">  <span class="kw">read_csv</span>(file, <span class="dt">col_types =</span> <span class="kw">cols</span>(<span class="dt">.default =</span> <span class="st">&quot;c&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb879-6" data-line-number="6"><span class="st">  </span><span class="kw">rename_all</span>(clean_names) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb879-7" data-line-number="7"><span class="st">  </span><span class="kw">filter</span>(distance <span class="op">==</span><span class="st"> &quot;1&quot;</span> <span class="op">&amp;</span><span class="st"> </span>split <span class="op">!=</span><span class="st"> &quot;Summary&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb879-8" data-line-number="8"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(<span class="kw">matches</span>(<span class="st">&quot;time|pace&quot;</span>)), hms) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb879-9" data-line-number="9"><span class="st">  </span><span class="kw">mutate_if</span>(is.character, as.numeric) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb879-10" data-line-number="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">file_name =</span> <span class="kw">sub</span>(<span class="st">&quot;.csv&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="kw">basename</span>(file)))</a>
<a class="sourceLine" id="cb879-11" data-line-number="11">  </a>
<a class="sourceLine" id="cb879-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb879-13" data-line-number="13"></a>
<a class="sourceLine" id="cb879-14" data-line-number="14"><span class="kw">tail</span>(<span class="kw">read_run_file</span>(files[<span class="dv">1</span>]), <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 17
##   split time   moving_time distance elevation_gain elev_loss avg_pace
##   &lt;dbl&gt; &lt;S4: &gt; &lt;S4: Perio&gt;    &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt; &lt;S4: Pe&gt;
## 1     8 7M 35S 7M 34S             1             89        43 7M 35S  
## 2     9 7M 57S 7M 55S             1            108       118 7M 57S  
## 3    10 6M 45S 6M 41S             1              7       125 6M 45S  
## # ... with 10 more variables: avg_moving_paces &lt;S4: Period&gt;,
## #   best_pace &lt;S4: Period&gt;, avg_run_cadence &lt;dbl&gt;, max_run_cadence &lt;dbl&gt;,
## #   avg_stride_length &lt;dbl&gt;, avg_hr &lt;dbl&gt;, max_hr &lt;dbl&gt;,
## #   avg_temperature &lt;dbl&gt;, calories &lt;dbl&gt;, file_name &lt;chr&gt;</code></pre>
<ul>
<li>load all the .csv files from the running folder into a list using <code>map()</code> from the <code>purrr</code> package.</li>
<li>how many files were loaded?</li>
</ul>
<p>Example code:</p>
<div class="sourceCode" id="cb881"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb881-1" data-line-number="1"><span class="kw">library</span>(purrr)</a>
<a class="sourceLine" id="cb881-2" data-line-number="2"></a>
<a class="sourceLine" id="cb881-3" data-line-number="3">all_files &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw">map</span>(files, read_run_file)</a>
<a class="sourceLine" id="cb881-4" data-line-number="4"></a>
<a class="sourceLine" id="cb881-5" data-line-number="5"><span class="kw">class</span>(all_files)</a></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb883"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb883-1" data-line-number="1"><span class="kw">length</span>(all_files)</a></code></pre></div>
<pre><code>## [1] 143</code></pre>
</div>
<div id="predicting-running-times" class="section level3">
<h3><span class="header-section-number">8.3.2</span> Predicting running times</h3>
<p>build a model to predict how long it will take to run this <a href="http://humanpotentialrunning.com/wp-content/uploads/2018/03/Indian-Creek-Elevation-Profiles.pdf">50 mile race</a> using the running data set.</p>
<ul>
<li>first write a function to summarise each training run. Think about what some useful summary statsitics might be. Be sure to include the total distance of each run, average pace, and the file name in your summary.</li>
</ul>
<p>Example code:</p>
<div class="sourceCode" id="cb885"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb885-1" data-line-number="1">run_sum &lt;-<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb885-2" data-line-number="2">  <span class="kw">summarise</span>(x, </a>
<a class="sourceLine" id="cb885-3" data-line-number="3">            <span class="dt">distance =</span> <span class="kw">sum</span>(distance, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb885-4" data-line-number="4">            <span class="dt">gain =</span> <span class="kw">sum</span>(elevation_gain, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb885-5" data-line-number="5">            <span class="dt">gain_per_mile =</span> <span class="kw">mean</span>(elevation_gain, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb885-6" data-line-number="6">            <span class="dt">loss_per_mile =</span> <span class="kw">mean</span>(elev_loss, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb885-7" data-line-number="7">            <span class="dt">loss =</span> <span class="kw">sum</span>(elev_loss, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb885-8" data-line-number="8">            <span class="dt">pace_mins =</span> <span class="kw">mean</span>(<span class="kw">as.numeric</span>(avg_pace) <span class="op">/</span><span class="st"> </span><span class="dv">60</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb885-9" data-line-number="9">            <span class="dt">t_min =</span> <span class="kw">min</span>(avg_temperature, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb885-10" data-line-number="10">            <span class="dt">t_max =</span> <span class="kw">max</span>(avg_temperature, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb885-11" data-line-number="11">            <span class="dt">t_mean =</span> <span class="kw">mean</span>(avg_temperature, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb885-12" data-line-number="12">            <span class="dt">file_name =</span> <span class="kw">first</span>(file_name))</a>
<a class="sourceLine" id="cb885-13" data-line-number="13">}</a></code></pre></div>
<ul>
<li>Use <code>map_df()</code> to create a data frame summarizing each run.</li>
</ul>
<p>Example code:</p>
<div class="sourceCode" id="cb886"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb886-1" data-line-number="1"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb886-2" data-line-number="2"></a>
<a class="sourceLine" id="cb886-3" data-line-number="3">run_summary &lt;-<span class="st"> </span><span class="kw">map_df</span>(all_files, run_sum)</a>
<a class="sourceLine" id="cb886-4" data-line-number="4"></a>
<a class="sourceLine" id="cb886-5" data-line-number="5"><span class="kw">class</span>(run_summary)</a></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb888"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb888-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">tail</span>(run_summary, <span class="dv">5</span>), <span class="dt">digits =</span> <span class="dv">1</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">distance</th>
<th align="right">gain</th>
<th align="right">gain_per_mile</th>
<th align="right">loss_per_mile</th>
<th align="right">loss</th>
<th align="right">pace_mins</th>
<th align="right">t_min</th>
<th align="right">t_max</th>
<th align="right">t_mean</th>
<th align="left">file_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4</td>
<td align="right">58</td>
<td align="right">14.5</td>
<td align="right">15.5</td>
<td align="right">62</td>
<td align="right">9.7</td>
<td align="right">78.8</td>
<td align="right">83.6</td>
<td align="right">81.4</td>
<td align="left">activity_2847337274</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">49</td>
<td align="right">16.3</td>
<td align="right">11.0</td>
<td align="right">33</td>
<td align="right">7.4</td>
<td align="right">82.9</td>
<td align="right">86.3</td>
<td align="right">84.4</td>
<td align="left">activity_2847337284</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">1647</td>
<td align="right">235.3</td>
<td align="right">228.7</td>
<td align="right">1601</td>
<td align="right">10.9</td>
<td align="right">75.4</td>
<td align="right">85.0</td>
<td align="right">79.1</td>
<td align="left">activity_2878383053</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">571</td>
<td align="right">114.2</td>
<td align="right">111.2</td>
<td align="right">556</td>
<td align="right">9.9</td>
<td align="right">79.6</td>
<td align="right">87.7</td>
<td align="right">83.3</td>
<td align="left">activity_2878383061</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">262</td>
<td align="right">65.5</td>
<td align="right">58.2</td>
<td align="right">233</td>
<td align="right">10.0</td>
<td align="right">77.1</td>
<td align="right">87.3</td>
<td align="right">80.3</td>
<td align="left">activity_2878383067</td>
</tr>
</tbody>
</table>
<ul>
<li>join the <code>run_summary</code> data frame with the elevation data file</li>
<li>create a new variable for the total time each run takes</li>
<li>remove the <code>file_name</code> column</li>
</ul>
<p>Example code:</p>
<div class="sourceCode" id="cb889"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb889-1" data-line-number="1"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb889-2" data-line-number="2"></a>
<a class="sourceLine" id="cb889-3" data-line-number="3">run_data &lt;-<span class="st"> </span>run_summary <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb889-4" data-line-number="4"><span class="st">            </span><span class="kw">left_join</span>(<span class="kw">read_csv</span>(<span class="st">&quot;data/elevation.csv&quot;</span>, <span class="dt">col_types =</span> <span class="kw">cols</span>()), <span class="dt">by =</span> <span class="st">&quot;file_name&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb889-5" data-line-number="5"><span class="st">            </span><span class="kw">mutate</span>(<span class="dt">duration =</span> pace_mins <span class="op">*</span><span class="st"> </span>distance) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb889-6" data-line-number="6"><span class="st">            </span><span class="kw">select</span>(<span class="op">-</span>file_name)</a></code></pre></div>
<ul>
<li>use the (<a href="http://mfp.imbi.uni-freiburg.de" class="uri">http://mfp.imbi.uni-freiburg.de</a>)[mfp] library to identify the best model to predict duration</li>
<li>the first argument the <code>mfp</code> function requires in a <code>formula</code> object. The formula should contain all the candidate variables.</li>
<li>take a look at the website link above to get an idea what the <code>mfp</code> function does.</li>
</ul>
<p>Example formula :</p>
<div class="sourceCode" id="cb890"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb890-1" data-line-number="1">eqn &lt;-<span class="st"> </span><span class="kw">formula</span>(duration <span class="op">~</span><span class="st"> </span><span class="kw">fp</span>(distance) <span class="op">+</span><span class="st"> </span><span class="kw">fp</span>(gain) <span class="op">+</span><span class="st"> </span><span class="kw">fp</span>(loss) <span class="op">+</span></a>
<a class="sourceLine" id="cb890-2" data-line-number="2"><span class="st">                           </span><span class="kw">fp</span>(t_min)<span class="op">+</span><span class="st"> </span><span class="kw">fp</span>(t_max) <span class="op">+</span><span class="st"> </span><span class="kw">fp</span>(t_mean) <span class="op">+</span></a>
<a class="sourceLine" id="cb890-3" data-line-number="3"><span class="st">                           </span><span class="kw">fp</span>(e_min) <span class="op">+</span><span class="st"> </span><span class="kw">fp</span>(e_max) <span class="op">+</span><span class="st"> </span><span class="kw">fp</span>(e_mean))</a></code></pre></div>
<ul>
<li>use the <code>summary</code> function to display the output from <code>mfp</code></li>
<li>use the <code>$</code> operator to extract the model formula from the <code>mfp</code> object.</li>
<li>use the model formula to fit a linear model to the running data</li>
<li>print a summary of the linear model</li>
</ul>
<p>Example <code>mfp</code> code:</p>
<div class="sourceCode" id="cb891"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb891-1" data-line-number="1"><span class="kw">library</span>(mfp)</a></code></pre></div>
<pre><code>## Loading required package: survival</code></pre>
<pre><code>## 
## Attaching package: &#39;survival&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:faraway&#39;:
## 
##     rats, solder</code></pre>
<div class="sourceCode" id="cb895"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb895-1" data-line-number="1">mfp_run &lt;-<span class="st"> </span><span class="kw">mfp</span>(eqn,</a>
<a class="sourceLine" id="cb895-2" data-line-number="2">               <span class="dt">data =</span> run_data,</a>
<a class="sourceLine" id="cb895-3" data-line-number="3">               <span class="dt">select =</span> <span class="fl">0.05</span>)</a>
<a class="sourceLine" id="cb895-4" data-line-number="4"></a>
<a class="sourceLine" id="cb895-5" data-line-number="5"><span class="kw">summary</span>(mfp_run)</a></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = duration ~ I((distance/10)^1) + I((gain/1000)^3) + 
##     I((loss/1000)^1) + I((t_min/100)^1), data = run_data)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -38.798   -4.294   -0.524    4.393   47.821  
## 
## Coefficients:
##                     Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)        -19.74437    6.32488  -3.122  0.00219 ** 
## I((distance/10)^1)  86.67188    2.07291  41.812  &lt; 2e-16 ***
## I((gain/1000)^3)     0.43145    0.05671   7.608 3.91e-12 ***
## I((loss/1000)^1)     9.32034    1.59921   5.828 3.78e-08 ***
## I((t_min/100)^1)    26.74840    8.59882   3.111  0.00227 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for gaussian family taken to be 98.43495)
## 
##     Null deviance: 798111  on 142  degrees of freedom
## Residual deviance:  13584  on 138  degrees of freedom
## AIC: 1069
## 
## Number of Fisher Scoring iterations: 2</code></pre>
<div class="sourceCode" id="cb897"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb897-1" data-line-number="1">run_mod &lt;-<span class="st"> </span><span class="kw">lm</span>(mfp_run<span class="op">$</span>formula, run_data)</a>
<a class="sourceLine" id="cb897-2" data-line-number="2"></a>
<a class="sourceLine" id="cb897-3" data-line-number="3"><span class="kw">summary</span>(run_mod)</a></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mfp_run$formula, data = run_data)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -38.798  -4.294  -0.524   4.393  47.821 
## 
## Coefficients:
##                     Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)        -19.74437    6.32488  -3.122  0.00219 ** 
## I((distance/10)^1)  86.67188    2.07291  41.812  &lt; 2e-16 ***
## I((gain/1000)^3)     0.43145    0.05671   7.608 3.91e-12 ***
## I((loss/1000)^1)     9.32034    1.59921   5.828 3.78e-08 ***
## I((t_min/100)^1)    26.74840    8.59882   3.111  0.00227 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 9.921 on 138 degrees of freedom
## Multiple R-squared:  0.983,  Adjusted R-squared:  0.9825 
## F-statistic:  1993 on 4 and 138 DF,  p-value: &lt; 2.2e-16</code></pre>
<ul>
<li>you can use the <code>autoplot</code> function to check the model diagnostics</li>
</ul>
<div class="sourceCode" id="cb899"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb899-1" data-line-number="1"><span class="kw">library</span>(ggfortify)</a>
<a class="sourceLine" id="cb899-2" data-line-number="2"></a>
<a class="sourceLine" id="cb899-3" data-line-number="3"><span class="kw">autoplot</span>(run_mod)</a></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-492-1.png" width="672" /></p>
<ul>
<li>use the model to predict the finishing times for my previous two <a href="https://ultrasignup.com/results_participant.aspx?fname=Nicholas&amp;lname=Good&amp;age=35">races</a></li>
<li>finally use the model to predict <a href="http://humanpotentialrunning.com/wp-content/uploads/2018/03/Indian-Creek-Elevation-Profiles.pdf">next weekend’s race</a> time</li>
<li>the race has an intermediate cut-off time at mile 34, will I make it?</li>
</ul>
<p>Example code:</p>
<div class="sourceCode" id="cb900"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb900-1" data-line-number="1">pre &lt;-<span class="st"> </span><span class="kw">predict.lm</span>(run_mod, <span class="kw">data_frame</span>(<span class="dt">distance =</span> <span class="fl">17.1</span>, <span class="dt">gain =</span> <span class="dv">5420</span>, <span class="dt">loss =</span> <span class="dv">4417</span>, <span class="dt">t_min =</span> <span class="dv">50</span>))</a></code></pre></div>
<p>The predicted imogene pass run time was: 42.</p>
<div class="sourceCode" id="cb901"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb901-1" data-line-number="1">pre &lt;-<span class="st"> </span><span class="kw">predict.lm</span>(run_mod, <span class="kw">data_frame</span>(<span class="dt">distance =</span> <span class="fl">10.2</span>, <span class="dt">gain =</span> <span class="dv">2000</span>, <span class="dt">loss =</span> <span class="dv">2000</span>, <span class="dt">t_min =</span> <span class="dv">55</span>))</a></code></pre></div>
<p>The predicted imogene pass run time was: 28.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploring-data-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reporting-results-2a.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/geanders/RProgrammingForResearch/edit/master/08-reportingresults2.Rmd",
"text": "Edit"
},
"download": ["RProgrammingForResearch.pdf", "RProgrammingForResearch.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
