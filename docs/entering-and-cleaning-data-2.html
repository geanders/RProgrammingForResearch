<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Entering and cleaning data #2 | R Programming for Research</title>
  <meta name="description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Entering and cleaning data #2 | R Programming for Research" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Entering and cleaning data #2 | R Programming for Research" />
  
  <meta name="twitter:description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016." />
  

<meta name="author" content="Brooke Anderson, Rachel Severson, and Nicholas Good" />


<meta name="date" content="2023-10-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="reproducible-research-1.html"/>
<link rel="next" href="exploring-data-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="libs/bokehjs-0.12.5/bokeh.min.css" rel="stylesheet" />
<link href="libs/bokehjs-0.12.5/loader.css" rel="stylesheet" />
<script src="libs/bokehjs-0.12.5/bokeh.min.js"></script>
<script src="libs/rbokeh-binding-0.5.2/rbokeh.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.28/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36719749-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36719749-2');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Programming for Research</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Online course book, ERHS 535</a></li>
<li class="chapter" data-level="" data-path="course-information.html"><a href="course-information.html"><i class="fa fa-check"></i>Course information</a>
<ul>
<li class="chapter" data-level="0.1" data-path="course-information.html"><a href="course-information.html#course-overview"><i class="fa fa-check"></i><b>0.1</b> Course overview</a></li>
<li class="chapter" data-level="0.2" data-path="course-information.html"><a href="course-information.html#course-syllabus"><i class="fa fa-check"></i><b>0.2</b> Course syllabus</a></li>
<li class="chapter" data-level="0.3" data-path="course-information.html"><a href="course-information.html#time-and-place"><i class="fa fa-check"></i><b>0.3</b> Time and place</a></li>
<li class="chapter" data-level="0.4" data-path="course-information.html"><a href="course-information.html#detailed-schedule"><i class="fa fa-check"></i><b>0.4</b> Detailed schedule</a></li>
<li class="chapter" data-level="0.5" data-path="course-information.html"><a href="course-information.html#final-group-project"><i class="fa fa-check"></i><b>0.5</b> Final group project</a></li>
<li class="chapter" data-level="0.6" data-path="course-information.html"><a href="course-information.html#course-set-up"><i class="fa fa-check"></i><b>0.6</b> Course set-up</a></li>
<li class="chapter" data-level="0.7" data-path="course-information.html"><a href="course-information.html#coursebook"><i class="fa fa-check"></i><b>0.7</b> Coursebook</a>
<ul>
<li class="chapter" data-level="0.7.1" data-path="course-information.html"><a href="course-information.html#other-helpful-books-not-required"><i class="fa fa-check"></i><b>0.7.1</b> Other helpful books (not required)</a></li>
</ul></li>
<li class="chapter" data-level="0.8" data-path="course-information.html"><a href="course-information.html#in-course-exercise-chapter-0"><i class="fa fa-check"></i><b>0.8</b> In-course Exercise Chapter 0</a>
<ul>
<li class="chapter" data-level="0.8.1" data-path="course-information.html"><a href="course-information.html#navigate-the-online-course-book"><i class="fa fa-check"></i><b>0.8.1</b> Navigate the online course book</a></li>
<li class="chapter" data-level="0.8.2" data-path="course-information.html"><a href="course-information.html#find-the-video-lectures"><i class="fa fa-check"></i><b>0.8.2</b> Find the video lectures</a></li>
<li class="chapter" data-level="0.8.3" data-path="course-information.html"><a href="course-information.html#try-coding-a-bit"><i class="fa fa-check"></i><b>0.8.3</b> Try coding a bit</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Part I: Preliminaries</b></span></li>
<li class="chapter" data-level="1" data-path="r-preliminaries.html"><a href="r-preliminaries.html"><i class="fa fa-check"></i><b>1</b> R Preliminaries</a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#objectives"><i class="fa fa-check"></i><b>1.1</b> Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-and-r-studio"><i class="fa fa-check"></i><b>1.2</b> R and R Studio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#what-is-r"><i class="fa fa-check"></i><b>1.2.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#free-and-open-source-software"><i class="fa fa-check"></i><b>1.2.2</b> Free and open-source software</a></li>
<li class="chapter" data-level="1.2.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#what-is-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> What is RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#communicating-with-r"><i class="fa fa-check"></i><b>1.3</b> Communicating with R</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-sessions-the-console-and-the-command-prompt"><i class="fa fa-check"></i><b>1.3.1</b> R sessions, the console, and the command prompt</a></li>
<li class="chapter" data-level="1.3.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-expressions-function-calls-and-objects"><i class="fa fa-check"></i><b>1.3.2</b> R expressions, function calls, and objects</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="r-preliminaries.html"><a href="r-preliminaries.html#functions"><i class="fa fa-check"></i><b>1.4</b> Functions</a></li>
<li class="chapter" data-level="1.5" data-path="r-preliminaries.html"><a href="r-preliminaries.html#objects-and-assignment"><i class="fa fa-check"></i><b>1.5</b> Objects and assignment</a></li>
<li class="chapter" data-level="1.6" data-path="r-preliminaries.html"><a href="r-preliminaries.html#more-on-communicating-with-r"><i class="fa fa-check"></i><b>1.6</b> More on communicating with R</a></li>
<li class="chapter" data-level="1.7" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-scripts"><i class="fa fa-check"></i><b>1.7</b> R scripts</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#commenting-code"><i class="fa fa-check"></i><b>1.7.1</b> Commenting code</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="r-preliminaries.html"><a href="r-preliminaries.html#the-package-system"><i class="fa fa-check"></i><b>1.8</b> The “package” system</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-packages"><i class="fa fa-check"></i><b>1.8.1</b> R packages</a></li>
<li class="chapter" data-level="1.8.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#installing-from-cran"><i class="fa fa-check"></i><b>1.8.2</b> Installing from CRAN</a></li>
<li class="chapter" data-level="1.8.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#loading-an-installed-package"><i class="fa fa-check"></i><b>1.8.3</b> Loading an installed package</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="r-preliminaries.html"><a href="r-preliminaries.html#rs-most-basic-object-types"><i class="fa fa-check"></i><b>1.9</b> R’s most basic object types</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#vectors"><i class="fa fa-check"></i><b>1.9.1</b> Vectors</a></li>
<li class="chapter" data-level="1.9.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#dataframes"><i class="fa fa-check"></i><b>1.9.2</b> Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="r-preliminaries.html"><a href="r-preliminaries.html#in-course-exercise-chapter-1"><i class="fa fa-check"></i><b>1.10</b> In-course Exercise Chapter 1</a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#trying-out-the-code-in-slides-for-first-lecture-videos"><i class="fa fa-check"></i><b>1.10.1</b> Trying out the code in slides for first lecture videos</a></li>
<li class="chapter" data-level="1.10.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#writing-your-code-as-an-r-script"><i class="fa fa-check"></i><b>1.10.2</b> Writing your code as an R script</a></li>
<li class="chapter" data-level="1.10.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#about-the-dataset"><i class="fa fa-check"></i><b>1.10.3</b> About the dataset</a></li>
<li class="chapter" data-level="1.10.4" data-path="r-preliminaries.html"><a href="r-preliminaries.html#manually-creating-vectors"><i class="fa fa-check"></i><b>1.10.4</b> Manually creating vectors</a></li>
<li class="chapter" data-level="1.10.5" data-path="r-preliminaries.html"><a href="r-preliminaries.html#installing-and-using-a-package"><i class="fa fa-check"></i><b>1.10.5</b> Installing and using a package</a></li>
<li class="chapter" data-level="1.10.6" data-path="r-preliminaries.html"><a href="r-preliminaries.html#manually-creating-a-dataframe"><i class="fa fa-check"></i><b>1.10.6</b> Manually creating a dataframe</a></li>
<li class="chapter" data-level="1.10.7" data-path="r-preliminaries.html"><a href="r-preliminaries.html#getting-the-data-onto-your-computer"><i class="fa fa-check"></i><b>1.10.7</b> Getting the data onto your computer</a></li>
<li class="chapter" data-level="1.10.8" data-path="r-preliminaries.html"><a href="r-preliminaries.html#getting-the-data-into-r"><i class="fa fa-check"></i><b>1.10.8</b> Getting the data into R</a></li>
<li class="chapter" data-level="1.10.9" data-path="r-preliminaries.html"><a href="r-preliminaries.html#checking-out-the-data"><i class="fa fa-check"></i><b>1.10.9</b> Checking out the data</a></li>
<li class="chapter" data-level="1.10.10" data-path="r-preliminaries.html"><a href="r-preliminaries.html#using-the-data-to-answer-questions"><i class="fa fa-check"></i><b>1.10.10</b> Using the data to answer questions</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Part II: Basics</b></span></li>
<li class="chapter" data-level="2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html"><i class="fa fa-check"></i><b>2</b> Entering and cleaning data #1</a>
<ul>
<li class="chapter" data-level="2.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#objectives-1"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#overview"><i class="fa fa-check"></i><b>2.2</b> Overview</a></li>
<li class="chapter" data-level="2.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.3</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-local-flat-files"><i class="fa fa-check"></i><b>2.3.1</b> Reading local flat files</a></li>
<li class="chapter" data-level="2.3.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-in-other-file-types"><i class="fa fa-check"></i><b>2.3.2</b> Reading in other file types</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directories-and-pathnames"><i class="fa fa-check"></i><b>2.4</b> Directories and pathnames</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directory-structure"><i class="fa fa-check"></i><b>2.4.1</b> Directory structure</a></li>
<li class="chapter" data-level="2.4.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#working-directory"><i class="fa fa-check"></i><b>2.4.2</b> Working directory</a></li>
<li class="chapter" data-level="2.4.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#file-and-directory-pathnames"><i class="fa fa-check"></i><b>2.4.3</b> File and directory pathnames</a></li>
<li class="chapter" data-level="2.4.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#diversion-paste"><i class="fa fa-check"></i><b>2.4.4</b> Diversion: <code>paste</code></a></li>
<li class="chapter" data-level="2.4.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-online-flat-files"><i class="fa fa-check"></i><b>2.4.5</b> Reading online flat files</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#data-cleaning"><i class="fa fa-check"></i><b>2.5</b> Data cleaning</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#renaming-columns"><i class="fa fa-check"></i><b>2.5.1</b> Renaming columns</a></li>
<li class="chapter" data-level="2.5.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#selecting-columns"><i class="fa fa-check"></i><b>2.5.2</b> Selecting columns</a></li>
<li class="chapter" data-level="2.5.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#extracting-and-arranging-rows"><i class="fa fa-check"></i><b>2.5.3</b> Extracting and arranging rows</a></li>
<li class="chapter" data-level="2.5.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#slicing-and-sampling"><i class="fa fa-check"></i><b>2.5.4</b> Slicing and sampling</a></li>
<li class="chapter" data-level="2.5.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#arranging-rows"><i class="fa fa-check"></i><b>2.5.5</b> Arranging rows</a></li>
<li class="chapter" data-level="2.5.6" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#filtering-to-certain-rows"><i class="fa fa-check"></i><b>2.5.6</b> Filtering to certain rows</a></li>
<li class="chapter" data-level="2.5.7" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#add-or-change-columns"><i class="fa fa-check"></i><b>2.5.7</b> Add or change columns</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#piping"><i class="fa fa-check"></i><b>2.6</b> Piping</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#base-r-equivalents-to-dplyr-functions"><i class="fa fa-check"></i><b>2.6.1</b> Base R equivalents to <code>dplyr</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#in-course-exercise-chapter-2"><i class="fa fa-check"></i><b>2.7</b> In-course Exercise Chapter 2</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#downloading-and-checking-out-the-example-data"><i class="fa fa-check"></i><b>2.7.1</b> Downloading and checking out the example data</a></li>
<li class="chapter" data-level="2.7.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-in-different-types-of-files"><i class="fa fa-check"></i><b>2.7.2</b> Reading in different types of files</a></li>
<li class="chapter" data-level="2.7.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directory-structure-1"><i class="fa fa-check"></i><b>2.7.3</b> Directory structure</a></li>
<li class="chapter" data-level="2.7.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#cleaning-up-data-1"><i class="fa fa-check"></i><b>2.7.4</b> Cleaning up data #1</a></li>
<li class="chapter" data-level="2.7.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#cleaning-up-data-2"><i class="fa fa-check"></i><b>2.7.5</b> Cleaning up data #2</a></li>
<li class="chapter" data-level="2.7.6" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#piping-1"><i class="fa fa-check"></i><b>2.7.6</b> Piping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploring-data-1.html"><a href="exploring-data-1.html"><i class="fa fa-check"></i><b>3</b> Exploring data #1</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#objectives-2"><i class="fa fa-check"></i><b>3.1</b> Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#simple-statistics-functions"><i class="fa fa-check"></i><b>3.2</b> Simple statistics functions</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#summary-statistics"><i class="fa fa-check"></i><b>3.2.1</b> Summary statistics</a></li>
<li class="chapter" data-level="3.2.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#summarize-function"><i class="fa fa-check"></i><b>3.2.2</b> <code>summarize</code> function</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#factor-vectors"><i class="fa fa-check"></i><b>3.3</b> Factor vectors</a></li>
<li class="chapter" data-level="3.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#data-from-a-package"><i class="fa fa-check"></i><b>3.4</b> Data from a package</a></li>
<li class="chapter" data-level="3.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#dates-in-r"><i class="fa fa-check"></i><b>3.5</b> Dates in R</a></li>
<li class="chapter" data-level="3.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#logical-vectors"><i class="fa fa-check"></i><b>3.6</b> Logical vectors</a></li>
<li class="chapter" data-level="3.7" data-path="exploring-data-1.html"><a href="exploring-data-1.html#plots-to-explore-data"><i class="fa fa-check"></i><b>3.7</b> Plots to explore data</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#initializing-a-ggplot-object"><i class="fa fa-check"></i><b>3.7.1</b> Initializing a ggplot object</a></li>
<li class="chapter" data-level="3.7.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#plot-aesthetics"><i class="fa fa-check"></i><b>3.7.2</b> Plot aesthetics</a></li>
<li class="chapter" data-level="3.7.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#adding-geoms"><i class="fa fa-check"></i><b>3.7.3</b> Adding geoms</a></li>
<li class="chapter" data-level="3.7.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#constant-aesthetics"><i class="fa fa-check"></i><b>3.7.4</b> Constant aesthetics</a></li>
<li class="chapter" data-level="3.7.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#useful-plot-additions"><i class="fa fa-check"></i><b>3.7.5</b> Useful plot additions</a></li>
<li class="chapter" data-level="3.7.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#example-dataset"><i class="fa fa-check"></i><b>3.7.6</b> Example dataset</a></li>
<li class="chapter" data-level="3.7.7" data-path="exploring-data-1.html"><a href="exploring-data-1.html#histograms"><i class="fa fa-check"></i><b>3.7.7</b> Histograms</a></li>
<li class="chapter" data-level="3.7.8" data-path="exploring-data-1.html"><a href="exploring-data-1.html#scatterplots"><i class="fa fa-check"></i><b>3.7.8</b> Scatterplots</a></li>
<li class="chapter" data-level="3.7.9" data-path="exploring-data-1.html"><a href="exploring-data-1.html#boxplots"><i class="fa fa-check"></i><b>3.7.9</b> Boxplots</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="exploring-data-1.html"><a href="exploring-data-1.html#in-course-exercise-chapter-3"><i class="fa fa-check"></i><b>3.8</b> In-course Exercise Chapter 3</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#loading-data-from-an-r-package"><i class="fa fa-check"></i><b>3.8.1</b> Loading data from an R package</a></li>
<li class="chapter" data-level="3.8.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-simple-statistics-and-summarize"><i class="fa fa-check"></i><b>3.8.2</b> Exploring the data using simple statistics and <code>summarize</code></a></li>
<li class="chapter" data-level="3.8.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-logical-statements"><i class="fa fa-check"></i><b>3.8.3</b> Exploring the data using logical statements</a></li>
<li class="chapter" data-level="3.8.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-1"><i class="fa fa-check"></i><b>3.8.4</b> Exploring the data using basic plots #1</a></li>
<li class="chapter" data-level="3.8.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-2"><i class="fa fa-check"></i><b>3.8.5</b> Exploring the data using basic plots #2</a></li>
<li class="chapter" data-level="3.8.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-3"><i class="fa fa-check"></i><b>3.8.6</b> Exploring the data using basic plots #3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html"><i class="fa fa-check"></i><b>4</b> Reporting data results #1</a>
<ul>
<li class="chapter" data-level="4.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#guidelines-for-good-plots"><i class="fa fa-check"></i><b>4.1</b> Guidelines for good plots</a></li>
<li class="chapter" data-level="4.2" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#high-data-density"><i class="fa fa-check"></i><b>4.2</b> High data density</a></li>
<li class="chapter" data-level="4.3" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#meaningful-labels"><i class="fa fa-check"></i><b>4.3</b> Meaningful labels</a></li>
<li class="chapter" data-level="4.4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#references"><i class="fa fa-check"></i><b>4.4</b> References</a></li>
<li class="chapter" data-level="4.5" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#highlighting"><i class="fa fa-check"></i><b>4.5</b> Highlighting</a></li>
<li class="chapter" data-level="4.6" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#order"><i class="fa fa-check"></i><b>4.6</b> Order</a></li>
<li class="chapter" data-level="4.7" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#small-multiples"><i class="fa fa-check"></i><b>4.7</b> Small multiples</a></li>
<li class="chapter" data-level="4.8" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#advanced-customization"><i class="fa fa-check"></i><b>4.8</b> Advanced customization</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#scales"><i class="fa fa-check"></i><b>4.8.1</b> Scales</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#to-find-out-more"><i class="fa fa-check"></i><b>4.9</b> To find out more</a></li>
<li class="chapter" data-level="4.10" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#in-course-exercisechapter-4"><i class="fa fa-check"></i><b>4.10</b> In-course exercise–Chapter 4</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#designing-a-plot"><i class="fa fa-check"></i><b>4.10.1</b> Designing a plot</a></li>
<li class="chapter" data-level="4.10.2" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#implementing-plot-guidelines-1"><i class="fa fa-check"></i><b>4.10.2</b> Implementing plot guidelines #1</a></li>
<li class="chapter" data-level="4.10.3" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#implementing-plot-guidelines-2"><i class="fa fa-check"></i><b>4.10.3</b> Implementing plot guidelines #2</a></li>
<li class="chapter" data-level="4.10.4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#data-visualization-cheatsheet"><i class="fa fa-check"></i><b>4.10.4</b> Data visualization cheatsheet</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html"><i class="fa fa-check"></i><b>5</b> Reproducible research #1</a>
<ul>
<li class="chapter" data-level="5.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#what-is-reproducible-research"><i class="fa fa-check"></i><b>5.1</b> What is reproducible research?</a></li>
<li class="chapter" data-level="5.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#markdown"><i class="fa fa-check"></i><b>5.2</b> Markdown</a></li>
<li class="chapter" data-level="5.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#literate-programming-in-r"><i class="fa fa-check"></i><b>5.3</b> Literate programming in R</a></li>
<li class="chapter" data-level="5.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#style-guidelines"><i class="fa fa-check"></i><b>5.4</b> Style guidelines</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#line-length"><i class="fa fa-check"></i><b>5.4.1</b> Line length</a></li>
<li class="chapter" data-level="5.4.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#spacing"><i class="fa fa-check"></i><b>5.4.2</b> Spacing</a></li>
<li class="chapter" data-level="5.4.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#semicolons"><i class="fa fa-check"></i><b>5.4.3</b> Semicolons</a></li>
<li class="chapter" data-level="5.4.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#commenting"><i class="fa fa-check"></i><b>5.4.4</b> Commenting</a></li>
<li class="chapter" data-level="5.4.5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#indentation"><i class="fa fa-check"></i><b>5.4.5</b> Indentation</a></li>
<li class="chapter" data-level="5.4.6" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#code-grouping"><i class="fa fa-check"></i><b>5.4.6</b> Code grouping</a></li>
<li class="chapter" data-level="5.4.7" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#broader-guidelines"><i class="fa fa-check"></i><b>5.4.7</b> Broader guidelines</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#more-with-knitr"><i class="fa fa-check"></i><b>5.5</b> More with knitr</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#equations-in-knitr"><i class="fa fa-check"></i><b>5.5.1</b> Equations in <code>knitr</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#figures-from-file"><i class="fa fa-check"></i><b>5.5.2</b> Figures from file</a></li>
<li class="chapter" data-level="5.5.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#saving-graphics-files"><i class="fa fa-check"></i><b>5.5.3</b> Saving graphics files</a></li>
<li class="chapter" data-level="5.5.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#tables-in-r-markdown"><i class="fa fa-check"></i><b>5.5.4</b> Tables in R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#in-course-exercise-chapter-5"><i class="fa fa-check"></i><b>5.6</b> In-course exercise Chapter 5</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#creating-a-markdown-document"><i class="fa fa-check"></i><b>5.6.1</b> Creating a Markdown document</a></li>
<li class="chapter" data-level="5.6.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#adding-in-r-code"><i class="fa fa-check"></i><b>5.6.2</b> Adding in R code</a></li>
<li class="chapter" data-level="5.6.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#working-with-r-markdown-documents"><i class="fa fa-check"></i><b>5.6.3</b> Working with R Markdown documents</a></li>
<li class="chapter" data-level="5.6.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#r-style-guidelines"><i class="fa fa-check"></i><b>5.6.4</b> R style guidelines</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Part III: Intermediate</b></span></li>
<li class="chapter" data-level="6" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html"><i class="fa fa-check"></i><b>6</b> Entering and cleaning data #2</a>
<ul>
<li class="chapter" data-level="6.1" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#tidy-data"><i class="fa fa-check"></i><b>6.1</b> Tidy data</a></li>
<li class="chapter" data-level="6.2" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#joining-datasets"><i class="fa fa-check"></i><b>6.2</b> Joining datasets</a></li>
<li class="chapter" data-level="6.3" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#longer-data"><i class="fa fa-check"></i><b>6.3</b> Longer data</a></li>
<li class="chapter" data-level="6.4" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#working-with-factors"><i class="fa fa-check"></i><b>6.4</b> Working with factors</a></li>
<li class="chapter" data-level="6.5" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#string-operations-and-regular-expressions"><i class="fa fa-check"></i><b>6.5</b> String operations and regular expressions</a></li>
<li class="chapter" data-level="6.6" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#tidy-select"><i class="fa fa-check"></i><b>6.6</b> Tidy select</a></li>
<li class="chapter" data-level="6.7" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#in-course-exercise-chapter-6"><i class="fa fa-check"></i><b>6.7</b> In-course exercise Chapter 6</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#designing-tidy-data"><i class="fa fa-check"></i><b>6.7.1</b> Designing tidy data</a></li>
<li class="chapter" data-level="6.7.2" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#easier-data-wrangling"><i class="fa fa-check"></i><b>6.7.2</b> Easier data wrangling</a></li>
<li class="chapter" data-level="6.7.3" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#more-extensive-data-wrangling"><i class="fa fa-check"></i><b>6.7.3</b> More extensive data wrangling</a></li>
<li class="chapter" data-level="6.7.4" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#tidying-vadeaths-data"><i class="fa fa-check"></i><b>6.7.4</b> Tidying <code>VADeaths</code> data</a></li>
<li class="chapter" data-level="6.7.5" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#baby-names"><i class="fa fa-check"></i><b>6.7.5</b> Baby names</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="exploring-data-2.html"><a href="exploring-data-2.html"><i class="fa fa-check"></i><b>7</b> Exploring data #2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#simple-statistical-tests-in-r"><i class="fa fa-check"></i><b>7.1</b> Simple statistical tests in R</a></li>
<li class="chapter" data-level="7.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#matrices"><i class="fa fa-check"></i><b>7.2</b> Matrices</a></li>
<li class="chapter" data-level="7.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#lists"><i class="fa fa-check"></i><b>7.3</b> Lists</a></li>
<li class="chapter" data-level="7.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#apply-a-test-multiple-times"><i class="fa fa-check"></i><b>7.4</b> Apply a test multiple times</a></li>
<li class="chapter" data-level="7.5" data-path="exploring-data-2.html"><a href="exploring-data-2.html#regression-models"><i class="fa fa-check"></i><b>7.5</b> Regression models</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#formula-structure"><i class="fa fa-check"></i><b>7.5.1</b> Formula structure</a></li>
<li class="chapter" data-level="7.5.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#linear-models"><i class="fa fa-check"></i><b>7.5.2</b> Linear models</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="exploring-data-2.html"><a href="exploring-data-2.html#handling-model-objects"><i class="fa fa-check"></i><b>7.6</b> Handling model objects</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomtidy"><i class="fa fa-check"></i><b>7.6.1</b> broom::tidy</a></li>
<li class="chapter" data-level="7.6.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomaugment"><i class="fa fa-check"></i><b>7.6.2</b> broom::augment</a></li>
<li class="chapter" data-level="7.6.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomglance"><i class="fa fa-check"></i><b>7.6.3</b> broom::glance</a></li>
<li class="chapter" data-level="7.6.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#references-statistics-in-r"><i class="fa fa-check"></i><b>7.6.4</b> References– statistics in R</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="exploring-data-2.html"><a href="exploring-data-2.html#functions-1"><i class="fa fa-check"></i><b>7.7</b> Functions</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#if-else-statements"><i class="fa fa-check"></i><b>7.7.1</b> if / else statements</a></li>
<li class="chapter" data-level="7.7.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#some-other-control-structures"><i class="fa fa-check"></i><b>7.7.2</b> Some other control structures</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="exploring-data-2.html"><a href="exploring-data-2.html#in-course-exercise-for-chapter-7"><i class="fa fa-check"></i><b>7.8</b> In-course exercise for Chapter 7</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#exploring-taxonomic-profiling-data"><i class="fa fa-check"></i><b>7.8.1</b> Exploring taxonomic profiling data</a></li>
<li class="chapter" data-level="7.8.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#more-with-baby-names"><i class="fa fa-check"></i><b>7.8.2</b> More with baby names</a></li>
<li class="chapter" data-level="7.8.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#running-a-simple-statistical-test"><i class="fa fa-check"></i><b>7.8.3</b> Running a simple statistical test</a></li>
<li class="chapter" data-level="7.8.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#using-regression-models-to-explore-data-1"><i class="fa fa-check"></i><b>7.8.4</b> Using regression models to explore data #1</a></li>
<li class="chapter" data-level="7.8.5" data-path="exploring-data-2.html"><a href="exploring-data-2.html#using-regression-models-to-explore-data-2"><i class="fa fa-check"></i><b>7.8.5</b> Using regression models to explore data #2</a></li>
<li class="chapter" data-level="7.8.6" data-path="exploring-data-2.html"><a href="exploring-data-2.html#trying-out-nesting-and-mapping"><i class="fa fa-check"></i><b>7.8.6</b> Trying out nesting and mapping</a></li>
<li class="chapter" data-level="7.8.7" data-path="exploring-data-2.html"><a href="exploring-data-2.html#writing-functions"><i class="fa fa-check"></i><b>7.8.7</b> Writing functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reporting-results-2.html"><a href="reporting-results-2.html"><i class="fa fa-check"></i><b>8</b> Reporting results #2</a>
<ul>
<li class="chapter" data-level="8.1" data-path="reporting-results-2.html"><a href="reporting-results-2.html#course-lectures"><i class="fa fa-check"></i><b>8.1</b> Course lectures</a></li>
<li class="chapter" data-level="8.2" data-path="reporting-results-2.html"><a href="reporting-results-2.html#example-data"><i class="fa fa-check"></i><b>8.2</b> Example data</a></li>
<li class="chapter" data-level="8.3" data-path="reporting-results-2.html"><a href="reporting-results-2.html#ggplot2-extras-and-extensions"><i class="fa fa-check"></i><b>8.3</b> <code>ggplot2</code> extras and extensions</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="reporting-results-2.html"><a href="reporting-results-2.html#scales-package"><i class="fa fa-check"></i><b>8.3.1</b> <code>scales</code> package</a></li>
<li class="chapter" data-level="8.3.2" data-path="reporting-results-2.html"><a href="reporting-results-2.html#ggplot2-extensions"><i class="fa fa-check"></i><b>8.3.2</b> <code>ggplot2</code> extensions</a></li>
<li class="chapter" data-level="8.3.3" data-path="reporting-results-2.html"><a href="reporting-results-2.html#more-ggplot2-themes"><i class="fa fa-check"></i><b>8.3.3</b> More <code>ggplot2</code> themes</a></li>
<li class="chapter" data-level="8.3.4" data-path="reporting-results-2.html"><a href="reporting-results-2.html#other-useful-ggplot2-extensions"><i class="fa fa-check"></i><b>8.3.4</b> Other useful <code>ggplot2</code> extensions</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="reporting-results-2.html"><a href="reporting-results-2.html#simple-features"><i class="fa fa-check"></i><b>8.4</b> Simple features</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="reporting-results-2.html"><a href="reporting-results-2.html#introduction-to-simple-features"><i class="fa fa-check"></i><b>8.4.1</b> Introduction to simple features</a></li>
<li class="chapter" data-level="8.4.2" data-path="reporting-results-2.html"><a href="reporting-results-2.html#state-boundaries"><i class="fa fa-check"></i><b>8.4.2</b> State boundaries</a></li>
<li class="chapter" data-level="8.4.3" data-path="reporting-results-2.html"><a href="reporting-results-2.html#creating-an-sf-object"><i class="fa fa-check"></i><b>8.4.3</b> Creating an <code>sf</code> object</a></li>
<li class="chapter" data-level="8.4.4" data-path="reporting-results-2.html"><a href="reporting-results-2.html#reading-in-from-gis-files"><i class="fa fa-check"></i><b>8.4.4</b> Reading in from GIS files</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="reporting-results-2.html"><a href="reporting-results-2.html#in-course-exercise-chapter-8"><i class="fa fa-check"></i><b>8.5</b> In-course exercise Chapter 8</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="reporting-results-2.html"><a href="reporting-results-2.html#getting-and-cleaning-the-example-data"><i class="fa fa-check"></i><b>8.5.1</b> Getting and cleaning the example data</a></li>
<li class="chapter" data-level="8.5.2" data-path="reporting-results-2.html"><a href="reporting-results-2.html#trying-out-ggplot2-extensions"><i class="fa fa-check"></i><b>8.5.2</b> Trying out <code>ggplot2</code> extensions</a></li>
<li class="chapter" data-level="8.5.3" data-path="reporting-results-2.html"><a href="reporting-results-2.html#using-simple-features-to-map"><i class="fa fa-check"></i><b>8.5.3</b> Using simple features to map</a></li>
<li class="chapter" data-level="8.5.4" data-path="reporting-results-2.html"><a href="reporting-results-2.html#more-on-mapping"><i class="fa fa-check"></i><b>8.5.4</b> More on mapping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html"><i class="fa fa-check"></i><b>9</b> Reproducible research #2</a>
<ul>
<li class="chapter" data-level="9.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#templates"><i class="fa fa-check"></i><b>9.1</b> Templates</a></li>
<li class="chapter" data-level="9.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#r-projects"><i class="fa fa-check"></i><b>9.2</b> R Projects</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#organization"><i class="fa fa-check"></i><b>9.2.1</b> Organization</a></li>
<li class="chapter" data-level="9.2.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#creating-r-projects"><i class="fa fa-check"></i><b>9.2.2</b> Creating R Projects</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#git"><i class="fa fa-check"></i><b>9.3</b> git</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#initializing-a-git-repository"><i class="fa fa-check"></i><b>9.3.1</b> Initializing a git repository</a></li>
<li class="chapter" data-level="9.3.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#committing"><i class="fa fa-check"></i><b>9.3.2</b> Committing</a></li>
<li class="chapter" data-level="9.3.3" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#browsing-history"><i class="fa fa-check"></i><b>9.3.3</b> Browsing history</a></li>
<li class="chapter" data-level="9.3.4" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#linking-local-repo-to-github-repo"><i class="fa fa-check"></i><b>9.3.4</b> Linking local repo to GitHub repo</a></li>
<li class="chapter" data-level="9.3.5" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#syncing-rstudio-and-github"><i class="fa fa-check"></i><b>9.3.5</b> Syncing RStudio and GitHub</a></li>
<li class="chapter" data-level="9.3.6" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#issues"><i class="fa fa-check"></i><b>9.3.6</b> Issues</a></li>
<li class="chapter" data-level="9.3.7" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#pull-request"><i class="fa fa-check"></i><b>9.3.7</b> Pull request</a></li>
<li class="chapter" data-level="9.3.8" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#merge-conflicts"><i class="fa fa-check"></i><b>9.3.8</b> Merge conflicts</a></li>
<li class="chapter" data-level="9.3.9" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#find-out-more"><i class="fa fa-check"></i><b>9.3.9</b> Find out more</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#in-course-exercise-chapter-9"><i class="fa fa-check"></i><b>9.4</b> In-course exercise Chapter 9</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#organizing-a-project"><i class="fa fa-check"></i><b>9.4.1</b> Organizing a project</a></li>
<li class="chapter" data-level="9.4.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#initializing-git-for-an-r-project"><i class="fa fa-check"></i><b>9.4.2</b> Initializing git for an R Project</a></li>
<li class="chapter" data-level="9.4.3" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#linking-your-project-with-a-github-repository"><i class="fa fa-check"></i><b>9.4.3</b> Linking your project with a GitHub repository</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Part IV: Advanced</b></span></li>
<li class="chapter" data-level="10" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html"><i class="fa fa-check"></i><b>10</b> Entering and cleaning data #3</a>
<ul>
<li class="chapter" data-level="10.1" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#pulling-online-data"><i class="fa fa-check"></i><b>10.1</b> Pulling online data</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#apis"><i class="fa fa-check"></i><b>10.1.1</b> APIs</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#example-r-api-wrapper-packages"><i class="fa fa-check"></i><b>10.2</b> Example R API wrapper packages</a></li>
<li class="chapter" data-level="10.3" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#tigris-package"><i class="fa fa-check"></i><b>10.3</b> <code>tigris</code> package</a></li>
<li class="chapter" data-level="10.4" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#countyweather"><i class="fa fa-check"></i><b>10.4</b> <code>countyweather</code></a></li>
<li class="chapter" data-level="10.5" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#cleaning-very-messy-data"><i class="fa fa-check"></i><b>10.5</b> Cleaning very messy data</a></li>
<li class="chapter" data-level="10.6" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#in-course-exercise-chapter-10"><i class="fa fa-check"></i><b>10.6</b> In-course exercise Chapter 10</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#working-with-an-api-wrapper-package"><i class="fa fa-check"></i><b>10.6.1</b> Working with an API wrapper package</a></li>
<li class="chapter" data-level="10.6.2" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#cleaning-very-messy-data-1"><i class="fa fa-check"></i><b>10.6.2</b> Cleaning very messy data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="exploring-data-3.html"><a href="exploring-data-3.html"><i class="fa fa-check"></i><b>11</b> Exploring data #3</a>
<ul>
<li class="chapter" data-level="11.1" data-path="exploring-data-3.html"><a href="exploring-data-3.html#simulations"><i class="fa fa-check"></i><b>11.1</b> Simulations</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="exploring-data-3.html"><a href="exploring-data-3.html#the-lady-tasting-tea"><i class="fa fa-check"></i><b>11.1.1</b> The lady tasting tea</a></li>
<li class="chapter" data-level="11.1.2" data-path="exploring-data-3.html"><a href="exploring-data-3.html#playing-darts"><i class="fa fa-check"></i><b>11.1.2</b> Playing darts</a></li>
<li class="chapter" data-level="11.1.3" data-path="exploring-data-3.html"><a href="exploring-data-3.html#simulations-in-research"><i class="fa fa-check"></i><b>11.1.3</b> Simulations in research</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="exploring-data-3.html"><a href="exploring-data-3.html#other-computationally-intensive-approaches"><i class="fa fa-check"></i><b>11.2</b> Other computationally-intensive approaches</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="exploring-data-3.html"><a href="exploring-data-3.html#bootstrap-and-friends"><i class="fa fa-check"></i><b>11.2.1</b> Bootstrap and friends</a></li>
<li class="chapter" data-level="11.2.2" data-path="exploring-data-3.html"><a href="exploring-data-3.html#bayesian-analysis"><i class="fa fa-check"></i><b>11.2.2</b> Bayesian analysis</a></li>
<li class="chapter" data-level="11.2.3" data-path="exploring-data-3.html"><a href="exploring-data-3.html#ensemble-models-and-friends"><i class="fa fa-check"></i><b>11.2.3</b> Ensemble models and friends</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html"><i class="fa fa-check"></i><b>12</b> Reporting data results #3</a>
<ul>
<li class="chapter" data-level="12.1" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#shiny-web-apps"><i class="fa fa-check"></i><b>12.1</b> Shiny web apps</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#resources-for-learning-shiny"><i class="fa fa-check"></i><b>12.1.1</b> Resources for learning Shiny</a></li>
<li class="chapter" data-level="12.1.2" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#basics-of-shiny-apps"><i class="fa fa-check"></i><b>12.1.2</b> Basics of Shiny apps</a></li>
<li class="chapter" data-level="12.1.3" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#server.r-file"><i class="fa fa-check"></i><b>12.1.3</b> <code>server.R</code> file</a></li>
<li class="chapter" data-level="12.1.4" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#ui.r-file"><i class="fa fa-check"></i><b>12.1.4</b> <code>ui.R</code> file</a></li>
<li class="chapter" data-level="12.1.5" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#making-a-shiny-app"><i class="fa fa-check"></i><b>12.1.5</b> Making a Shiny app</a></li>
<li class="chapter" data-level="12.1.6" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#starting-with-the-ui.r-file"><i class="fa fa-check"></i><b>12.1.6</b> Starting with the <code>ui.R</code> file</a></li>
<li class="chapter" data-level="12.1.7" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#adding-in-widgets"><i class="fa fa-check"></i><b>12.1.7</b> Adding in widgets</a></li>
<li class="chapter" data-level="12.1.8" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#creating-output-in-server.r"><i class="fa fa-check"></i><b>12.1.8</b> Creating output in <code>server.R</code></a></li>
<li class="chapter" data-level="12.1.9" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#making-the-output-reactive"><i class="fa fa-check"></i><b>12.1.9</b> Making the output reactive</a></li>
<li class="chapter" data-level="12.1.10" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#fancier-version"><i class="fa fa-check"></i><b>12.1.10</b> Fancier version</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#htmlwidgets"><i class="fa fa-check"></i><b>12.2</b> htmlWidgets</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#overview-of-htmlwidgets"><i class="fa fa-check"></i><b>12.2.1</b> Overview of htmlWidgets</a></li>
<li class="chapter" data-level="12.2.2" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#plotly-package"><i class="fa fa-check"></i><b>12.2.2</b> <code>plotly</code> package</a></li>
<li class="chapter" data-level="12.2.3" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#rbokeh-package"><i class="fa fa-check"></i><b>12.2.3</b> <code>rbokeh</code> package</a></li>
<li class="chapter" data-level="12.2.4" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#dygraphs-package"><i class="fa fa-check"></i><b>12.2.4</b> <code>dygraphs</code> package</a></li>
<li class="chapter" data-level="12.2.5" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#dt-package"><i class="fa fa-check"></i><b>12.2.5</b> <code>DT</code> package</a></li>
<li class="chapter" data-level="12.2.6" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#creating-your-own-widget"><i class="fa fa-check"></i><b>12.2.6</b> Creating your own widget</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html"><i class="fa fa-check"></i><b>13</b> Reproducible research #3</a>
<ul>
<li class="chapter" data-level="13.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#overview-of-r-packages"><i class="fa fa-check"></i><b>13.1</b> Overview of R packages</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#what-is-an-r-package"><i class="fa fa-check"></i><b>13.1.1</b> What is an R package?</a></li>
<li class="chapter" data-level="13.1.2" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#example-nmmaps-package"><i class="fa fa-check"></i><b>13.1.2</b> Example: NMMAPS package</a></li>
<li class="chapter" data-level="13.1.3" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#sharing-an-r-package"><i class="fa fa-check"></i><b>13.1.3</b> Sharing an R package</a></li>
<li class="chapter" data-level="13.1.4" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#package-names"><i class="fa fa-check"></i><b>13.1.4</b> Package names</a></li>
<li class="chapter" data-level="13.1.5" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#package-maintainer"><i class="fa fa-check"></i><b>13.1.5</b> Package maintainer</a></li>
<li class="chapter" data-level="13.1.6" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#find-out-more-1"><i class="fa fa-check"></i><b>13.1.6</b> Find out more</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#basic-example-package-weathermetrics"><i class="fa fa-check"></i><b>13.2</b> Basic example package: <code>weathermetrics</code></a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#contents-of-weathermetrics-package"><i class="fa fa-check"></i><b>13.2.1</b> Contents of weathermetrics package</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#elements-of-an-r-package"><i class="fa fa-check"></i><b>13.3</b> Elements of an R package</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#basic-elements"><i class="fa fa-check"></i><b>13.3.1</b> Basic elements</a></li>
<li class="chapter" data-level="13.3.2" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#description-file"><i class="fa fa-check"></i><b>13.3.2</b> DESCRIPTION file</a></li>
<li class="chapter" data-level="13.3.3" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#r-folder"><i class="fa fa-check"></i><b>13.3.3</b> R folder</a></li>
<li class="chapter" data-level="13.3.4" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#other-common-elements"><i class="fa fa-check"></i><b>13.3.4</b> Other common elements</a></li>
<li class="chapter" data-level="13.3.5" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#less-common-elements"><i class="fa fa-check"></i><b>13.3.5</b> Less common elements</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#creating-an-r-package"><i class="fa fa-check"></i><b>13.4</b> Creating an R package</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#initializing-an-r-package"><i class="fa fa-check"></i><b>13.4.1</b> Initializing an R package</a></li>
<li class="chapter" data-level="13.4.2" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#working-on-an-r-package"><i class="fa fa-check"></i><b>13.4.2</b> Working on an R package</a></li>
<li class="chapter" data-level="13.4.3" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#finalizing-an-r-package"><i class="fa fa-check"></i><b>13.4.3</b> Finalizing an R package</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html"><i class="fa fa-check"></i><b>A</b> Appendix A: Vocabulary</a>
<ul>
<li class="chapter" data-level="A.1" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-1r-preliminaries"><i class="fa fa-check"></i><b>A.1</b> Quiz 1—R Preliminaries</a></li>
<li class="chapter" data-level="A.2" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-2entering-cleaning-data-1"><i class="fa fa-check"></i><b>A.2</b> Quiz 2—Entering / cleaning data #1</a></li>
<li class="chapter" data-level="A.3" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-3"><i class="fa fa-check"></i><b>A.3</b> Quiz 3</a></li>
<li class="chapter" data-level="A.4" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-4"><i class="fa fa-check"></i><b>A.4</b> Quiz 4</a></li>
<li class="chapter" data-level="A.5" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-5"><i class="fa fa-check"></i><b>A.5</b> Quiz 5</a></li>
<li class="chapter" data-level="A.6" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-6"><i class="fa fa-check"></i><b>A.6</b> Quiz 6</a></li>
<li class="chapter" data-level="A.7" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-7"><i class="fa fa-check"></i><b>A.7</b> Quiz 7</a></li>
<li class="chapter" data-level="A.8" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-8"><i class="fa fa-check"></i><b>A.8</b> Quiz 8</a></li>
<li class="chapter" data-level="A.9" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-9"><i class="fa fa-check"></i><b>A.9</b> Quiz 9</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html"><i class="fa fa-check"></i><b>B</b> Appendix B: Homework</a>
<ul>
<li class="chapter" data-level="B.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-1"><i class="fa fa-check"></i><b>B.1</b> Homework #1</a>
<ul>
<li class="chapter" data-level="B.1.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#option-1"><i class="fa fa-check"></i><b>B.1.1</b> Option 1</a></li>
<li class="chapter" data-level="B.1.2" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#option-2"><i class="fa fa-check"></i><b>B.1.2</b> Option 2</a></li>
<li class="chapter" data-level="B.1.3" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#special-swirl-commands"><i class="fa fa-check"></i><b>B.1.3</b> Special swirl commands</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-2"><i class="fa fa-check"></i><b>B.2</b> Homework #2</a></li>
<li class="chapter" data-level="B.3" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-3"><i class="fa fa-check"></i><b>B.3</b> Homework #3</a></li>
<li class="chapter" data-level="B.4" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-4"><i class="fa fa-check"></i><b>B.4</b> Homework #4</a></li>
<li class="chapter" data-level="B.5" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-5"><i class="fa fa-check"></i><b>B.5</b> Homework #5</a>
<ul>
<li class="chapter" data-level="B.5.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#setting-up-a-github-repository-for-this-project"><i class="fa fa-check"></i><b>B.5.1</b> Setting up a GitHub repository for this project</a></li>
</ul></li>
<li class="chapter" data-level="B.6" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-6"><i class="fa fa-check"></i><b>B.6</b> Homework #6</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Programming for Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="entering-and-cleaning-data-2" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Entering and cleaning data #2<a href="entering-and-cleaning-data-2.html#entering-and-cleaning-data-2" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The video lectures for this chapter are embedded at relevant places in the text,
with links to download a pdf of the associated slides for each video.
You can also access <a href="https://www.youtube.com/playlist?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4">a full playlist for the videos for this chapter</a>.</p>
<div id="tidy-data" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Tidy data<a href="entering-and-cleaning-data-2.html#tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<iframe width="747" height="467" src="https://www.youtube.com/embed/EetWyFQqXbs?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_1.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
<p>All of the material in this section comes directly from Hadley Wickham’s <a href="http://vita.had.co.nz/papers/tidy-data.pdf">paper on tidy data</a>. You will need to read this paper to prepare for the quiz on this section.</p>
<p>Getting your data into a “tidy” format makes it easier to model and plot. By taking the time to tidy your data at the start of an analysis, you will save yourself time, and make it easier to plan out later steps.</p>
<p>Characteristics of tidy data are:</p>
<ol style="list-style-type: decimal">
<li>Each variable forms a column.</li>
<li>Each observation forms a row.</li>
<li>Each type of observational unit forms a table.</li>
</ol>
<p>Here are five common problems that Hadley Wickham has identified that keep data from being tidy:</p>
<ol style="list-style-type: decimal">
<li>Column headers are values, not variable names.</li>
<li>Multiple variables are stored in one column.</li>
<li>Variables are stored in both rows and columns.</li>
<li>Multiple types of observational units are stored in the same table.</li>
<li>A single observational unit is stored in multiple tables.</li>
</ol>
<p>Here are examples (again, from Hadley Wickham’s <a href="http://vita.had.co.nz/papers/tidy-data.pdf">paper on tidy data</a>, which is required reading for this week of the course) of each of these problems.</p>
<blockquote>
<ol style="list-style-type: decimal">
<li>Column headers are values, not variable names.</li>
</ol>
</blockquote>
<p><img src="figures/TidyDataProblem1.png" width="\textwidth" /></p>
<p>Solution:</p>
<p><img src="figures/TidyDataSolution1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<blockquote>
<ol start="2" style="list-style-type: decimal">
<li>Multiple variables are stored in one column.</li>
</ol>
</blockquote>
<p><img src="figures/TidyDataProblem2.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>Solution:</p>
<p><img src="figures/TidyDataSolution2.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<blockquote>
<ol start="3" style="list-style-type: decimal">
<li>Variables are stored in both rows and columns.</li>
</ol>
</blockquote>
<p><img src="figures/TidyDataProblem3.png" width="\textwidth" /></p>
<p>Solution:</p>
<p><img src="figures/TidyDataSolution3.png" width="\textwidth" /></p>
<blockquote>
<ol start="4" style="list-style-type: decimal">
<li>Multiple types of observational units are stored in the same table.</li>
</ol>
</blockquote>
<p><img src="figures/TidyDataProblem4.png" width="\textwidth" /></p>
<p>Solution:</p>
<p><img src="figures/TidyDataSolution4.png" width="\textwidth" /></p>
<blockquote>
<ol start="5" style="list-style-type: decimal">
<li>A single observational unit is stored in multiple tables.</li>
</ol>
</blockquote>
<p>Example: exposure and outcome data stored in different files:</p>
<ul>
<li>File 1: Daily mortality counts</li>
<li>File 2: Daily air pollution measurements</li>
</ul>
</div>
<div id="joining-datasets" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Joining datasets<a href="entering-and-cleaning-data-2.html#joining-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<iframe width="747" height="467" src="https://www.youtube.com/embed/UJ8UoK3bSP0?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_2.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
<p>So far, you have only worked with a single data source at a time. When you work on your own projects, however, you typically will need to merge together two or more datasets to create the a data frame to answer your research question. For example, for air pollution epidemiology, you will often have to join several datasets:</p>
<ul>
<li>Health outcome data (e.g., number of deaths per day)</li>
<li>Air pollution concentrations</li>
<li>Weather measurements (since weather can be a confounder)</li>
<li>Demographic data</li>
</ul>
<p>The <code>dplyr</code> package has a family of different functions to join two dataframes together, the <code>*_join</code> family of functions. All combine two dataframes, which I’ll call <code>x</code> and <code>y</code> here. </p>
<p>The functions include:</p>
<ul>
<li><code>inner_join(x, y)</code>: Keep only rows where there are observations in both <code>x</code> and <code>y</code>.</li>
<li><code>left_join(x, y)</code>: Keep all rows from <code>x</code>, whether they have a match in <code>y</code> or not.</li>
<li><code>right_join(x, y)</code>: Keep all rows from <code>y</code>, whether they have a match in <code>x</code> or not.</li>
<li><code>full_join(x, y)</code>: Keep all rows from both <code>x</code> and <code>y</code>, whether they have a match in the other dataset or not.</li>
</ul>
<p>In the examples, I’ll use two datasets, <code>x</code> and <code>y</code>. Both datasets include the column <code>course</code>. The other column in <code>x</code> is <code>grade</code>, while the other column in <code>y</code> is <code>day</code>. Observations exist for courses <code>x</code> and <code>y</code> in both datasets, but for <code>w</code> and <code>z</code> in only one dataset.</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="entering-and-cleaning-data-2.html#cb523-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">course =</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>),</span>
<span id="cb523-2"><a href="entering-and-cleaning-data-2.html#cb523-2" tabindex="-1"></a>                <span class="at">grade =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">82</span>, <span class="dv">78</span>))</span>
<span id="cb523-3"><a href="entering-and-cleaning-data-2.html#cb523-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">course =</span> <span class="fu">c</span>(<span class="st">&quot;w&quot;</span>, <span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>),</span>
<span id="cb523-4"><a href="entering-and-cleaning-data-2.html#cb523-4" tabindex="-1"></a>                <span class="at">day =</span> <span class="fu">c</span>(<span class="st">&quot;Tues&quot;</span>, <span class="st">&quot;Mon / Fri&quot;</span>, <span class="st">&quot;Tue&quot;</span>))</span></code></pre></div>
<p>Here is what these two example datasets look like:</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="entering-and-cleaning-data-2.html#cb524-1" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##   course grade
## 1      x    90
## 2      y    82
## 3      z    78</code></pre>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="entering-and-cleaning-data-2.html#cb526-1" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##   course       day
## 1      w      Tues
## 2      x Mon / Fri
## 3      y       Tue</code></pre>
<p>With <code>inner_join</code>, you’ll only get the observations that show up in both datasets. That means you’ll lose data on <code>z</code> (only in the first dataset) and <code>w</code> (only in the second dataset).</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="entering-and-cleaning-data-2.html#cb528-1" tabindex="-1"></a><span class="fu">inner_join</span>(x, y)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(course)`</code></pre>
<pre><code>##   course grade       day
## 1      x    90 Mon / Fri
## 2      y    82       Tue</code></pre>
<p>With <code>left_join</code>, you’ll keep everything in <code>x</code> (the “left” dataset), but not keep things in <code>y</code> that don’t match something in <code>x</code>. That means that, here, you’ll lose <code>w</code>:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="entering-and-cleaning-data-2.html#cb531-1" tabindex="-1"></a><span class="fu">left_join</span>(x, y)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(course)`</code></pre>
<pre><code>##   course grade       day
## 1      x    90 Mon / Fri
## 2      y    82       Tue
## 3      z    78      &lt;NA&gt;</code></pre>
<p><code>right_join</code> is the opposite:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="entering-and-cleaning-data-2.html#cb534-1" tabindex="-1"></a><span class="fu">right_join</span>(x, y)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(course)`</code></pre>
<pre><code>##   course grade       day
## 1      x    90 Mon / Fri
## 2      y    82       Tue
## 3      w    NA      Tues</code></pre>
<p><code>full_join</code> keeps everything from both datasets:</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="entering-and-cleaning-data-2.html#cb537-1" tabindex="-1"></a><span class="fu">full_join</span>(x, y)</span></code></pre></div>
<pre><code>## Joining with `by = join_by(course)`</code></pre>
<pre><code>##   course grade       day
## 1      x    90 Mon / Fri
## 2      y    82       Tue
## 3      z    78      &lt;NA&gt;
## 4      w    NA      Tues</code></pre>
</div>
<div id="longer-data" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Longer data<a href="entering-and-cleaning-data-2.html#longer-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<iframe width="747" height="467" src="https://www.youtube.com/embed/abUDhRmF_bg?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_3.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
<p>There are two functions from the <code>tidyr</code> package (another member of the tidyverse) that you can use to change between wider and longr data: <code>pivot_longer</code> and <code>pivot_wider</code>. Here is a description of these two functions:</p>
<ul>
<li><code>pivot_longer</code>: Takes several columns and pivots them down into two columns. One of the new columns contains the former column names and the other contains the former cell values.</li>
<li><code>pivot_wider</code>: Takes two columns and pivots them up into multiple columns. Column names for the new columns will come from one column and the cell values from the other.</li>
</ul>
<p>The following examples are show the effects of making a dataset longer or wider.</p>
<p>Here is some simulated wide data:</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="entering-and-cleaning-data-2.html#cb540-1" tabindex="-1"></a>wide_stocks[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   time             X      Y      Z
##   &lt;date&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 2009-01-01 -0.220   0.604 -6.90 
## 2 2009-01-02 -0.0971  0.673 -7.56 
## 3 2009-01-03 -0.120  -2.92  -0.714</code></pre>
<p>In the <code>wide_stocks</code> dataset, there are separate columns for three different stocks (<code>X</code>, <code>Y</code>, and <code>Z</code>). Each cell gives the value for a certain stock on a certain day. This data isn’t “tidy”, because the identify of the stock (<code>X</code>, <code>Y</code>, or <code>Z</code>) is a variable, and you’ll probably want to include it as a variable in modeling.</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="entering-and-cleaning-data-2.html#cb542-1" tabindex="-1"></a>wide_stocks[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   time             X      Y      Z
##   &lt;date&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 2009-01-01 -0.220   0.604 -6.90 
## 2 2009-01-02 -0.0971  0.673 -7.56 
## 3 2009-01-03 -0.120  -2.92  -0.714</code></pre>
<p>If you want to convert the dataframe to have all stock values in a single column, you can use <code>pivot_longer</code> to convert wide data to long data:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="entering-and-cleaning-data-2.html#cb544-1" tabindex="-1"></a>long_stocks <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> wide_stocks,</span>
<span id="cb544-2"><a href="entering-and-cleaning-data-2.html#cb544-2" tabindex="-1"></a>                            <span class="at">cols =</span> <span class="sc">-</span>time,</span>
<span id="cb544-3"><a href="entering-and-cleaning-data-2.html#cb544-3" tabindex="-1"></a>                            <span class="at">names_to =</span> <span class="st">&quot;stock&quot;</span>,</span>
<span id="cb544-4"><a href="entering-and-cleaning-data-2.html#cb544-4" tabindex="-1"></a>                            <span class="at">values_to =</span> <span class="st">&quot;price&quot;</span>)</span>
<span id="cb544-5"><a href="entering-and-cleaning-data-2.html#cb544-5" tabindex="-1"></a>long_stocks[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   time       stock   price
##   &lt;date&gt;     &lt;chr&gt;   &lt;dbl&gt;
## 1 2009-01-01 X     -0.220 
## 2 2009-01-01 Y      0.604 
## 3 2009-01-01 Z     -6.90  
## 4 2009-01-02 X     -0.0971
## 5 2009-01-02 Y      0.673</code></pre>
<p>In this “longer” dataframe, there is now one column that gives the identify of the stock (<code>stock</code>) and another column that gives the price of that stock that day (<code>price</code>):</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="entering-and-cleaning-data-2.html#cb546-1" tabindex="-1"></a>long_stocks[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   time       stock   price
##   &lt;date&gt;     &lt;chr&gt;   &lt;dbl&gt;
## 1 2009-01-01 X     -0.220 
## 2 2009-01-01 Y      0.604 
## 3 2009-01-01 Z     -6.90  
## 4 2009-01-02 X     -0.0971
## 5 2009-01-02 Y      0.673</code></pre>
<p>The format for a <code>pivots_longer</code> call is:</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="entering-and-cleaning-data-2.html#cb548-1" tabindex="-1"></a><span class="do">## Generic code</span></span>
<span id="cb548-2"><a href="entering-and-cleaning-data-2.html#cb548-2" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(old_df,</span>
<span id="cb548-3"><a href="entering-and-cleaning-data-2.html#cb548-3" tabindex="-1"></a>                       <span class="at">cols =</span> [<span class="fu">name</span>(s) of the columns you want to make longer],</span>
<span id="cb548-4"><a href="entering-and-cleaning-data-2.html#cb548-4" tabindex="-1"></a>                       <span class="at">names_to =</span> [name of new column to store the old column names],</span>
<span id="cb548-5"><a href="entering-and-cleaning-data-2.html#cb548-5" tabindex="-1"></a>                       <span class="at">values_to =</span> [name of new column to store the old values])</span></code></pre></div>
<p>Three important notes:</p>
<ul>
<li>Everything is pivoted into one of two columns – one column with the old column names, and one column with the old cell values</li>
<li>With the <code>names_to</code> and <code>values_to</code> arguments, you are just providing column names for the two columns that everything’s pivoted into.</li>
<li>If there is a column you don’t want to include in the pivot (<code>date</code> in the example), use <code>-</code> to exclude it in the <code>cols</code> argument.</li>
</ul>
<p>Notice how easy it is, now that the data is longer, to use <code>stock</code> for aesthetics of faceting in a <code>ggplot2</code> call:</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="entering-and-cleaning-data-2.html#cb549-1" tabindex="-1"></a><span class="fu">ggplot</span>(long_stocks, <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> price)) <span class="sc">+</span> </span>
<span id="cb549-2"><a href="entering-and-cleaning-data-2.html#cb549-2" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb549-3"><a href="entering-and-cleaning-data-2.html#cb549-3" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> stock) <span class="sc">+</span></span>
<span id="cb549-4"><a href="entering-and-cleaning-data-2.html#cb549-4" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-325-1.png" width="672" /></p>
<p>If you have data in a “longer” format and would like to make it “wider”, you can use <code>pivot_wider</code> to do that:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="entering-and-cleaning-data-2.html#cb550-1" tabindex="-1"></a>stocks <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(long_stocks,</span>
<span id="cb550-2"><a href="entering-and-cleaning-data-2.html#cb550-2" tabindex="-1"></a>                      <span class="at">names_from =</span> <span class="st">&quot;stock&quot;</span>,</span>
<span id="cb550-3"><a href="entering-and-cleaning-data-2.html#cb550-3" tabindex="-1"></a>                      <span class="at">values_from =</span> price)</span>
<span id="cb550-4"><a href="entering-and-cleaning-data-2.html#cb550-4" tabindex="-1"></a>stocks[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   time             X      Y      Z
##   &lt;date&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 2009-01-01 -0.220   0.604 -6.90 
## 2 2009-01-02 -0.0971  0.673 -7.56 
## 3 2009-01-03 -0.120  -2.92  -0.714
## 4 2009-01-04  0.667   0.553 -5.52 
## 5 2009-01-05  0.431   0.692  6.57</code></pre>
<p>Notice that this reverses the action of <code>pivot_longer</code>.</p>
<p>The “wider” your data the less likely it is to be tidy, so won’t use <code>pivot_wider</code> frequently when you are preparing data for analysis. However, <code>pivot_wider</code> can be very helpful in creating tables for final reports and presentations.</p>
<p>For example, if you wanted to create a table with means and standard deviations for each of the three stocks, you could use <code>pivot_wider</code> to rearrange the final summary to create an attractive table.</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="entering-and-cleaning-data-2.html#cb552-1" tabindex="-1"></a>stock_summary <span class="ot">&lt;-</span> long_stocks <span class="sc">%&gt;%</span> </span>
<span id="cb552-2"><a href="entering-and-cleaning-data-2.html#cb552-2" tabindex="-1"></a>  <span class="fu">group_by</span>(stock) <span class="sc">%&gt;%</span></span>
<span id="cb552-3"><a href="entering-and-cleaning-data-2.html#cb552-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>(), <span class="at">mean =</span> <span class="fu">mean</span>(price), <span class="at">sd =</span> <span class="fu">sd</span>(price))</span>
<span id="cb552-4"><a href="entering-and-cleaning-data-2.html#cb552-4" tabindex="-1"></a>stock_summary</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   stock     N   mean    sd
##   &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 X        10  0.288 0.889
## 2 Y        10  0.191 1.78 
## 3 Z        10 -0.264 5.26</code></pre>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="entering-and-cleaning-data-2.html#cb554-1" tabindex="-1"></a>stock_summary <span class="sc">%&gt;%</span></span>
<span id="cb554-2"><a href="entering-and-cleaning-data-2.html#cb554-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">&quot;Mean (Std.dev.)&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">round</span>(mean, <span class="dv">2</span>), <span class="st">&quot; (&quot;</span>,</span>
<span id="cb554-3"><a href="entering-and-cleaning-data-2.html#cb554-3" tabindex="-1"></a>                                    <span class="fu">round</span>(sd, <span class="dv">2</span>), <span class="st">&quot;)&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb554-4"><a href="entering-and-cleaning-data-2.html#cb554-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span> mean, <span class="sc">-</span> sd) <span class="sc">%&gt;%</span></span>
<span id="cb554-5"><a href="entering-and-cleaning-data-2.html#cb554-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">N =</span> <span class="fu">as.character</span>(N)) <span class="sc">%&gt;%</span> <span class="co"># might be able to deal with this in pivot_longer call</span></span>
<span id="cb554-6"><a href="entering-and-cleaning-data-2.html#cb554-6" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>stock, <span class="at">names_to =</span> <span class="st">&quot;Statistic&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb554-7"><a href="entering-and-cleaning-data-2.html#cb554-7" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;stock&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;Value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb554-8"><a href="entering-and-cleaning-data-2.html#cb554-8" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Statistic</th>
<th align="left">X</th>
<th align="left">Y</th>
<th align="left">Z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">N</td>
<td align="left">10</td>
<td align="left">10</td>
<td align="left">10</td>
</tr>
<tr class="even">
<td align="left">Mean (Std.dev.)</td>
<td align="left">0.29 (0.89)</td>
<td align="left">0.19 (1.78)</td>
<td align="left">-0.26 (5.26)</td>
</tr>
</tbody>
</table>
<iframe width="747" height="467" src="https://www.youtube.com/embed/NeisIoTKBfo?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_4.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
<iframe width="747" height="467" src="https://www.youtube.com/embed/5yThV_XJgCU?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_5.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
</div>
<div id="working-with-factors" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Working with factors<a href="entering-and-cleaning-data-2.html#working-with-factors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<iframe width="746" height="466" src="https://www.youtube.com/embed/iM9Js4gTqfI?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_6.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
<p>Hadley Wickham has developed a package called <code>forcats</code> that helps you work with categorical variables (factors). I’ll show some examples of its functions using the <code>worldcup</code> dataset:</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="entering-and-cleaning-data-2.html#cb555-1" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb555-2"><a href="entering-and-cleaning-data-2.html#cb555-2" tabindex="-1"></a><span class="fu">library</span>(faraway)</span>
<span id="cb555-3"><a href="entering-and-cleaning-data-2.html#cb555-3" tabindex="-1"></a><span class="fu">data</span>(worldcup)</span></code></pre></div>
<p>The <code>fct_recode</code> function can be used to change the labels of a function (along the lines of using <code>factor</code> with <code>levels</code> and <code>labels</code> to reset factor labels).</p>
<p>One big advantage is that <code>fct_recode</code> lets you change labels for some, but not all, levels. For example, here are the team names:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="entering-and-cleaning-data-2.html#cb556-1" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb556-2"><a href="entering-and-cleaning-data-2.html#cb556-2" tabindex="-1"></a>worldcup <span class="sc">%&gt;%</span></span>
<span id="cb556-3"><a href="entering-and-cleaning-data-2.html#cb556-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Team, <span class="st">&quot;^US&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb556-4"><a href="entering-and-cleaning-data-2.html#cb556-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Team, Position, Time)</span></code></pre></div>
<pre><code>##           Team   Position Time
## Beasley    USA Midfielder   10
## Bocanegra  USA   Defender  390
## Bornstein  USA   Defender  200</code></pre>
<p>If you just want to change “USA” to “United States,” you can run:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="entering-and-cleaning-data-2.html#cb558-1" tabindex="-1"></a>worldcup <span class="ot">&lt;-</span> worldcup <span class="sc">%&gt;%</span></span>
<span id="cb558-2"><a href="entering-and-cleaning-data-2.html#cb558-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Team =</span> <span class="fu">fct_recode</span>(Team, <span class="st">`</span><span class="at">United States</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;USA&quot;</span>))</span>
<span id="cb558-3"><a href="entering-and-cleaning-data-2.html#cb558-3" tabindex="-1"></a>worldcup <span class="sc">%&gt;%</span></span>
<span id="cb558-4"><a href="entering-and-cleaning-data-2.html#cb558-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Team, <span class="st">&quot;^Un&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb558-5"><a href="entering-and-cleaning-data-2.html#cb558-5" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Team, Position, Time)</span></code></pre></div>
<pre><code>##                    Team   Position Time
## Beasley   United States Midfielder   10
## Bocanegra United States   Defender  390
## Bornstein United States   Defender  200</code></pre>
<p>You can use the <code>fct_lump</code> function to lump uncommon factors into an “Other” category. For example, to lump the two least common positions together, you can run (<code>n</code> specifies how many categories to keep outside of “Other”):</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="entering-and-cleaning-data-2.html#cb560-1" tabindex="-1"></a>worldcup <span class="sc">%&gt;%</span></span>
<span id="cb560-2"><a href="entering-and-cleaning-data-2.html#cb560-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Position =</span> forcats<span class="sc">::</span><span class="fu">fct_lump</span>(Position, <span class="at">n =</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb560-3"><a href="entering-and-cleaning-data-2.html#cb560-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(Position)</span></code></pre></div>
<pre><code>##     Position   n
## 1   Defender 188
## 2 Midfielder 228
## 3      Other 179</code></pre>
<p>You can use the <code>fct_infreq</code> function to reorder the levels of a factor from most common to least common:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="entering-and-cleaning-data-2.html#cb562-1" tabindex="-1"></a><span class="fu">levels</span>(worldcup<span class="sc">$</span>Position)</span></code></pre></div>
<pre><code>## [1] &quot;Defender&quot;   &quot;Forward&quot;    &quot;Goalkeeper&quot; &quot;Midfielder&quot;</code></pre>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="entering-and-cleaning-data-2.html#cb564-1" tabindex="-1"></a>worldcup <span class="ot">&lt;-</span> worldcup <span class="sc">%&gt;%</span></span>
<span id="cb564-2"><a href="entering-and-cleaning-data-2.html#cb564-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Position =</span> <span class="fu">fct_infreq</span>(Position))</span>
<span id="cb564-3"><a href="entering-and-cleaning-data-2.html#cb564-3" tabindex="-1"></a><span class="fu">levels</span>(worldcup<span class="sc">$</span>Position)</span></code></pre></div>
<pre><code>## [1] &quot;Midfielder&quot; &quot;Defender&quot;   &quot;Forward&quot;    &quot;Goalkeeper&quot;</code></pre>
<p>If you want to reorder one factor by another variable (ascending order), you can use <code>fct_reorder</code> (e.g., homework 3). For example, to relevel <code>Position</code> by the average shots on goals for each position, you can run:</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="entering-and-cleaning-data-2.html#cb566-1" tabindex="-1"></a><span class="fu">levels</span>(worldcup<span class="sc">$</span>Position)</span></code></pre></div>
<pre><code>## [1] &quot;Midfielder&quot; &quot;Defender&quot;   &quot;Forward&quot;    &quot;Goalkeeper&quot;</code></pre>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="entering-and-cleaning-data-2.html#cb568-1" tabindex="-1"></a>worldcup <span class="ot">&lt;-</span> worldcup <span class="sc">%&gt;%</span></span>
<span id="cb568-2"><a href="entering-and-cleaning-data-2.html#cb568-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Position) <span class="sc">%&gt;%</span></span>
<span id="cb568-3"><a href="entering-and-cleaning-data-2.html#cb568-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ave_shots =</span> <span class="fu">mean</span>(Shots)) <span class="sc">%&gt;%</span></span>
<span id="cb568-4"><a href="entering-and-cleaning-data-2.html#cb568-4" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb568-5"><a href="entering-and-cleaning-data-2.html#cb568-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Position =</span> <span class="fu">fct_reorder</span>(Position, ave_shots))</span>
<span id="cb568-6"><a href="entering-and-cleaning-data-2.html#cb568-6" tabindex="-1"></a><span class="fu">levels</span>(worldcup<span class="sc">$</span>Position)</span></code></pre></div>
<pre><code>## [1] &quot;Goalkeeper&quot; &quot;Defender&quot;   &quot;Midfielder&quot; &quot;Forward&quot;</code></pre>
</div>
<div id="string-operations-and-regular-expressions" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> String operations and regular expressions<a href="entering-and-cleaning-data-2.html#string-operations-and-regular-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<iframe width="746" height="466" src="https://www.youtube.com/embed/bnAec9JOwRM?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_7.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
<iframe width="746" height="466" src="https://www.youtube.com/embed/7LduecuZW00?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_9.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
<p>For these examples, we’ll use some data on passengers of the Titanic. You can load this data using:</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="entering-and-cleaning-data-2.html#cb570-1" tabindex="-1"></a><span class="co"># install.packages(&quot;titanic&quot;)</span></span>
<span id="cb570-2"><a href="entering-and-cleaning-data-2.html#cb570-2" tabindex="-1"></a><span class="fu">library</span>(titanic)</span>
<span id="cb570-3"><a href="entering-and-cleaning-data-2.html#cb570-3" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;titanic_train&quot;</span>)</span></code></pre></div>
<p>We will be using the <code>stringr</code> package:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="entering-and-cleaning-data-2.html#cb571-1" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>This data includes a column called “Name” with passenger names. This column is somewhat messy and includes several elements that we might want to separate (last name, first name, title). Here are the first few values of “Name”:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="entering-and-cleaning-data-2.html#cb572-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span> <span class="fu">select</span>(Name) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                                                  Name
## 1                             Braund, Mr. Owen Harris
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer)
## 3                              Heikkinen, Miss. Laina</code></pre>
<p>We’ve already done some things to manipulate strings. For example, if we wanted to separate “Name” into last name and first name (including title), we could actually do that with the <code>separate</code> function:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="entering-and-cleaning-data-2.html#cb574-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span> </span>
<span id="cb574-2"><a href="entering-and-cleaning-data-2.html#cb574-2" tabindex="-1"></a>  <span class="fu">select</span>(Name) <span class="sc">%&gt;%</span> </span>
<span id="cb574-3"><a href="entering-and-cleaning-data-2.html#cb574-3" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb574-4"><a href="entering-and-cleaning-data-2.html#cb574-4" tabindex="-1"></a>  <span class="fu">separate</span>(Name, <span class="fu">c</span>(<span class="st">&quot;last_name&quot;</span>, <span class="st">&quot;first_name&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>)</span></code></pre></div>
<pre><code>##   last_name                                 first_name
## 1    Braund                            Mr. Owen Harris
## 2   Cumings Mrs. John Bradley (Florence Briggs Thayer)
## 3 Heikkinen                                Miss. Laina</code></pre>
<p>Notice that <code>separate</code> is looking for a regular pattern (“,”) and then doing something based on the location of that pattern in each string (splitting the string). </p>
<p>There are a variety of functions in R that can perform manipulations based on finding regular patterns in character strings.</p>
<p>The <code>str_detect</code> function will look through each element of a character vector for a designated pattern. If the pattern is there, it will return <code>TRUE</code>, and otherwise <code>FALSE</code>. The convention is:</p>
<pre><code>## Generic code
str_detect(string = [vector you want to check], 
           pattern = [pattern you want to check for])</code></pre>
<p>For example, to create a logical vector specifying which of the Titanic passenger names include “Mrs.”, you can call:</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="entering-and-cleaning-data-2.html#cb577-1" tabindex="-1"></a>mrs <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(titanic_train<span class="sc">$</span>Name, <span class="st">&quot;Mrs.&quot;</span>)</span>
<span id="cb577-2"><a href="entering-and-cleaning-data-2.html#cb577-2" tabindex="-1"></a><span class="fu">head</span>(mrs)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE  TRUE FALSE FALSE</code></pre>
<p>The result is a logical vector, so <code>str_detect</code> can be used in <code>filter</code> to subset data to only rows where the passenger’s name includes “Mrs.”:</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="entering-and-cleaning-data-2.html#cb579-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb579-2"><a href="entering-and-cleaning-data-2.html#cb579-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Name, <span class="st">&quot;Mrs.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb579-3"><a href="entering-and-cleaning-data-2.html#cb579-3" tabindex="-1"></a>  <span class="fu">select</span>(Name) <span class="sc">%&gt;%</span></span>
<span id="cb579-4"><a href="entering-and-cleaning-data-2.html#cb579-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                                                  Name
## 1 Cumings, Mrs. John Bradley (Florence Briggs Thayer)
## 2        Futrelle, Mrs. Jacques Heath (Lily May Peel)
## 3   Johnson, Mrs. Oscar W (Elisabeth Vilhelmina Berg)</code></pre>
<p>There is an older, base R function called <code>grepl</code> that does something very similar (although note that the order of the arguments is reversed).</p>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="entering-and-cleaning-data-2.html#cb581-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb581-2"><a href="entering-and-cleaning-data-2.html#cb581-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&quot;Mrs.&quot;</span>, Name)) <span class="sc">%&gt;%</span></span>
<span id="cb581-3"><a href="entering-and-cleaning-data-2.html#cb581-3" tabindex="-1"></a>  <span class="fu">select</span>(Name) <span class="sc">%&gt;%</span></span>
<span id="cb581-4"><a href="entering-and-cleaning-data-2.html#cb581-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                                                  Name
## 1 Cumings, Mrs. John Bradley (Florence Briggs Thayer)
## 2        Futrelle, Mrs. Jacques Heath (Lily May Peel)
## 3   Johnson, Mrs. Oscar W (Elisabeth Vilhelmina Berg)</code></pre>
<p>The <code>str_extract</code> function can be used to extract a string (if it exists) from each value in a character vector. It follows similar conventions to <code>str_detect</code>:</p>
<pre><code>## Generic code
str_extract(string = [vector you want to check], 
           pattern = [pattern you want to check for])</code></pre>
<p>For example, you might want to extract “Mrs.” if it exists in a passenger’s name:</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="entering-and-cleaning-data-2.html#cb584-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb584-2"><a href="entering-and-cleaning-data-2.html#cb584-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mrs =</span> <span class="fu">str_extract</span>(Name, <span class="st">&quot;Mrs.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb584-3"><a href="entering-and-cleaning-data-2.html#cb584-3" tabindex="-1"></a>  <span class="fu">select</span>(Name, mrs) <span class="sc">%&gt;%</span></span>
<span id="cb584-4"><a href="entering-and-cleaning-data-2.html#cb584-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                                                  Name  mrs
## 1                             Braund, Mr. Owen Harris &lt;NA&gt;
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer) Mrs.
## 3                              Heikkinen, Miss. Laina &lt;NA&gt;</code></pre>
<p>Notice that now we’re creating a new column (<code>mrs</code>) that either has “Mrs.” (if there’s a match) or is missing (<code>NA</code>) if there’s not a match.</p>
<p>For this first example, we were looking for an exact string (“Mrs”). However, you can use patterns that match a particular pattern, but not an exact string. For example, we could expand the regular expression to find “Mr.” or “Mrs.”:</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="entering-and-cleaning-data-2.html#cb586-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb586-2"><a href="entering-and-cleaning-data-2.html#cb586-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title =</span> <span class="fu">str_extract</span>(Name, <span class="st">&quot;Mr</span><span class="sc">\\</span><span class="st">.|Mrs</span><span class="sc">\\</span><span class="st">.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb586-3"><a href="entering-and-cleaning-data-2.html#cb586-3" tabindex="-1"></a>  <span class="fu">select</span>(Name, title) <span class="sc">%&gt;%</span></span>
<span id="cb586-4"><a href="entering-and-cleaning-data-2.html#cb586-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                                                  Name title
## 1                             Braund, Mr. Owen Harris   Mr.
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer)  Mrs.
## 3                              Heikkinen, Miss. Laina  &lt;NA&gt;</code></pre>
<p>Note that this pattern uses a special operator (<code>|</code>) to find one pattern <strong>or</strong> another. Double backslashes (<code>\\</code>) <strong>escape</strong> the special character “.”.</p>
<iframe width="746" height="466" src="https://www.youtube.com/embed/JiMMJwwXPBM?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_10.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
<iframe width="746" height="466" src="https://www.youtube.com/embed/T0rmoLhs8sI?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_11.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
<p>As a note, in regular expressions, all of the following characters are special characters that need to be escaped with backslashes if you want to use them literally:</p>
<pre><code>. * + ^ ? $ \ | ( ) [ ] { }</code></pre>
<p>Notice that “Mr.” and “Mrs.” both start with “Mr”, end with “.”, and may or may not have an “s” in between.</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="entering-and-cleaning-data-2.html#cb589-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb589-2"><a href="entering-and-cleaning-data-2.html#cb589-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title =</span> <span class="fu">str_extract</span>(Name, <span class="st">&quot;Mr(s)*</span><span class="sc">\\</span><span class="st">.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb589-3"><a href="entering-and-cleaning-data-2.html#cb589-3" tabindex="-1"></a>  <span class="fu">select</span>(Name, title) <span class="sc">%&gt;%</span></span>
<span id="cb589-4"><a href="entering-and-cleaning-data-2.html#cb589-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                                                  Name title
## 1                             Braund, Mr. Owen Harris   Mr.
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer)  Mrs.
## 3                              Heikkinen, Miss. Laina  &lt;NA&gt;</code></pre>
<p>This pattern uses <code>(s)*</code> to match zero or more “s”s at this spot in the pattern.</p>
<p>In the previous code, we found “Mr.” and “Mrs.”, but missed “Miss.”. We could tweak the pattern again to try to capture that, as well. For all three, we have the pattern that it starts with “M”, has some lowercase letters, and then ends with “.”.</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="entering-and-cleaning-data-2.html#cb591-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb591-2"><a href="entering-and-cleaning-data-2.html#cb591-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title =</span> <span class="fu">str_extract</span>(Name, <span class="st">&quot;M[a-z]+</span><span class="sc">\\</span><span class="st">.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb591-3"><a href="entering-and-cleaning-data-2.html#cb591-3" tabindex="-1"></a>  <span class="fu">select</span>(Name, title) <span class="sc">%&gt;%</span></span>
<span id="cb591-4"><a href="entering-and-cleaning-data-2.html#cb591-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                                                  Name title
## 1                             Braund, Mr. Owen Harris   Mr.
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer)  Mrs.
## 3                              Heikkinen, Miss. Laina Miss.</code></pre>
<p>The last pattern used <code>[a-z]+</code> to match one or more lowercase letters. The <code>[a-z]</code>is a <strong>character class</strong>. </p>
<p>You can also match digits (<code>[0-9]</code>), uppercase letters (<code>[A-Z]</code>), just some letters (<code>[aeiou]</code>), etc. </p>
<p>You can negate a character class by starting it with <code>^</code>. For example, <code>[^0-9]</code> will match anything that <strong>isn’t</strong> a digit.</p>
<p>Sometimes, you want to match a pattern, but then only subset a part of it. For example, each passenger seems to have a title (“Mr.”, “Mrs.”, etc.) that comes after “,” and before “.”. We can use this pattern to find the title, but then we get some extra stuff with the match:</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="entering-and-cleaning-data-2.html#cb593-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb593-2"><a href="entering-and-cleaning-data-2.html#cb593-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title =</span> <span class="fu">str_extract</span>(Name, <span class="st">&quot;,</span><span class="sc">\\</span><span class="st">s[A-Za-z]*</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb593-3"><a href="entering-and-cleaning-data-2.html#cb593-3" tabindex="-1"></a>  <span class="fu">select</span>(title) <span class="sc">%&gt;%</span></span>
<span id="cb593-4"><a href="entering-and-cleaning-data-2.html#cb593-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##      title
## 1   , Mr. 
## 2  , Mrs. 
## 3 , Miss.</code></pre>
<p>As a note, in this pattern, <code>\\s</code> is used to match a space.</p>
<p>We are getting things like “, Mr. ”, when we really want “Mr”. We can use the <code>str_match</code> function to do this. We group what we want to extract from the pattern in parentheses, and then the function returns a matrix. The first column is the full pattern match, and each following column gives just what matches within the groups.</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="entering-and-cleaning-data-2.html#cb595-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">str_match</span>(titanic_train<span class="sc">$</span>Name,</span>
<span id="cb595-2"><a href="entering-and-cleaning-data-2.html#cb595-2" tabindex="-1"></a>          <span class="at">pattern =</span> <span class="st">&quot;,</span><span class="sc">\\</span><span class="st">s([A-Za-z]*)</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s&quot;</span>))</span></code></pre></div>
<pre><code>##      [,1]       [,2]  
## [1,] &quot;, Mr. &quot;   &quot;Mr&quot;  
## [2,] &quot;, Mrs. &quot;  &quot;Mrs&quot; 
## [3,] &quot;, Miss. &quot; &quot;Miss&quot;
## [4,] &quot;, Mrs. &quot;  &quot;Mrs&quot; 
## [5,] &quot;, Mr. &quot;   &quot;Mr&quot;  
## [6,] &quot;, Mr. &quot;   &quot;Mr&quot;</code></pre>
<p>To get just the title, then, we can run:</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="entering-and-cleaning-data-2.html#cb597-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb597-2"><a href="entering-and-cleaning-data-2.html#cb597-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title =</span> </span>
<span id="cb597-3"><a href="entering-and-cleaning-data-2.html#cb597-3" tabindex="-1"></a>           <span class="fu">str_match</span>(Name, <span class="st">&quot;,</span><span class="sc">\\</span><span class="st">s([A-Za-z]*)</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s&quot;</span>)[ , <span class="dv">2</span>]) <span class="sc">%&gt;%</span></span>
<span id="cb597-4"><a href="entering-and-cleaning-data-2.html#cb597-4" tabindex="-1"></a>  <span class="fu">select</span>(Name, title) <span class="sc">%&gt;%</span></span>
<span id="cb597-5"><a href="entering-and-cleaning-data-2.html#cb597-5" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                                                  Name title
## 1                             Braund, Mr. Owen Harris    Mr
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer)   Mrs
## 3                              Heikkinen, Miss. Laina  Miss</code></pre>
<p>The <code>[ , 2]</code> pulls out just the second column from the matrix returned by <code>str_match</code>.</p>
<p>Here are some of the most common titles:</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="entering-and-cleaning-data-2.html#cb599-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb599-2"><a href="entering-and-cleaning-data-2.html#cb599-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title =</span> </span>
<span id="cb599-3"><a href="entering-and-cleaning-data-2.html#cb599-3" tabindex="-1"></a>           <span class="fu">str_match</span>(Name, <span class="st">&quot;,</span><span class="sc">\\</span><span class="st">s([A-Za-z]*)</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s&quot;</span>)[ , <span class="dv">2</span>]) <span class="sc">%&gt;%</span></span>
<span id="cb599-4"><a href="entering-and-cleaning-data-2.html#cb599-4" tabindex="-1"></a>  <span class="fu">group_by</span>(title) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb599-5"><a href="entering-and-cleaning-data-2.html#cb599-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   title      n
##   &lt;chr&gt;  &lt;int&gt;
## 1 Mr       517
## 2 Miss     182
## 3 Mrs      125
## 4 Master    40
## 5 Dr         7</code></pre>
<p>Here are a few other examples of regular expressions in action with this dataset.</p>
<p>Get just names that start with (“^”) the letter “A”:</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="entering-and-cleaning-data-2.html#cb601-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb601-2"><a href="entering-and-cleaning-data-2.html#cb601-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Name, <span class="st">&quot;^A&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb601-3"><a href="entering-and-cleaning-data-2.html#cb601-3" tabindex="-1"></a>  <span class="fu">select</span>(Name) <span class="sc">%&gt;%</span></span>
<span id="cb601-4"><a href="entering-and-cleaning-data-2.html#cb601-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                                                        Name
## 1                                  Allen, Mr. William Henry
## 2                               Andersson, Mr. Anders Johan
## 3 Asplund, Mrs. Carl Oscar (Selma Augusta Emilia Johansson)</code></pre>
<p>Get names with “II” or “III” (<code>{2,}</code> says to match at least two times):</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="entering-and-cleaning-data-2.html#cb603-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb603-2"><a href="entering-and-cleaning-data-2.html#cb603-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Name, <span class="st">&quot;I{2,}&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb603-3"><a href="entering-and-cleaning-data-2.html#cb603-3" tabindex="-1"></a>  <span class="fu">select</span>(Name) <span class="sc">%&gt;%</span></span>
<span id="cb603-4"><a href="entering-and-cleaning-data-2.html#cb603-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                                   Name
## 1  Carter, Master. William Thornton II
## 2 Roebling, Mr. Washington Augustus II</code></pre>
<p>Get names with “Andersen” or “Anderson” (alternatives in square brackets):</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="entering-and-cleaning-data-2.html#cb605-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb605-2"><a href="entering-and-cleaning-data-2.html#cb605-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Name, <span class="st">&quot;Anders[eo]n&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb605-3"><a href="entering-and-cleaning-data-2.html#cb605-3" tabindex="-1"></a>  <span class="fu">select</span>(Name)</span></code></pre></div>
<pre><code>##                                              Name
## 1 Andersen-Jensen, Miss. Carla Christine Nielsine
## 2                             Anderson, Mr. Harry
## 3                    Walker, Mr. William Anderson
## 4                     Olsvigen, Mr. Thor Anderson
## 5      Soholt, Mr. Peter Andreas Lauritz Andersen</code></pre>
<p>Get names that start with (“^” outside of brackets) the letters “A” and “B”:</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="entering-and-cleaning-data-2.html#cb607-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb607-2"><a href="entering-and-cleaning-data-2.html#cb607-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Name, <span class="st">&quot;^[AB]&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb607-3"><a href="entering-and-cleaning-data-2.html#cb607-3" tabindex="-1"></a>  <span class="fu">select</span>(Name) <span class="sc">%&gt;%</span></span>
<span id="cb607-4"><a href="entering-and-cleaning-data-2.html#cb607-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##                       Name
## 1  Braund, Mr. Owen Harris
## 2 Allen, Mr. William Henry
## 3 Bonnell, Miss. Elizabeth</code></pre>
<p>Get names that end with (“$”) the letter “b” (either lowercase or uppercase):</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="entering-and-cleaning-data-2.html#cb609-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb609-2"><a href="entering-and-cleaning-data-2.html#cb609-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Name, <span class="st">&quot;[bB]$&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb609-3"><a href="entering-and-cleaning-data-2.html#cb609-3" tabindex="-1"></a>  <span class="fu">select</span>(Name) </span></code></pre></div>
<pre><code>##                        Name
## 1   Emir, Mr. Farred Chehab
## 2 Goldschmidt, Mr. George B
## 3           Cook, Mr. Jacob
## 4          Pasic, Mr. Jakob</code></pre>
<p>Some useful regular expression operators include:</p>
<table>
<thead>
<tr class="header">
<th align="left">Operator</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">.</td>
<td align="left">Any character</td>
</tr>
<tr class="even">
<td align="left">*</td>
<td align="left">Match 0 or more times (greedy)</td>
</tr>
<tr class="odd">
<td align="left">*?</td>
<td align="left">Match 0 or more times (non-greedy)</td>
</tr>
<tr class="even">
<td align="left">+</td>
<td align="left">Match 1 or more times (greedy)</td>
</tr>
<tr class="odd">
<td align="left">+?</td>
<td align="left">Match 1 or more times (non-greedy)</td>
</tr>
<tr class="even">
<td align="left">^</td>
<td align="left">Starts with (in brackets, negates)</td>
</tr>
<tr class="odd">
<td align="left">$</td>
<td align="left">Ends with</td>
</tr>
<tr class="even">
<td align="left">[…]</td>
<td align="left">Character classes</td>
</tr>
</tbody>
</table>
<p>For more on these patterns, see:</p>
<ul>
<li>Help file for the <code>stringi-search-regex</code> function in the <code>stringi</code> package (which should install when you install <code>stringr</code>)</li>
<li>Chapter 14 of R For Data Science</li>
<li><a href="http://gskinner.com/RegExr" class="uri">http://gskinner.com/RegExr</a>: Interactive tool for helping you build regular expression pattern strings</li>
</ul>
</div>
<div id="tidy-select" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> Tidy select<a href="entering-and-cleaning-data-2.html#tidy-select" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<iframe width="746" height="466" src="https://www.youtube.com/embed/u_y69p0cL-U?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_12.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
<p>There are <a href="https://dplyr.tidyverse.org/reference/select.html"><code>tidyverse</code></a> functions to make selecting variables more straightforwards. You can call these functions as arguments of the <code>select</code> function to streamline variable selection. Examples include: <code>starts_with()</code>, <code>ends_with()</code>, and <code>contains()</code>.</p>
<p>Here we use <code>starts_with("t")</code> to select all variables that begin with <code>t</code>.</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="entering-and-cleaning-data-2.html#cb611-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb611-2"><a href="entering-and-cleaning-data-2.html#cb611-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;t&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb611-3"><a href="entering-and-cleaning-data-2.html#cb611-3" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##             Ticket
## 1        A/5 21171
## 2         PC 17599
## 3 STON/O2. 3101282</code></pre>
<p>The are also tidyverse functions that allow us to easily operate on a selection of variables. These functions are called <a href="https://dplyr.tidyverse.org/reference/scoped.html"><code>scoped varients</code></a>. You can identify these functions by these <code>_all</code>, <code>_at</code>, and <code>_if</code> suffixes.</p>
<p>Here we use <code>select_if</code> to select all the numeric variables in a dataframe and covert their names to lower case (a handy function to tidy the variable names).</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="entering-and-cleaning-data-2.html#cb613-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb613-2"><a href="entering-and-cleaning-data-2.html#cb613-2" tabindex="-1"></a>  <span class="fu">select_if</span>(is.numeric, tolower) <span class="sc">%&gt;%</span></span>
<span id="cb613-3"><a href="entering-and-cleaning-data-2.html#cb613-3" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   passengerid survived pclass age sibsp parch    fare
## 1           1        0      3  22     1     0  7.2500
## 2           2        1      1  38     1     0 71.2833
## 3           3        1      3  26     0     0  7.9250</code></pre>
<p>The <code>select_if</code> function takes the following form.</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="entering-and-cleaning-data-2.html#cb615-1" tabindex="-1"></a><span class="do">## Generic code</span></span>
<span id="cb615-2"><a href="entering-and-cleaning-data-2.html#cb615-2" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> <span class="fu">select_if</span>(old_df,</span>
<span id="cb615-3"><a href="entering-and-cleaning-data-2.html#cb615-3" tabindex="-1"></a>                    .predicate [selects the variable to keep], </span>
<span id="cb615-4"><a href="entering-and-cleaning-data-2.html#cb615-4" tabindex="-1"></a>                    <span class="at">.funs =</span> [the <span class="cf">function</span> to apply to the selected columns])</span></code></pre></div>
<p>Here we use <code>select_at</code> to select all the variables that contain <code>ss</code> in their name and then covert their names to lower case (a handy function to tidy the variable names).</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="entering-and-cleaning-data-2.html#cb616-1" tabindex="-1"></a>titanic_train <span class="sc">%&gt;%</span></span>
<span id="cb616-2"><a href="entering-and-cleaning-data-2.html#cb616-2" tabindex="-1"></a>  <span class="fu">select_at</span>(<span class="fu">vars</span>(<span class="fu">contains</span>(<span class="st">&quot;ss&quot;</span>)), tolower) <span class="sc">%&gt;%</span></span>
<span id="cb616-3"><a href="entering-and-cleaning-data-2.html#cb616-3" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   passengerid pclass
## 1           1      3
## 2           2      1
## 3           3      3</code></pre>
</div>
<div id="in-course-exercise-chapter-6" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> In-course exercise Chapter 6<a href="entering-and-cleaning-data-2.html#in-course-exercise-chapter-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For today’s exercise, we’ll be using the following three datasets (click on the file name to access the correct file for today’s class for each dataset):</p>
<table>
<colgroup>
<col width="29%" />
<col width="70%" />
</colgroup>
<thead>
<tr class="header">
<th>File name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/data/country_timeseries.csv"><code>country_timeseries.csv</code></a></td>
<td>Ebola cases by country for the 2014 outbreak</td>
</tr>
<tr class="even">
<td><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/data/mexico_exposure.csv"><code>mexico_exposure.csv</code></a> and <a href="https://github.com/geanders/RProgrammingForResearch/raw/master/data/mexico_deaths.csv"><code>mexico_deaths.csv</code></a></td>
<td>Daily death counts and environmental measurements for Mexico City, Mexico, for 2008</td>
</tr>
<tr class="odd">
<td><a href="https://github.com/geanders/RProgrammingForResearch/tree/master/data/measles_data"><code>measles_data/</code></a></td>
<td>Number of cases of measles in CA since end of Dec. 2014</td>
</tr>
</tbody>
</table>
<p>Note that you likely have already downloaded all the files in the <code>measles_data</code> folder, since we used them in an earlier in-course exercise. If so, there is no need to re-download those files.</p>
<p>Here are the sources for this data:</p>
<ul>
<li><code>country_timeseries.csv</code> : <a href="https://github.com/cmrivers/ebola">Caitlin Rivers’ Ebola repository</a> (Caitlin originally collected this data from the WHO and WHO Situation reports)</li>
<li><code>mexico_exposure.csv</code> and <code>mexico_deaths.csv</code> : <a href="https://github.com/hadley/mexico-mortality/tree/master/disease">one of Hadley Wickham’s GitHub repos</a> (Hadley got the data originally from the Secretaria de Salud of Mexico’s website, although it appears the link is now broken. I separated the data into two dataframes so students could practice merging.)</li>
<li><code>measles_data/</code>: <a href="https://github.com/scarpino/measles-CA-2015">one of scarpino’s GitHub repos</a> (Data originally from pdfs from the <a href="https://www.cdph.ca.gov/HealthInfo/discond/Pages/MeaslesSurveillanceUpdates.aspx">California Department of Public Health</a>)</li>
</ul>
<div class="rmdwarning">
<p>
If you want to use these data further, you should go back and pull
them from their original sources. They are here only for use in R code
examples for this course.
</p>
</div>
<p>Here are some of the packages you will need for this exercise:</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb618-1"><a href="entering-and-cleaning-data-2.html#cb618-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb618-2"><a href="entering-and-cleaning-data-2.html#cb618-2" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb618-3"><a href="entering-and-cleaning-data-2.html#cb618-3" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span></code></pre></div>
<div id="designing-tidy-data" class="section level3 hasAnchor" number="6.7.1">
<h3><span class="header-section-number">6.7.1</span> Designing tidy data<a href="entering-and-cleaning-data-2.html#designing-tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Check out the <a href="https://github.com/geanders/RProgrammingForResearch/raw/master/data/country_timeseries.csv"><code>country_timeseries.csv</code> file</a> on Ebola for this week’s example data. Talk with your partner and decide what changes you would need to make to this dataset to turn it into a “tidy” dataset, in particular which of the five common “untidy” problems the data currently has and why.</li>
<li>Do the same for the data on daily mortality and daily weather in Mexico.</li>
<li>Do the same for the set of files with measles data.</li>
</ol>
</div>
<div id="easier-data-wrangling" class="section level3 hasAnchor" number="6.7.2">
<h3><span class="header-section-number">6.7.2</span> Easier data wrangling<a href="entering-and-cleaning-data-2.html#easier-data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Use <code>read_csv</code> to read the Mexico data (exposure and mortality) directly from GitHub into your R session. Call the dataframes <code>mex_deaths</code> and <code>mex_exp</code>.</li>
<li>Are there any values of the <code>day</code> column in <code>mex_deaths</code> that is not present in the <code>day</code> column of <code>mex_exp</code>? How about vice-versa? (Hint: There are a few ways you could check this. One is to try filtering down to just rows in one dataframe where the <code>day</code> values are not present in the <code>day</code> values from the other dataframe. The <code>%in%</code> logical vector may be useful.)</li>
<li>Merge the two datasets together to create the dataframe <code>mexico</code>. Exclude all columns except the outcome (deaths), day, and mean temperature.</li>
<li>Convert the day to a Date class.</li>
<li>If you did not already, try combining all the steps in the previous task into one “chained” pipeline of code using the pipe operator, <code>%&gt;%</code>.</li>
<li>Use this new dataframe to plot deaths by date in Mexico using <code>ggplot2</code>. The final plot should look like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-356-1.png" width="384" /></p>
<div id="example-r-code-10" class="section level4 hasAnchor" number="6.7.2.1">
<h4><span class="header-section-number">6.7.2.1</span> Example R code<a href="entering-and-cleaning-data-2.html#example-r-code-10" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Use <code>read_csv</code> to read the mexico data (exposure and mortality) directly from GitHub into your R session. Call the dataframes <code>mex_deaths</code> and <code>mex_exp</code>:</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="entering-and-cleaning-data-2.html#cb619-1" tabindex="-1"></a>deaths_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;https://github.com/geanders/RProgrammingForResearch/&quot;</span>,</span>
<span id="cb619-2"><a href="entering-and-cleaning-data-2.html#cb619-2" tabindex="-1"></a>                     <span class="st">&quot;raw/master/data/mexico_deaths.csv&quot;</span>)</span>
<span id="cb619-3"><a href="entering-and-cleaning-data-2.html#cb619-3" tabindex="-1"></a>mex_deaths <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(deaths_url)</span>
<span id="cb619-4"><a href="entering-and-cleaning-data-2.html#cb619-4" tabindex="-1"></a><span class="fu">head</span>(mex_deaths)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   day    deaths
##   &lt;chr&gt;   &lt;dbl&gt;
## 1 1/1/08    296
## 2 1/2/08    274
## 3 1/3/08    339
## 4 1/4/08    300
## 5 1/5/08    327
## 6 1/6/08    332</code></pre>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="entering-and-cleaning-data-2.html#cb621-1" tabindex="-1"></a>exposure_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;https://github.com/geanders/RProgrammingForResearch/&quot;</span>,</span>
<span id="cb621-2"><a href="entering-and-cleaning-data-2.html#cb621-2" tabindex="-1"></a>                       <span class="st">&quot;raw/master/data/mexico_exposure.csv&quot;</span>)</span>
<span id="cb621-3"><a href="entering-and-cleaning-data-2.html#cb621-3" tabindex="-1"></a>mex_exp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(exposure_url)</span>
<span id="cb621-4"><a href="entering-and-cleaning-data-2.html#cb621-4" tabindex="-1"></a><span class="fu">head</span>(mex_exp)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 14
##   day   temp_min temp_max temp_mean humidity  wind      NO    NO2    NOX      O3
##   &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
## 1 1/1/…      7.8     17.8     11.8      53.5 2.66  0.00925 0.0187 0.0278 NA     
## 2 1/2/…      2.6      9.8      6.64     61.7 3.35  0.00542 0.0187 0.0241  0.0201
## 3 1/3/…      1.1     15.6      7.04     59.9 1.89  0.0160  0.0381 0.0540  0.0184
## 4 1/4/…      3.1     20.6     10.9      57.5 1.20  0.0408  0.0584 0.0993  0.0215
## 5 1/5/…      6       21.3     13.4      45.7 0.988 0.0469  0.0602 0.107   0.0239
## 6 1/6/…      7.2     22.1     14.3      40.8 0.854 0.0286  0.051  0.0795  0.0249
## # ℹ 4 more variables: CO &lt;dbl&gt;, SO2 &lt;dbl&gt;, PM10 &lt;dbl&gt;, PM25 &lt;dbl&gt;</code></pre>
<p>Check if there are any values of the <code>day</code> column in <code>mex_deaths</code> that are not present in the <code>day</code> column of <code>mex_exp</code> and vice-versa.</p>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="entering-and-cleaning-data-2.html#cb623-1" tabindex="-1"></a>mex_deaths <span class="sc">%&gt;%</span> </span>
<span id="cb623-2"><a href="entering-and-cleaning-data-2.html#cb623-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(day <span class="sc">%in%</span> mex_exp<span class="sc">$</span>day))</span></code></pre></div>
<pre><code>## # A tibble: 0 × 2
## # ℹ 2 variables: day &lt;chr&gt;, deaths &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="entering-and-cleaning-data-2.html#cb625-1" tabindex="-1"></a>mex_exp <span class="sc">%&gt;%</span> </span>
<span id="cb625-2"><a href="entering-and-cleaning-data-2.html#cb625-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(day <span class="sc">%in%</span> mex_deaths<span class="sc">$</span>day))</span></code></pre></div>
<pre><code>## # A tibble: 0 × 14
## # ℹ 14 variables: day &lt;chr&gt;, temp_min &lt;dbl&gt;, temp_max &lt;dbl&gt;, temp_mean &lt;dbl&gt;,
## #   humidity &lt;dbl&gt;, wind &lt;dbl&gt;, NO &lt;dbl&gt;, NO2 &lt;dbl&gt;, NOX &lt;dbl&gt;, O3 &lt;dbl&gt;,
## #   CO &lt;dbl&gt;, SO2 &lt;dbl&gt;, PM10 &lt;dbl&gt;, PM25 &lt;dbl&gt;</code></pre>
<p>One important note is that, when you’re doing this check, you do <em>not</em> want to overwrite your original dataframe, so be sure that you do not reassign this output to <code>mex_deaths</code> or <code>mex_exp</code>.</p>
<p>An even quicker way to do check this is to create a logical vector that checks this and use <code>sum</code> to add up the values in the logical vector. If the sum is zero, that tells you that the logical check is never true, so there are no cases where there is a <code>day</code> value in one dataframe that is not also in the other dataframe.</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="entering-and-cleaning-data-2.html#cb627-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="sc">!</span>(mex_deaths<span class="sc">$</span>day <span class="sc">%in%</span> mex_exp<span class="sc">$</span>day))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="entering-and-cleaning-data-2.html#cb629-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="sc">!</span>(mex_exp<span class="sc">$</span>day <span class="sc">%in%</span> mex_deaths<span class="sc">$</span>day))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>Merge the two datasets together to create the dataframe <code>mexico</code>. Exclude all columns except the outcome (deaths), date, and mean temperature.</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="entering-and-cleaning-data-2.html#cb631-1" tabindex="-1"></a>mexico <span class="ot">&lt;-</span> <span class="fu">full_join</span>(mex_deaths, mex_exp, <span class="at">by =</span> <span class="st">&quot;day&quot;</span>) </span>
<span id="cb631-2"><a href="entering-and-cleaning-data-2.html#cb631-2" tabindex="-1"></a>mexico <span class="ot">&lt;-</span> <span class="fu">select</span>(mexico, day, deaths, temp_mean)</span></code></pre></div>
<p>Convert the date to a date class.</p>
<div class="sourceCode" id="cb632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb632-1"><a href="entering-and-cleaning-data-2.html#cb632-1" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="do">## For parsing dates</span></span>
<span id="cb632-2"><a href="entering-and-cleaning-data-2.html#cb632-2" tabindex="-1"></a>mexico <span class="ot">&lt;-</span> <span class="fu">mutate</span>(mexico, <span class="at">day =</span> <span class="fu">mdy</span>(day))</span></code></pre></div>
<p>Try combining all the steps in the previous task into one “chained” command:</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="entering-and-cleaning-data-2.html#cb633-1" tabindex="-1"></a>mexico <span class="ot">&lt;-</span> <span class="fu">full_join</span>(mex_deaths, mex_exp, <span class="at">by =</span> <span class="st">&quot;day&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb633-2"><a href="entering-and-cleaning-data-2.html#cb633-2" tabindex="-1"></a>        <span class="fu">select</span>(day, deaths, temp_mean) <span class="sc">%&gt;%</span></span>
<span id="cb633-3"><a href="entering-and-cleaning-data-2.html#cb633-3" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">day =</span> <span class="fu">mdy</span>(day))</span>
<span id="cb633-4"><a href="entering-and-cleaning-data-2.html#cb633-4" tabindex="-1"></a><span class="fu">head</span>(mexico)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   day        deaths temp_mean
##   &lt;date&gt;      &lt;dbl&gt;     &lt;dbl&gt;
## 1 2008-01-01    296     11.8 
## 2 2008-01-02    274      6.64
## 3 2008-01-03    339      7.04
## 4 2008-01-04    300     10.9 
## 5 2008-01-05    327     13.4 
## 6 2008-01-06    332     14.3</code></pre>
<p>Note that, in this case, all the values of <code>day</code> in <code>mex_deaths</code> have one and only one matching value in <code>mex_exp</code>, and vice-versa. Because of this, we would have gotten the same <code>mexico</code> dataframe if we’d used <code>inner_join</code>, <code>left_join</code> or <code>right_join</code> instead of <code>full_join</code>. The differences between these <code>*_join</code> functions come into play when you have some values of your matching column that aren’t in both of the dataframes you’re joining.</p>
<p>Use this new dataframe to plot deaths by date using <code>ggplot</code>:</p>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="entering-and-cleaning-data-2.html#cb635-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mexico) <span class="sc">+</span> </span>
<span id="cb635-2"><a href="entering-and-cleaning-data-2.html#cb635-2" tabindex="-1"></a>        <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> day, <span class="at">y =</span> deaths),</span>
<span id="cb635-3"><a href="entering-and-cleaning-data-2.html#cb635-3" tabindex="-1"></a>                   <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb635-4"><a href="entering-and-cleaning-data-2.html#cb635-4" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Date in 2008&quot;</span>, <span class="at">y =</span> <span class="st">&quot;# of deaths&quot;</span>) <span class="sc">+</span> </span>
<span id="cb635-5"><a href="entering-and-cleaning-data-2.html#cb635-5" tabindex="-1"></a>        <span class="fu">ggtitle</span>(<span class="st">&quot;Deaths by date&quot;</span>) <span class="sc">+</span> </span>
<span id="cb635-6"><a href="entering-and-cleaning-data-2.html#cb635-6" tabindex="-1"></a>        <span class="fu">theme_few</span>() </span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-363-1.png" width="384" /></p>
</div>
</div>
<div id="more-extensive-data-wrangling" class="section level3 hasAnchor" number="6.7.3">
<h3><span class="header-section-number">6.7.3</span> More extensive data wrangling<a href="entering-and-cleaning-data-2.html#more-extensive-data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Read the Ebola data directly from GitHub into your R session. Call the dataframe <code>ebola</code>.</li>
<li>Use <code>dplyr</code> functions to create a tidy dataset. First, change it from “wide” data to “long” data. Name the new column with the key <code>variable</code> and the new column with the values <code>count</code>. The first few lines of the “long” version of the dataset should look like this:</li>
</ul>
<pre><code>## # A tibble: 6 × 4
##   Date       Day variable           count
##   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;
## 1 1/5/2015   289 Cases_Guinea        2776
## 2 1/5/2015   289 Cases_Liberia         NA
## 3 1/5/2015   289 Cases_SierraLeone  10030
## 4 1/5/2015   289 Cases_Nigeria         NA
## 5 1/5/2015   289 Cases_Senegal         NA
## 6 1/5/2015   289 Cases_UnitedStates    NA</code></pre>
<ul>
<li>Convert the <code>Date</code> column to a Date class.</li>
<li>Use the <code>separate</code> function to separate the <code>variable</code> column into two columns, <code>type</code> (“Cases” or “Deaths”) and <code>country</code> (“Guinea”, “Liberia”, etc.). At this point, the data should look like this:</li>
</ul>
<pre><code>## # A tibble: 6 × 5
##   Date         Day type  country      count
##   &lt;date&gt;     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;
## 1 2015-01-05   289 Cases Guinea        2776
## 2 2015-01-05   289 Cases Liberia         NA
## 3 2015-01-05   289 Cases SierraLeone  10030
## 4 2015-01-05   289 Cases Nigeria         NA
## 5 2015-01-05   289 Cases Senegal         NA
## 6 2015-01-05   289 Cases UnitedStates    NA</code></pre>
<ul>
<li>Use the <code>pivot_wider</code> function to convert the data so you have separate columns for the two variables of numbers of <code>Cases</code> and <code>Deaths</code>. At this point, the dataframe should look like this:</li>
</ul>
<pre><code>## # A tibble: 6 × 5
##   Date         Day country      Cases Deaths
##   &lt;date&gt;     &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
## 1 2015-01-05   289 Guinea        2776   1786
## 2 2015-01-05   289 Liberia         NA     NA
## 3 2015-01-05   289 SierraLeone  10030   2977
## 4 2015-01-05   289 Nigeria         NA     NA
## 5 2015-01-05   289 Senegal         NA     NA
## 6 2015-01-05   289 UnitedStates    NA     NA</code></pre>
<ul>
<li>Remove any observations where counts of both cases and deaths are missing for that country on that date.</li>
<li>Now that your data is tidy, create one plot showing Ebola cases by date, faceted by country, and one showing Ebola deaths by date, also faceted by country. Try using the option <code>scales = "free_y"</code> in the <code>facet_wrap</code> function and see how that changes these graphs. Discuss with your group the advantages and disadvantages of using this option when creating these small multiple plots. The plots should look something like this (if you’re using the <code>scales = "free_y"</code> option):</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-367-1.png" width="768" /><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-367-2.png" width="768" /></p>
<ul>
<li>Based on these plots, what would your next questions be about this data before you used it for an analysis?</li>
<li>Can you put all of the steps of this cleaning process into just a few “chained” code pipelines using <code>%&gt;%</code>?</li>
<li>If you have extra time (super-challenge!): There is a function called <code>fct_reorder</code> in the <code>forcats</code> package that can be used to reorder the levels of a factor in a dataframe based on another column in the same dataframe. This function can be very useful for using a meaningful order when plotting. We’ll cover the <code>forcats</code> package in a later class, but today check out the help file for <code>fct_reorder</code> and see if you can figure out how to use it to reorder the small multiple plots in order of the maximum number of cases or deaths (for the two plots respectively) in each country. You’ll be able to do this by changing the code in <code>facet_wrap</code> from <code>~ country</code> to <code>~ fct_reorder(country, ...)</code>, but with the <code>...</code> replaced with certain arguments. If you’re getting stuck, try running the examples in the <code>fct_reorder</code> helpfile to get a feel for how this function can be used when plotting. The plots will look something like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-368-1.png" width="768" /><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-368-2.png" width="768" /></p>
<div id="example-r-code-11" class="section level4 hasAnchor" number="6.7.3.1">
<h4><span class="header-section-number">6.7.3.1</span> Example R code<a href="entering-and-cleaning-data-2.html#example-r-code-11" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Read the data in using <code>read_csv</code>.</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="entering-and-cleaning-data-2.html#cb639-1" tabindex="-1"></a>ebola_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;https://github.com/geanders/RProgrammingForResearch/&quot;</span>,</span>
<span id="cb639-2"><a href="entering-and-cleaning-data-2.html#cb639-2" tabindex="-1"></a>              <span class="st">&quot;raw/master/data/country_timeseries.csv&quot;</span>)</span>
<span id="cb639-3"><a href="entering-and-cleaning-data-2.html#cb639-3" tabindex="-1"></a>ebola <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(ebola_url)</span>
<span id="cb639-4"><a href="entering-and-cleaning-data-2.html#cb639-4" tabindex="-1"></a></span>
<span id="cb639-5"><a href="entering-and-cleaning-data-2.html#cb639-5" tabindex="-1"></a><span class="fu">head</span>(ebola)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 18
##   Date         Day Cases_Guinea Cases_Liberia Cases_SierraLeone Cases_Nigeria
##   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;         &lt;dbl&gt;
## 1 1/5/2015     289         2776            NA             10030            NA
## 2 1/4/2015     288         2775            NA              9780            NA
## 3 1/3/2015     287         2769          8166              9722            NA
## 4 1/2/2015     286           NA          8157                NA            NA
## 5 12/31/2014   284         2730          8115              9633            NA
## 6 12/28/2014   281         2706          8018              9446            NA
## # ℹ 12 more variables: Cases_Senegal &lt;dbl&gt;, Cases_UnitedStates &lt;dbl&gt;,
## #   Cases_Spain &lt;dbl&gt;, Cases_Mali &lt;dbl&gt;, Deaths_Guinea &lt;dbl&gt;,
## #   Deaths_Liberia &lt;dbl&gt;, Deaths_SierraLeone &lt;dbl&gt;, Deaths_Nigeria &lt;dbl&gt;,
## #   Deaths_Senegal &lt;dbl&gt;, Deaths_UnitedStates &lt;dbl&gt;, Deaths_Spain &lt;dbl&gt;,
## #   Deaths_Mali &lt;dbl&gt;</code></pre>
<p>Change the data to long data using the <code>pivoter_longer</code> function from <code>tidyr</code>:</p>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="entering-and-cleaning-data-2.html#cb641-1" tabindex="-1"></a>ebola <span class="ot">&lt;-</span> ebola <span class="sc">%&gt;%</span></span>
<span id="cb641-2"><a href="entering-and-cleaning-data-2.html#cb641-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="sc">-</span>Date, <span class="sc">-</span>Day), <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;count&quot;</span>)</span>
<span id="cb641-3"><a href="entering-and-cleaning-data-2.html#cb641-3" tabindex="-1"></a><span class="fu">head</span>(ebola)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   Date       Day variable           count
##   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;
## 1 1/5/2015   289 Cases_Guinea        2776
## 2 1/5/2015   289 Cases_Liberia         NA
## 3 1/5/2015   289 Cases_SierraLeone  10030
## 4 1/5/2015   289 Cases_Nigeria         NA
## 5 1/5/2015   289 Cases_Senegal         NA
## 6 1/5/2015   289 Cases_UnitedStates    NA</code></pre>
<p>Convert <code>Date</code> to a date class:</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="entering-and-cleaning-data-2.html#cb643-1" tabindex="-1"></a>ebola <span class="ot">&lt;-</span> ebola <span class="sc">%&gt;%</span></span>
<span id="cb643-2"><a href="entering-and-cleaning-data-2.html#cb643-2" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">mdy</span>(Date))</span>
<span id="cb643-3"><a href="entering-and-cleaning-data-2.html#cb643-3" tabindex="-1"></a><span class="fu">head</span>(ebola)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   Date         Day variable           count
##   &lt;date&gt;     &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;
## 1 2015-01-05   289 Cases_Guinea        2776
## 2 2015-01-05   289 Cases_Liberia         NA
## 3 2015-01-05   289 Cases_SierraLeone  10030
## 4 2015-01-05   289 Cases_Nigeria         NA
## 5 2015-01-05   289 Cases_Senegal         NA
## 6 2015-01-05   289 Cases_UnitedStates    NA</code></pre>
<p>Split <code>variable</code> into <code>type</code> and <code>country</code>:</p>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="entering-and-cleaning-data-2.html#cb645-1" tabindex="-1"></a>ebola <span class="ot">&lt;-</span> ebola <span class="sc">%&gt;%</span> </span>
<span id="cb645-2"><a href="entering-and-cleaning-data-2.html#cb645-2" tabindex="-1"></a>  <span class="fu">separate</span>(variable, <span class="fu">c</span>(<span class="st">&quot;type&quot;</span>, <span class="st">&quot;country&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb645-3"><a href="entering-and-cleaning-data-2.html#cb645-3" tabindex="-1"></a></span>
<span id="cb645-4"><a href="entering-and-cleaning-data-2.html#cb645-4" tabindex="-1"></a><span class="fu">head</span>(ebola)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   Date         Day type  country      count
##   &lt;date&gt;     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;
## 1 2015-01-05   289 Cases Guinea        2776
## 2 2015-01-05   289 Cases Liberia         NA
## 3 2015-01-05   289 Cases SierraLeone  10030
## 4 2015-01-05   289 Cases Nigeria         NA
## 5 2015-01-05   289 Cases Senegal         NA
## 6 2015-01-05   289 Cases UnitedStates    NA</code></pre>
<p>Convert the data so you have separate columns for the two variables of numbers of <code>Cases</code> and <code>Deaths</code>:</p>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="entering-and-cleaning-data-2.html#cb647-1" tabindex="-1"></a>ebola <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(ebola, <span class="at">names_from =</span> type, <span class="at">values_from =</span> count)</span>
<span id="cb647-2"><a href="entering-and-cleaning-data-2.html#cb647-2" tabindex="-1"></a><span class="fu">head</span>(ebola)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   Date         Day country      Cases Deaths
##   &lt;date&gt;     &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
## 1 2015-01-05   289 Guinea        2776   1786
## 2 2015-01-05   289 Liberia         NA     NA
## 3 2015-01-05   289 SierraLeone  10030   2977
## 4 2015-01-05   289 Nigeria         NA     NA
## 5 2015-01-05   289 Senegal         NA     NA
## 6 2015-01-05   289 UnitedStates    NA     NA</code></pre>
<p>Remove any observations where counts of cases or deaths are missing for that country:</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="entering-and-cleaning-data-2.html#cb649-1" tabindex="-1"></a>ebola <span class="ot">&lt;-</span> <span class="fu">filter</span>(ebola, <span class="sc">!</span><span class="fu">is.na</span>(Cases) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(Deaths))</span>
<span id="cb649-2"><a href="entering-and-cleaning-data-2.html#cb649-2" tabindex="-1"></a><span class="fu">head</span>(ebola)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   Date         Day country     Cases Deaths
##   &lt;date&gt;     &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;
## 1 2015-01-05   289 Guinea       2776   1786
## 2 2015-01-05   289 SierraLeone 10030   2977
## 3 2015-01-04   288 Guinea       2775   1781
## 4 2015-01-04   288 SierraLeone  9780   2943
## 5 2015-01-03   287 Guinea       2769   1767
## 6 2015-01-03   287 Liberia      8166   3496</code></pre>
<p>Now that your data is tidy, create one plot showing ebola cases by date, faceted by country, and one showing ebola deaths by date, also faceted by country:</p>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="entering-and-cleaning-data-2.html#cb651-1" tabindex="-1"></a><span class="fu">ggplot</span>(ebola, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Cases)) <span class="sc">+</span> </span>
<span id="cb651-2"><a href="entering-and-cleaning-data-2.html#cb651-2" tabindex="-1"></a>        <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb651-3"><a href="entering-and-cleaning-data-2.html#cb651-3" tabindex="-1"></a>        <span class="fu">facet_wrap</span>(<span class="sc">~</span> country, <span class="at">ncol =</span> <span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb651-4"><a href="entering-and-cleaning-data-2.html#cb651-4" tabindex="-1"></a>        <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-375-1.png" width="768" /></p>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="entering-and-cleaning-data-2.html#cb652-1" tabindex="-1"></a><span class="fu">ggplot</span>(ebola, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Deaths)) <span class="sc">+</span> </span>
<span id="cb652-2"><a href="entering-and-cleaning-data-2.html#cb652-2" tabindex="-1"></a>        <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb652-3"><a href="entering-and-cleaning-data-2.html#cb652-3" tabindex="-1"></a>        <span class="fu">facet_wrap</span>(<span class="sc">~</span> country, <span class="at">ncol =</span> <span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb652-4"><a href="entering-and-cleaning-data-2.html#cb652-4" tabindex="-1"></a>        <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-375-2.png" width="768" /></p>
<p>Try using the option <code>scales = "free_y"</code> in the <code>facet_wrap()</code> function (in the <code>gridExtra</code> package) and see how that changes these graphs:</p>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="entering-and-cleaning-data-2.html#cb653-1" tabindex="-1"></a><span class="fu">ggplot</span>(ebola, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Cases)) <span class="sc">+</span> </span>
<span id="cb653-2"><a href="entering-and-cleaning-data-2.html#cb653-2" tabindex="-1"></a>        <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb653-3"><a href="entering-and-cleaning-data-2.html#cb653-3" tabindex="-1"></a>        <span class="fu">facet_wrap</span>(<span class="sc">~</span> country, <span class="at">ncol =</span> <span class="dv">4</span>, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span> </span>
<span id="cb653-4"><a href="entering-and-cleaning-data-2.html#cb653-4" tabindex="-1"></a>        <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-376-1.png" width="768" /></p>
<div class="sourceCode" id="cb654"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb654-1"><a href="entering-and-cleaning-data-2.html#cb654-1" tabindex="-1"></a><span class="fu">ggplot</span>(ebola, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Deaths)) <span class="sc">+</span> </span>
<span id="cb654-2"><a href="entering-and-cleaning-data-2.html#cb654-2" tabindex="-1"></a>        <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb654-3"><a href="entering-and-cleaning-data-2.html#cb654-3" tabindex="-1"></a>        <span class="fu">facet_wrap</span>(<span class="sc">~</span> country, <span class="at">ncol =</span> <span class="dv">4</span>, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span> </span>
<span id="cb654-4"><a href="entering-and-cleaning-data-2.html#cb654-4" tabindex="-1"></a>        <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-376-2.png" width="768" /></p>
<p>Put all of the steps of this cleaning process into just a few “chaining” calls.</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb655-1"><a href="entering-and-cleaning-data-2.html#cb655-1" tabindex="-1"></a>ebola <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(ebola_url) <span class="sc">%&gt;%</span></span>
<span id="cb655-2"><a href="entering-and-cleaning-data-2.html#cb655-2" tabindex="-1"></a>         <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="sc">-</span>Date, <span class="sc">-</span>Day), <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;count&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb655-3"><a href="entering-and-cleaning-data-2.html#cb655-3" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">mdy</span>(Date)) <span class="sc">%&gt;%</span></span>
<span id="cb655-4"><a href="entering-and-cleaning-data-2.html#cb655-4" tabindex="-1"></a>         <span class="fu">separate</span>(variable, <span class="fu">c</span>(<span class="st">&quot;type&quot;</span>, <span class="st">&quot;country&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb655-5"><a href="entering-and-cleaning-data-2.html#cb655-5" tabindex="-1"></a>         <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type, <span class="at">values_from =</span> count) <span class="sc">%&gt;%</span></span>
<span id="cb655-6"><a href="entering-and-cleaning-data-2.html#cb655-6" tabindex="-1"></a>         <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Cases) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(Deaths))</span>
<span id="cb655-7"><a href="entering-and-cleaning-data-2.html#cb655-7" tabindex="-1"></a></span>
<span id="cb655-8"><a href="entering-and-cleaning-data-2.html#cb655-8" tabindex="-1"></a><span class="fu">ggplot</span>(ebola, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Cases)) <span class="sc">+</span> </span>
<span id="cb655-9"><a href="entering-and-cleaning-data-2.html#cb655-9" tabindex="-1"></a>        <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb655-10"><a href="entering-and-cleaning-data-2.html#cb655-10" tabindex="-1"></a>        <span class="fu">facet_wrap</span>(<span class="sc">~</span> country, <span class="at">ncol =</span> <span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb655-11"><a href="entering-and-cleaning-data-2.html#cb655-11" tabindex="-1"></a>        <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-377-1.png" width="768" /></p>
<div class="sourceCode" id="cb656"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb656-1"><a href="entering-and-cleaning-data-2.html#cb656-1" tabindex="-1"></a><span class="fu">ggplot</span>(ebola, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Deaths)) <span class="sc">+</span> </span>
<span id="cb656-2"><a href="entering-and-cleaning-data-2.html#cb656-2" tabindex="-1"></a>        <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb656-3"><a href="entering-and-cleaning-data-2.html#cb656-3" tabindex="-1"></a>        <span class="fu">facet_wrap</span>(<span class="sc">~</span> country, <span class="at">ncol =</span> <span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb656-4"><a href="entering-and-cleaning-data-2.html#cb656-4" tabindex="-1"></a>        <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-377-2.png" width="768" /></p>
<p>Use the <code>fct_reorder</code> function inside the <code>facet_wrap</code> function call to reorder the small-multiple graphs.</p>
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="entering-and-cleaning-data-2.html#cb657-1" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb657-2"><a href="entering-and-cleaning-data-2.html#cb657-2" tabindex="-1"></a><span class="fu">ggplot</span>(ebola, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Cases)) <span class="sc">+</span> </span>
<span id="cb657-3"><a href="entering-and-cleaning-data-2.html#cb657-3" tabindex="-1"></a>        <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb657-4"><a href="entering-and-cleaning-data-2.html#cb657-4" tabindex="-1"></a>        <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">fct_reorder</span>(country, Cases, <span class="at">.fun =</span> max, <span class="at">.desc =</span> <span class="cn">TRUE</span>),</span>
<span id="cb657-5"><a href="entering-and-cleaning-data-2.html#cb657-5" tabindex="-1"></a>                   <span class="at">ncol =</span> <span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb657-6"><a href="entering-and-cleaning-data-2.html#cb657-6" tabindex="-1"></a>        <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-378-1.png" width="768" /></p>
<div class="sourceCode" id="cb658"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb658-1"><a href="entering-and-cleaning-data-2.html#cb658-1" tabindex="-1"></a><span class="fu">ggplot</span>(ebola, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Deaths)) <span class="sc">+</span> </span>
<span id="cb658-2"><a href="entering-and-cleaning-data-2.html#cb658-2" tabindex="-1"></a>        <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb658-3"><a href="entering-and-cleaning-data-2.html#cb658-3" tabindex="-1"></a>        <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">fct_reorder</span>(country, Deaths, <span class="at">.fun =</span> max, <span class="at">.desc =</span> <span class="cn">TRUE</span>),</span>
<span id="cb658-4"><a href="entering-and-cleaning-data-2.html#cb658-4" tabindex="-1"></a>                   <span class="at">ncol =</span> <span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb658-5"><a href="entering-and-cleaning-data-2.html#cb658-5" tabindex="-1"></a>        <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-378-2.png" width="768" /></p>
</div>
</div>
<div id="tidying-vadeaths-data" class="section level3 hasAnchor" number="6.7.4">
<h3><span class="header-section-number">6.7.4</span> Tidying <code>VADeaths</code> data<a href="entering-and-cleaning-data-2.html#tidying-vadeaths-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R comes with a dataset called <code>VADeaths</code> that gives death rates per 1,000 people in Virginia in 1940 by age, sex, and rural / urban.</p>
<ul>
<li>Use <code>data("VADeaths")</code> to load this data. Make sure you understand what each column and row is showing – use the helpfile (<code>?VADeaths</code>) if you need.</li>
<li>Go through the three characteristics of tidy data and the five common problems in untidy data that we talked about in class. Sketch out (you’re welcome to use the whiteboards) what a tidy version of this data would look like.</li>
<li>Open a new R script file. Write R code to transform this dataset into a tidy dataset. Try using a pipe chain, with <code>%&gt;%</code> and tidyverse functions, to clean the data.</li>
<li>Use the tidy data to create the following graph:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/tidying_vadeaths-1.png" width="768" /></p>
<p>There is no example R code for this – try to figure out the code yourselves. I go over a solution in the following video. You may find the RStudio Data Wrangling cheatsheet helpful for remembering which tidyverse functions do what.</p>
<iframe width="747" height="467" src="https://www.youtube.com/embed/6R5QtrA01fk?list=PLuGPtwgRXxqJK_Jb-q0g9RQHZ-PponJs4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week6_part_6.pdf">Download</a>
a pdf of the lecture slides for this video.</p>
</div>
<div id="baby-names" class="section level3 hasAnchor" number="6.7.5">
<h3><span class="header-section-number">6.7.5</span> Baby names<a href="entering-and-cleaning-data-2.html#baby-names" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the Fall 2018 session, we seem to have an unusually high percent of the class
with names that start with an “A” or “K”. In this part of the exercise, we’ll see
if we can figure out whether the proportion of “A” and “K” names is unusual.</p>
<p>There is a package on CRAN called <code>babynames</code> with data on baby names by year in
the United States, based on data from the U.S.’s Social Security Administration.
We will use this data to compare the proportion of “A” and “K” names in our class
with the proportion in these baby names. We’ll also do a few other things to
explore this data.</p>
<ul>
<li>First, check out patterns in your own name. Is your name included in this
dataset? Has your name been used for males and females? How have the patterns
in the proportion of babies with your name, for both males and females, changed
over time (use a plot to look at this)?</li>
<li>In the year you were born, what were the 5 most popular baby names for males
and females? Try to come up with some attractive ways (figures and tables) to
show this.</li>
</ul>
<div id="example-r-code-12" class="section level4 hasAnchor" number="6.7.5.1">
<h4><span class="header-section-number">6.7.5.1</span> Example R code<a href="entering-and-cleaning-data-2.html#example-r-code-12" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Install and load the <code>babynames</code> package and its “babynames” dataframe:</p>
<div class="sourceCode" id="cb659"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb659-1"><a href="entering-and-cleaning-data-2.html#cb659-1" tabindex="-1"></a><span class="co"># install.packages(&quot;babynames&quot;)</span></span>
<span id="cb659-2"><a href="entering-and-cleaning-data-2.html#cb659-2" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb659-3"><a href="entering-and-cleaning-data-2.html#cb659-3" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;babynames&quot;</span>)</span></code></pre></div>
<p>Remember that you can use <code>?babynames</code> to find out more about this dataframe.</p>
<p>Check out patterns in your own name. Is your name included in this
dataset? You can use <code>filter</code> to create a subset of this data where you’ve
filtered down to just the rows with your name. To see if your name ever
shows up, you can use <code>count</code> on this dataframe—if your name never shows
up, then you will have 0 rows in the new dataframe. As long as there’s at least
one row, your name shows up somewhere. (If your name is not in here, try
your middle or last name, or the name of a fictional character you like, for
the rest of these exercises.)</p>
<div class="sourceCode" id="cb660"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb660-1"><a href="entering-and-cleaning-data-2.html#cb660-1" tabindex="-1"></a>my_name <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb660-2"><a href="entering-and-cleaning-data-2.html#cb660-2" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">&quot;Brooke&quot;</span>)</span>
<span id="cb660-3"><a href="entering-and-cleaning-data-2.html#cb660-3" tabindex="-1"></a>my_name <span class="sc">%&gt;%</span> </span>
<span id="cb660-4"><a href="entering-and-cleaning-data-2.html#cb660-4" tabindex="-1"></a>  <span class="fu">count</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##       n
##   &lt;int&gt;
## 1   174</code></pre>
<p>Has your name been used for males and females? To figure this out, you can group
the dataset with rows with your name by the <code>sex</code> column and then use <code>count</code> to
count the number of rows in the dataset for males and females. If your name has
only been used for one gender, then only one row will result from running this
code (for an example, try my first name, “Georgiana”).</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="entering-and-cleaning-data-2.html#cb662-1" tabindex="-1"></a>my_name <span class="sc">%&gt;%</span> </span>
<span id="cb662-2"><a href="entering-and-cleaning-data-2.html#cb662-2" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb662-3"><a href="entering-and-cleaning-data-2.html#cb662-3" tabindex="-1"></a>  <span class="fu">count</span>()</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
## # Groups:   sex [2]
##   sex       n
##   &lt;chr&gt; &lt;int&gt;
## 1 F        82
## 2 M        92</code></pre>
<p>How have the patterns in the proportion of babies with your name, for both males
and females, changed over time (use a plot to look at this)? To check this out,
I recommend you create a plot of the proportion of babies with your name (<code>prop</code>)
versus year (<code>year</code>). You can use color to show these patterns for males and
females separately. I’ve done some extra things here to (1) relabel the <code>sex</code>
factor, so the label shows up with clearer names and (2) change the labels for the
x-, y-, and color scales.</p>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="entering-and-cleaning-data-2.html#cb664-1" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb664-2"><a href="entering-and-cleaning-data-2.html#cb664-2" tabindex="-1"></a>my_name <span class="sc">%&gt;%</span> </span>
<span id="cb664-3"><a href="entering-and-cleaning-data-2.html#cb664-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">fct_recode</span>(sex, <span class="at">Male =</span> <span class="st">&quot;M&quot;</span>, <span class="at">Female =</span> <span class="st">&quot;F&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb664-4"><a href="entering-and-cleaning-data-2.html#cb664-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> prop, <span class="at">color =</span> sex)) <span class="sc">+</span> </span>
<span id="cb664-5"><a href="entering-and-cleaning-data-2.html#cb664-5" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb664-6"><a href="entering-and-cleaning-data-2.html#cb664-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Proportion of babies</span><span class="sc">\n</span><span class="st">of each sex named &#39;Brooke&#39;&quot;</span>,</span>
<span id="cb664-7"><a href="entering-and-cleaning-data-2.html#cb664-7" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-382-1.png" width="576" /></p>
<p>In the year you were born, what were the 5 most popular baby names for males
and females?</p>
<div class="sourceCode" id="cb665"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb665-1"><a href="entering-and-cleaning-data-2.html#cb665-1" tabindex="-1"></a>top_my_year <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb665-2"><a href="entering-and-cleaning-data-2.html#cb665-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">1981</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb665-3"><a href="entering-and-cleaning-data-2.html#cb665-3" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span> </span>
<span id="cb665-4"><a href="entering-and-cleaning-data-2.html#cb665-4" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prop)) <span class="sc">%&gt;%</span> </span>
<span id="cb665-5"><a href="entering-and-cleaning-data-2.html#cb665-5" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb665-6"><a href="entering-and-cleaning-data-2.html#cb665-6" tabindex="-1"></a></span>
<span id="cb665-7"><a href="entering-and-cleaning-data-2.html#cb665-7" tabindex="-1"></a>top_my_year</span></code></pre></div>
<pre><code>## # A tibble: 10 × 5
## # Groups:   sex [2]
##     year sex   name            n   prop
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;       &lt;int&gt;  &lt;dbl&gt;
##  1  1981 F     Jennifer    57049 0.0319
##  2  1981 F     Jessica     42532 0.0238
##  3  1981 F     Amanda      34374 0.0192
##  4  1981 F     Sarah       28173 0.0158
##  5  1981 F     Melissa     28000 0.0157
##  6  1981 M     Michael     68765 0.0369
##  7  1981 M     Christopher 50233 0.0270
##  8  1981 M     Matthew     43330 0.0233
##  9  1981 M     Jason       41932 0.0225
## 10  1981 M     David       40659 0.0218</code></pre>
<p>If you’d like to show this in a prettier way, you could show this as a table:</p>
<div class="sourceCode" id="cb667"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb667-1"><a href="entering-and-cleaning-data-2.html#cb667-1" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb667-2"><a href="entering-and-cleaning-data-2.html#cb667-2" tabindex="-1"></a>top_my_year <span class="sc">%&gt;%</span> </span>
<span id="cb667-3"><a href="entering-and-cleaning-data-2.html#cb667-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co"># Since the data is grouped by sex, this will rank</span></span>
<span id="cb667-4"><a href="entering-and-cleaning-data-2.html#cb667-4" tabindex="-1"></a>                           <span class="co"># separately for females and males</span></span>
<span id="cb667-5"><a href="entering-and-cleaning-data-2.html#cb667-5" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="co"># You have to ungroup before you can run `mutate` on `sex`</span></span>
<span id="cb667-6"><a href="entering-and-cleaning-data-2.html#cb667-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">fct_recode</span>(sex, <span class="at">Male =</span> <span class="st">&quot;M&quot;</span>, <span class="at">Female =</span> <span class="st">&quot;F&quot;</span>),</span>
<span id="cb667-7"><a href="entering-and-cleaning-data-2.html#cb667-7" tabindex="-1"></a>         <span class="at">percent =</span> <span class="fu">round</span>(<span class="dv">100</span> <span class="sc">*</span> prop, <span class="dv">1</span>),</span>
<span id="cb667-8"><a href="entering-and-cleaning-data-2.html#cb667-8" tabindex="-1"></a>         <span class="at">percent =</span> <span class="fu">paste</span>(percent, <span class="st">&quot;%&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb667-9"><a href="entering-and-cleaning-data-2.html#cb667-9" tabindex="-1"></a>  <span class="fu">select</span>(sex, rank, name, percent) <span class="sc">%&gt;%</span> </span>
<span id="cb667-10"><a href="entering-and-cleaning-data-2.html#cb667-10" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sex</th>
<th align="right">rank</th>
<th align="left">name</th>
<th align="left">percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Female</td>
<td align="right">1</td>
<td align="left">Jennifer</td>
<td align="left">3.2%</td>
</tr>
<tr class="even">
<td align="left">Female</td>
<td align="right">2</td>
<td align="left">Jessica</td>
<td align="left">2.4%</td>
</tr>
<tr class="odd">
<td align="left">Female</td>
<td align="right">3</td>
<td align="left">Amanda</td>
<td align="left">1.9%</td>
</tr>
<tr class="even">
<td align="left">Female</td>
<td align="right">4</td>
<td align="left">Sarah</td>
<td align="left">1.6%</td>
</tr>
<tr class="odd">
<td align="left">Female</td>
<td align="right">5</td>
<td align="left">Melissa</td>
<td align="left">1.6%</td>
</tr>
<tr class="even">
<td align="left">Male</td>
<td align="right">1</td>
<td align="left">Michael</td>
<td align="left">3.7%</td>
</tr>
<tr class="odd">
<td align="left">Male</td>
<td align="right">2</td>
<td align="left">Christopher</td>
<td align="left">2.7%</td>
</tr>
<tr class="even">
<td align="left">Male</td>
<td align="right">3</td>
<td align="left">Matthew</td>
<td align="left">2.3%</td>
</tr>
<tr class="odd">
<td align="left">Male</td>
<td align="right">4</td>
<td align="left">Jason</td>
<td align="left">2.3%</td>
</tr>
<tr class="even">
<td align="left">Male</td>
<td align="right">5</td>
<td align="left">David</td>
<td align="left">2.2%</td>
</tr>
</tbody>
</table>
<p>You could also show it as a figure:</p>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="entering-and-cleaning-data-2.html#cb668-1" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb668-2"><a href="entering-and-cleaning-data-2.html#cb668-2" tabindex="-1"></a>top_my_year <span class="sc">%&gt;%</span> </span>
<span id="cb668-3"><a href="entering-and-cleaning-data-2.html#cb668-3" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb668-4"><a href="entering-and-cleaning-data-2.html#cb668-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">fct_reorder</span>(name, prop, <span class="at">.desc =</span> <span class="cn">TRUE</span>),</span>
<span id="cb668-5"><a href="entering-and-cleaning-data-2.html#cb668-5" tabindex="-1"></a>         <span class="at">sex =</span> <span class="fu">fct_recode</span>(sex, <span class="at">Male =</span> <span class="st">&quot;M&quot;</span>, <span class="at">Female =</span> <span class="st">&quot;F&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb668-6"><a href="entering-and-cleaning-data-2.html#cb668-6" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> name)) <span class="sc">+</span> </span>
<span id="cb668-7"><a href="entering-and-cleaning-data-2.html#cb668-7" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">weight =</span> prop)) <span class="sc">+</span> </span>
<span id="cb668-8"><a href="entering-and-cleaning-data-2.html#cb668-8" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb668-9"><a href="entering-and-cleaning-data-2.html#cb668-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Percent of babies with name in 1981&quot;</span>) <span class="sc">+</span> </span>
<span id="cb668-10"><a href="entering-and-cleaning-data-2.html#cb668-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">+</span> </span>
<span id="cb668-11"><a href="entering-and-cleaning-data-2.html#cb668-11" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> percent) <span class="sc">+</span> </span>
<span id="cb668-12"><a href="entering-and-cleaning-data-2.html#cb668-12" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> sex, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span> </span>
<span id="cb668-13"><a href="entering-and-cleaning-data-2.html#cb668-13" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-385-1.png" width="576" /></p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="reproducible-research-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploring-data-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/geanders/RProgrammingForResearch/edit/master/06-databasics2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["RProgrammingForResearch.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
