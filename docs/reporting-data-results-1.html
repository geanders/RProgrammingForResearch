<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R Programming for Research</title>
  <meta name="description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R Programming for Research" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R Programming for Research" />
  
  <meta name="twitter:description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016." />
  

<meta name="author" content="Brooke Anderson and Rachel Severson">


<meta name="date" content="2018-10-10">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="exploring-data-1.html">
<link rel="next" href="reproducible-research-1.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Programming for Research</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Online course book, ERHS 535</a></li>
<li class="chapter" data-level="" data-path="course-information.html"><a href="course-information.html"><i class="fa fa-check"></i>Course information</a><ul>
<li class="chapter" data-level="0.1" data-path="course-information.html"><a href="course-information.html#course-overview"><i class="fa fa-check"></i><b>0.1</b> Course overview</a></li>
<li class="chapter" data-level="0.2" data-path="course-information.html"><a href="course-information.html#time-and-place"><i class="fa fa-check"></i><b>0.2</b> Time and place</a></li>
<li class="chapter" data-level="0.3" data-path="course-information.html"><a href="course-information.html#detailed-schedule"><i class="fa fa-check"></i><b>0.3</b> Detailed schedule</a></li>
<li class="chapter" data-level="0.4" data-path="course-information.html"><a href="course-information.html#grading"><i class="fa fa-check"></i><b>0.4</b> Grading</a><ul>
<li class="chapter" data-level="0.4.1" data-path="course-information.html"><a href="course-information.html#attendance-and-class-participation"><i class="fa fa-check"></i><b>0.4.1</b> Attendance and class participation</a></li>
<li class="chapter" data-level="0.4.2" data-path="course-information.html"><a href="course-information.html#weekly-in-course-group-exercises"><i class="fa fa-check"></i><b>0.4.2</b> Weekly in-course group exercises</a></li>
<li class="chapter" data-level="0.4.3" data-path="course-information.html"><a href="course-information.html#in-class-quizzes"><i class="fa fa-check"></i><b>0.4.3</b> In-class quizzes</a></li>
<li class="chapter" data-level="0.4.4" data-path="course-information.html"><a href="course-information.html#homework"><i class="fa fa-check"></i><b>0.4.4</b> Homework</a></li>
<li class="chapter" data-level="0.4.5" data-path="course-information.html"><a href="course-information.html#final-group-project"><i class="fa fa-check"></i><b>0.4.5</b> Final group project</a></li>
</ul></li>
<li class="chapter" data-level="0.5" data-path="course-information.html"><a href="course-information.html#course-set-up"><i class="fa fa-check"></i><b>0.5</b> Course set-up</a></li>
<li class="chapter" data-level="0.6" data-path="course-information.html"><a href="course-information.html#coursebook"><i class="fa fa-check"></i><b>0.6</b> Coursebook</a><ul>
<li class="chapter" data-level="0.6.1" data-path="course-information.html"><a href="course-information.html#other-helpful-books-not-required"><i class="fa fa-check"></i><b>0.6.1</b> Other helpful books (not required)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Part I: Preliminaries</b></span></li>
<li class="chapter" data-level="1" data-path="r-preliminaries.html"><a href="r-preliminaries.html"><i class="fa fa-check"></i><b>1</b> R Preliminaries</a><ul>
<li class="chapter" data-level="1.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#objectives"><i class="fa fa-check"></i><b>1.1</b> Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-and-r-studio"><i class="fa fa-check"></i><b>1.2</b> R and R Studio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#what-is-r"><i class="fa fa-check"></i><b>1.2.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#open-source-software"><i class="fa fa-check"></i><b>1.2.2</b> Open-source software</a></li>
<li class="chapter" data-level="1.2.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#what-is-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> What is RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#the-package-system"><i class="fa fa-check"></i><b>1.3</b> The “package” system</a><ul>
<li class="chapter" data-level="1.3.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-packages"><i class="fa fa-check"></i><b>1.3.1</b> R packages</a></li>
<li class="chapter" data-level="1.3.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#installing-from-cran"><i class="fa fa-check"></i><b>1.3.2</b> Installing from CRAN</a></li>
<li class="chapter" data-level="1.3.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#loading-an-installed-package"><i class="fa fa-check"></i><b>1.3.3</b> Loading an installed package</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="r-preliminaries.html"><a href="r-preliminaries.html#basic-code-conventions-of-r"><i class="fa fa-check"></i><b>1.4</b> Basic code conventions of R</a><ul>
<li class="chapter" data-level="1.4.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-objects"><i class="fa fa-check"></i><b>1.4.1</b> R objects</a></li>
<li class="chapter" data-level="1.4.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#rs-mvp-the-gets-arrow"><i class="fa fa-check"></i><b>1.4.2</b> R’s MVP: The <em>gets arrow</em></a></li>
<li class="chapter" data-level="1.4.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#assignment-operator-wars---vs."><i class="fa fa-check"></i><b>1.4.3</b> Assignment operator wars: <code>&lt;-</code> vs. <code>=</code></a></li>
<li class="chapter" data-level="1.4.4" data-path="r-preliminaries.html"><a href="r-preliminaries.html#naming-objects"><i class="fa fa-check"></i><b>1.4.4</b> Naming objects</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="r-preliminaries.html"><a href="r-preliminaries.html#rs-most-basic-object-types"><i class="fa fa-check"></i><b>1.5</b> R’s most basic object types</a><ul>
<li class="chapter" data-level="1.5.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#vectors"><i class="fa fa-check"></i><b>1.5.1</b> Vectors</a></li>
<li class="chapter" data-level="1.5.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#dataframes"><i class="fa fa-check"></i><b>1.5.2</b> Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="r-preliminaries.html"><a href="r-preliminaries.html#using-r-functions"><i class="fa fa-check"></i><b>1.6</b> Using R functions</a><ul>
<li class="chapter" data-level="1.6.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#function-structure"><i class="fa fa-check"></i><b>1.6.1</b> Function structure</a></li>
<li class="chapter" data-level="1.6.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#function-help-files"><i class="fa fa-check"></i><b>1.6.2</b> Function help files</a></li>
<li class="chapter" data-level="1.6.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#function-parameters"><i class="fa fa-check"></i><b>1.6.3</b> Function parameters</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-scripts"><i class="fa fa-check"></i><b>1.7</b> R scripts</a><ul>
<li class="chapter" data-level="1.7.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#commenting-code"><i class="fa fa-check"></i><b>1.7.1</b> Commenting code</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="r-preliminaries.html"><a href="r-preliminaries.html#in-course-exercise"><i class="fa fa-check"></i><b>1.8</b> In-course Exercise</a><ul>
<li class="chapter" data-level="1.8.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#about-the-dataset"><i class="fa fa-check"></i><b>1.8.1</b> About the dataset</a></li>
<li class="chapter" data-level="1.8.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#manually-creating-vectors-and-a-dataframe"><i class="fa fa-check"></i><b>1.8.2</b> Manually creating vectors and a dataframe</a></li>
<li class="chapter" data-level="1.8.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#installing-and-using-a-package"><i class="fa fa-check"></i><b>1.8.3</b> Installing and using a package</a></li>
<li class="chapter" data-level="1.8.4" data-path="r-preliminaries.html"><a href="r-preliminaries.html#getting-the-data-onto-your-computer"><i class="fa fa-check"></i><b>1.8.4</b> Getting the data onto your computer</a></li>
<li class="chapter" data-level="1.8.5" data-path="r-preliminaries.html"><a href="r-preliminaries.html#getting-the-data-into-r"><i class="fa fa-check"></i><b>1.8.5</b> Getting the data into R</a></li>
<li class="chapter" data-level="1.8.6" data-path="r-preliminaries.html"><a href="r-preliminaries.html#checking-out-the-data"><i class="fa fa-check"></i><b>1.8.6</b> Checking out the data</a></li>
<li class="chapter" data-level="1.8.7" data-path="r-preliminaries.html"><a href="r-preliminaries.html#using-the-data-to-answer-questions"><i class="fa fa-check"></i><b>1.8.7</b> Using the data to answer questions</a></li>
<li class="chapter" data-level="1.8.8" data-path="r-preliminaries.html"><a href="r-preliminaries.html#writing-your-code-as-an-r-script"><i class="fa fa-check"></i><b>1.8.8</b> Writing your code as an R script</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Part II: Basics</b></span></li>
<li class="chapter" data-level="2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html"><i class="fa fa-check"></i><b>2</b> Entering and cleaning data #1</a><ul>
<li class="chapter" data-level="2.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#objectives-1"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#overview"><i class="fa fa-check"></i><b>2.2</b> Overview</a></li>
<li class="chapter" data-level="2.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.3</b> Reading data into R</a><ul>
<li class="chapter" data-level="2.3.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-local-flat-files"><i class="fa fa-check"></i><b>2.3.1</b> Reading local flat files</a></li>
<li class="chapter" data-level="2.3.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-in-other-file-types"><i class="fa fa-check"></i><b>2.3.2</b> Reading in other file types</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directories-and-pathnames"><i class="fa fa-check"></i><b>2.4</b> Directories and pathnames</a><ul>
<li class="chapter" data-level="2.4.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directory-structure"><i class="fa fa-check"></i><b>2.4.1</b> Directory structure</a></li>
<li class="chapter" data-level="2.4.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#working-directory"><i class="fa fa-check"></i><b>2.4.2</b> Working directory</a></li>
<li class="chapter" data-level="2.4.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#file-and-directory-pathnames"><i class="fa fa-check"></i><b>2.4.3</b> File and directory pathnames</a></li>
<li class="chapter" data-level="2.4.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#diversion-paste"><i class="fa fa-check"></i><b>2.4.4</b> Diversion: <code>paste</code></a></li>
<li class="chapter" data-level="2.4.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-online-flat-files"><i class="fa fa-check"></i><b>2.4.5</b> Reading online flat files</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#data-cleaning"><i class="fa fa-check"></i><b>2.5</b> Data cleaning</a><ul>
<li class="chapter" data-level="2.5.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#renaming-columns"><i class="fa fa-check"></i><b>2.5.1</b> Renaming columns</a></li>
<li class="chapter" data-level="2.5.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#selecting-columns"><i class="fa fa-check"></i><b>2.5.2</b> Selecting columns</a></li>
<li class="chapter" data-level="2.5.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#add-or-change-columns"><i class="fa fa-check"></i><b>2.5.3</b> Add or change columns</a></li>
<li class="chapter" data-level="2.5.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#base-r-equivalents-to-dplyr-functions"><i class="fa fa-check"></i><b>2.5.4</b> Base R equivalents to <code>dplyr</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#dates-and-filtering"><i class="fa fa-check"></i><b>2.6</b> Dates and filtering</a><ul>
<li class="chapter" data-level="2.6.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#dates-in-r"><i class="fa fa-check"></i><b>2.6.1</b> Dates in R</a></li>
<li class="chapter" data-level="2.6.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#filtering-to-certain-rows"><i class="fa fa-check"></i><b>2.6.2</b> Filtering to certain rows</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#piping"><i class="fa fa-check"></i><b>2.7</b> Piping</a></li>
<li class="chapter" data-level="2.8" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#in-course-exercise-1"><i class="fa fa-check"></i><b>2.8</b> In-course Exercise</a><ul>
<li class="chapter" data-level="2.8.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#downloading-and-checking-out-the-example-data"><i class="fa fa-check"></i><b>2.8.1</b> Downloading and checking out the example data</a></li>
<li class="chapter" data-level="2.8.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-in-different-types-of-files"><i class="fa fa-check"></i><b>2.8.2</b> Reading in different types of files</a></li>
<li class="chapter" data-level="2.8.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directory-structure-1"><i class="fa fa-check"></i><b>2.8.3</b> Directory structure</a></li>
<li class="chapter" data-level="2.8.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#cleaning-up-data-1"><i class="fa fa-check"></i><b>2.8.4</b> Cleaning up data #1</a></li>
<li class="chapter" data-level="2.8.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#cleaning-up-data-2"><i class="fa fa-check"></i><b>2.8.5</b> Cleaning up data #2</a></li>
<li class="chapter" data-level="2.8.6" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#piping-1"><i class="fa fa-check"></i><b>2.8.6</b> Piping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploring-data-1.html"><a href="exploring-data-1.html"><i class="fa fa-check"></i><b>3</b> Exploring data #1</a><ul>
<li class="chapter" data-level="3.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#objectives-2"><i class="fa fa-check"></i><b>3.1</b> Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#data-from-a-package"><i class="fa fa-check"></i><b>3.2</b> Data from a package</a></li>
<li class="chapter" data-level="3.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#logical-vectors"><i class="fa fa-check"></i><b>3.3</b> Logical vectors</a></li>
<li class="chapter" data-level="3.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#simple-statistics-functions"><i class="fa fa-check"></i><b>3.4</b> Simple statistics functions</a><ul>
<li class="chapter" data-level="3.4.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#summary-statistics"><i class="fa fa-check"></i><b>3.4.1</b> Summary statistics</a></li>
<li class="chapter" data-level="3.4.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#summarize-function"><i class="fa fa-check"></i><b>3.4.2</b> <code>summarize</code> function</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#plots-to-explore-data"><i class="fa fa-check"></i><b>3.5</b> Plots to explore data</a><ul>
<li class="chapter" data-level="3.5.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#initializing-a-ggplot-object"><i class="fa fa-check"></i><b>3.5.1</b> Initializing a ggplot object</a></li>
<li class="chapter" data-level="3.5.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#plot-aesthetics"><i class="fa fa-check"></i><b>3.5.2</b> Plot aesthetics</a></li>
<li class="chapter" data-level="3.5.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#adding-geoms"><i class="fa fa-check"></i><b>3.5.3</b> Adding geoms</a></li>
<li class="chapter" data-level="3.5.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#constant-aesthetics"><i class="fa fa-check"></i><b>3.5.4</b> Constant aesthetics</a></li>
<li class="chapter" data-level="3.5.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#useful-plot-additions"><i class="fa fa-check"></i><b>3.5.5</b> Useful plot additions</a></li>
<li class="chapter" data-level="3.5.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#example-dataset"><i class="fa fa-check"></i><b>3.5.6</b> Example dataset</a></li>
<li class="chapter" data-level="3.5.7" data-path="exploring-data-1.html"><a href="exploring-data-1.html#histograms"><i class="fa fa-check"></i><b>3.5.7</b> Histograms</a></li>
<li class="chapter" data-level="3.5.8" data-path="exploring-data-1.html"><a href="exploring-data-1.html#scatterplots"><i class="fa fa-check"></i><b>3.5.8</b> Scatterplots</a></li>
<li class="chapter" data-level="3.5.9" data-path="exploring-data-1.html"><a href="exploring-data-1.html#boxplots"><i class="fa fa-check"></i><b>3.5.9</b> Boxplots</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#in-course-exercise-2"><i class="fa fa-check"></i><b>3.6</b> In-course exercise</a><ul>
<li class="chapter" data-level="3.6.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#loading-data-from-an-r-package"><i class="fa fa-check"></i><b>3.6.1</b> Loading data from an R package</a></li>
<li class="chapter" data-level="3.6.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-logical-statements"><i class="fa fa-check"></i><b>3.6.2</b> Exploring the data using logical statements</a></li>
<li class="chapter" data-level="3.6.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-simple-statistics-and-summarize"><i class="fa fa-check"></i><b>3.6.3</b> Exploring the data using simple statistics and <code>summarize</code></a></li>
<li class="chapter" data-level="3.6.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-1"><i class="fa fa-check"></i><b>3.6.4</b> Exploring the data using basic plots #1</a></li>
<li class="chapter" data-level="3.6.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-2"><i class="fa fa-check"></i><b>3.6.5</b> Exploring the data using basic plots #2</a></li>
<li class="chapter" data-level="3.6.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-3"><i class="fa fa-check"></i><b>3.6.6</b> Exploring the data using basic plots #3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html"><i class="fa fa-check"></i><b>4</b> Reporting data results #1</a><ul>
<li class="chapter" data-level="4.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#guidelines-for-good-plots"><i class="fa fa-check"></i><b>4.1</b> Guidelines for good plots</a></li>
<li class="chapter" data-level="4.2" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#high-data-density"><i class="fa fa-check"></i><b>4.2</b> High data density</a></li>
<li class="chapter" data-level="4.3" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#meaningful-labels"><i class="fa fa-check"></i><b>4.3</b> Meaningful labels</a></li>
<li class="chapter" data-level="4.4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#references"><i class="fa fa-check"></i><b>4.4</b> References</a></li>
<li class="chapter" data-level="4.5" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#highlighting"><i class="fa fa-check"></i><b>4.5</b> Highlighting</a></li>
<li class="chapter" data-level="4.6" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#order"><i class="fa fa-check"></i><b>4.6</b> Order</a></li>
<li class="chapter" data-level="4.7" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#small-multiples"><i class="fa fa-check"></i><b>4.7</b> Small multiples</a></li>
<li class="chapter" data-level="4.8" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#advanced-customization"><i class="fa fa-check"></i><b>4.8</b> Advanced customization</a><ul>
<li class="chapter" data-level="4.8.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#scales"><i class="fa fa-check"></i><b>4.8.1</b> Scales</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#to-find-out-more"><i class="fa fa-check"></i><b>4.9</b> To find out more</a></li>
<li class="chapter" data-level="4.10" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#in-course-exercise-3"><i class="fa fa-check"></i><b>4.10</b> In-course exercise</a><ul>
<li class="chapter" data-level="4.10.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#designing-a-plot"><i class="fa fa-check"></i><b>4.10.1</b> Designing a plot</a></li>
<li class="chapter" data-level="4.10.2" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#implementing-plot-guidelines-1"><i class="fa fa-check"></i><b>4.10.2</b> Implementing plot guidelines #1</a></li>
<li class="chapter" data-level="4.10.3" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#implementing-plot-guidelines-2"><i class="fa fa-check"></i><b>4.10.3</b> Implementing plot guidelines #2</a></li>
<li class="chapter" data-level="4.10.4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#data-visualization-cheatsheet"><i class="fa fa-check"></i><b>4.10.4</b> Data visualization cheatsheet</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html"><i class="fa fa-check"></i><b>5</b> Reproducible research #1</a><ul>
<li class="chapter" data-level="5.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#what-is-reproducible-research"><i class="fa fa-check"></i><b>5.1</b> What is reproducible research?</a></li>
<li class="chapter" data-level="5.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#markdown"><i class="fa fa-check"></i><b>5.2</b> Markdown</a></li>
<li class="chapter" data-level="5.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#literate-programming-in-r"><i class="fa fa-check"></i><b>5.3</b> Literate programming in R</a></li>
<li class="chapter" data-level="5.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#style-guidelines"><i class="fa fa-check"></i><b>5.4</b> Style guidelines</a><ul>
<li class="chapter" data-level="5.4.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#line-length"><i class="fa fa-check"></i><b>5.4.1</b> Line length</a></li>
<li class="chapter" data-level="5.4.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#spacing"><i class="fa fa-check"></i><b>5.4.2</b> Spacing</a></li>
<li class="chapter" data-level="5.4.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#semicolons"><i class="fa fa-check"></i><b>5.4.3</b> Semicolons</a></li>
<li class="chapter" data-level="5.4.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#commenting"><i class="fa fa-check"></i><b>5.4.4</b> Commenting</a></li>
<li class="chapter" data-level="5.4.5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#indentation"><i class="fa fa-check"></i><b>5.4.5</b> Indentation</a></li>
<li class="chapter" data-level="5.4.6" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#code-grouping"><i class="fa fa-check"></i><b>5.4.6</b> Code grouping</a></li>
<li class="chapter" data-level="5.4.7" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#broader-guidelines"><i class="fa fa-check"></i><b>5.4.7</b> Broader guidelines</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#more-with-knitr"><i class="fa fa-check"></i><b>5.5</b> More with knitr</a><ul>
<li class="chapter" data-level="5.5.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#equations-in-knitr"><i class="fa fa-check"></i><b>5.5.1</b> Equations in <code>knitr</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#figures-from-file"><i class="fa fa-check"></i><b>5.5.2</b> Figures from file</a></li>
<li class="chapter" data-level="5.5.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#saving-graphics-files"><i class="fa fa-check"></i><b>5.5.3</b> Saving graphics files</a></li>
<li class="chapter" data-level="5.5.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#tables-in-r-markdown"><i class="fa fa-check"></i><b>5.5.4</b> Tables in R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#in-course-exercise-4"><i class="fa fa-check"></i><b>5.6</b> In-course exercise</a><ul>
<li class="chapter" data-level="5.6.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#creating-a-markdown-document"><i class="fa fa-check"></i><b>5.6.1</b> Creating a Markdown document</a></li>
<li class="chapter" data-level="5.6.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#adding-in-r-code"><i class="fa fa-check"></i><b>5.6.2</b> Adding in R code</a></li>
<li class="chapter" data-level="5.6.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#working-with-r-markdown-documents"><i class="fa fa-check"></i><b>5.6.3</b> Working with R Markdown documents</a></li>
<li class="chapter" data-level="5.6.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#r-style-guidelines"><i class="fa fa-check"></i><b>5.6.4</b> R style guidelines</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Part III: Intermediate</b></span></li>
<li class="chapter" data-level="6" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html"><i class="fa fa-check"></i><b>6</b> Entering and cleaning data #2</a><ul>
<li class="chapter" data-level="6.1" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#joining-datasets"><i class="fa fa-check"></i><b>6.1</b> Joining datasets</a></li>
<li class="chapter" data-level="6.2" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#tidy-data"><i class="fa fa-check"></i><b>6.2</b> Tidy data</a></li>
<li class="chapter" data-level="6.3" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#gathering"><i class="fa fa-check"></i><b>6.3</b> Gathering</a></li>
<li class="chapter" data-level="6.4" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#working-with-factors"><i class="fa fa-check"></i><b>6.4</b> Working with factors</a></li>
<li class="chapter" data-level="6.5" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#string-operations-and-regular-expressions"><i class="fa fa-check"></i><b>6.5</b> String operations and regular expressions</a></li>
<li class="chapter" data-level="6.6" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#in-course-exercise-5"><i class="fa fa-check"></i><b>6.6</b> In-course exercise</a><ul>
<li class="chapter" data-level="6.6.1" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#designing-tidy-data"><i class="fa fa-check"></i><b>6.6.1</b> Designing tidy data</a></li>
<li class="chapter" data-level="6.6.2" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#easier-data-wrangling"><i class="fa fa-check"></i><b>6.6.2</b> Easier data wrangling</a></li>
<li class="chapter" data-level="6.6.3" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#more-extensive-data-wrangling"><i class="fa fa-check"></i><b>6.6.3</b> More extensive data wrangling</a></li>
<li class="chapter" data-level="6.6.4" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#tidying-vadeaths-data"><i class="fa fa-check"></i><b>6.6.4</b> Tidying <code>VADeaths</code> data</a></li>
<li class="chapter" data-level="6.6.5" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#exploring-fatality-analysis-reporting-system-fars-data"><i class="fa fa-check"></i><b>6.6.5</b> Exploring Fatality Analysis Reporting System (FARS) data</a></li>
<li class="chapter" data-level="6.6.6" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#baby-names"><i class="fa fa-check"></i><b>6.6.6</b> Baby names</a></li>
<li class="chapter" data-level="6.6.7" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#more-with-baby-names"><i class="fa fa-check"></i><b>6.6.7</b> More with baby names</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="exploring-data-2.html"><a href="exploring-data-2.html"><i class="fa fa-check"></i><b>7</b> Exploring data #2</a><ul>
<li class="chapter" data-level="7.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#simple-statistical-tests-in-r"><i class="fa fa-check"></i><b>7.1</b> Simple statistical tests in R</a></li>
<li class="chapter" data-level="7.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#matrices"><i class="fa fa-check"></i><b>7.2</b> Matrices</a></li>
<li class="chapter" data-level="7.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#lists"><i class="fa fa-check"></i><b>7.3</b> Lists</a></li>
<li class="chapter" data-level="7.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#regression-models"><i class="fa fa-check"></i><b>7.4</b> Regression models</a><ul>
<li class="chapter" data-level="7.4.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#formula-structure"><i class="fa fa-check"></i><b>7.4.1</b> Formula structure</a></li>
<li class="chapter" data-level="7.4.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#linear-models"><i class="fa fa-check"></i><b>7.4.2</b> Linear models</a></li>
<li class="chapter" data-level="7.4.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#generalized-linear-models-glms"><i class="fa fa-check"></i><b>7.4.3</b> Generalized linear models (GLMs)</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="exploring-data-2.html"><a href="exploring-data-2.html#handling-model-objects"><i class="fa fa-check"></i><b>7.5</b> Handling model objects</a><ul>
<li class="chapter" data-level="7.5.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomtidy"><i class="fa fa-check"></i><b>7.5.1</b> broom::tidy</a></li>
<li class="chapter" data-level="7.5.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomaugment"><i class="fa fa-check"></i><b>7.5.2</b> broom::augment</a></li>
<li class="chapter" data-level="7.5.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomglance"><i class="fa fa-check"></i><b>7.5.3</b> broom::glance</a></li>
<li class="chapter" data-level="7.5.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#references-statistics-in-r"><i class="fa fa-check"></i><b>7.5.4</b> References– statistics in R</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="exploring-data-2.html"><a href="exploring-data-2.html#in-course-exercise-6"><i class="fa fa-check"></i><b>7.6</b> In-course exercise</a><ul>
<li class="chapter" data-level="7.6.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#running-a-simple-statistical-test"><i class="fa fa-check"></i><b>7.6.1</b> Running a simple statistical test</a></li>
<li class="chapter" data-level="7.6.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#using-regression-models-to-explore-data-1"><i class="fa fa-check"></i><b>7.6.2</b> Using regression models to explore data #1</a></li>
<li class="chapter" data-level="7.6.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#using-regression-models-to-explore-data-2"><i class="fa fa-check"></i><b>7.6.3</b> Using regression models to explore data #2</a></li>
<li class="chapter" data-level="7.6.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#exploring-fatality-analysis-reporting-system-fars-data-1"><i class="fa fa-check"></i><b>7.6.4</b> Exploring Fatality Analysis Reporting System (FARS) data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html"><i class="fa fa-check"></i><b>8</b> Reporting data results #2</a><ul>
<li class="chapter" data-level="8.1" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#functions"><i class="fa fa-check"></i><b>8.1</b> Functions</a><ul>
<li class="chapter" data-level="8.1.1" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#if-else-statements"><i class="fa fa-check"></i><b>8.1.1</b> if / else statements</a></li>
<li class="chapter" data-level="8.1.2" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#some-other-control-structures"><i class="fa fa-check"></i><b>8.1.2</b> Some other control structures</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#running-the-same-function-multiple-times"><i class="fa fa-check"></i><b>8.2</b> Running the same function multiple times</a><ul>
<li class="chapter" data-level="8.2.1" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#but-but-what-about-nested-loops-etc"><i class="fa fa-check"></i><b>8.2.1</b> But, but what about nested loops etc?</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#in-course-exercise-7"><i class="fa fa-check"></i><b>8.3</b> In-course exercise</a><ul>
<li class="chapter" data-level="8.3.1" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#using-functions-to-load-data"><i class="fa fa-check"></i><b>8.3.1</b> Using functions to load data</a></li>
<li class="chapter" data-level="8.3.2" data-path="reporting-data-results-2.html"><a href="reporting-data-results-2.html#predicting-running-times"><i class="fa fa-check"></i><b>8.3.2</b> Predicting running times</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html"><i class="fa fa-check"></i><b>A</b> Appendix A: Vocabulary</a><ul>
<li class="chapter" data-level="A.1" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-1r-preliminaries-updated-for-2018"><i class="fa fa-check"></i><b>A.1</b> Quiz 1—R Preliminaries (Updated for 2018)</a></li>
<li class="chapter" data-level="A.2" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-2entering-cleaning-data-1-updated-for-2018"><i class="fa fa-check"></i><b>A.2</b> Quiz 2—Entering / cleaning data #1 (Updated for 2018)</a></li>
<li class="chapter" data-level="A.3" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-3-updated-for-2018"><i class="fa fa-check"></i><b>A.3</b> Quiz 3 (Updated for 2018)</a></li>
<li class="chapter" data-level="A.4" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-4-updated-for-2018"><i class="fa fa-check"></i><b>A.4</b> Quiz 4 (Updated for 2018)</a></li>
<li class="chapter" data-level="A.5" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-5-updated-for-2018-no-updates-since-last-week"><i class="fa fa-check"></i><b>A.5</b> Quiz 5 (Updated for 2018; no updates since last week)</a></li>
<li class="chapter" data-level="A.6" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-6"><i class="fa fa-check"></i><b>A.6</b> Quiz 6</a></li>
<li class="chapter" data-level="A.7" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-7"><i class="fa fa-check"></i><b>A.7</b> Quiz 7</a></li>
<li class="chapter" data-level="A.8" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-8"><i class="fa fa-check"></i><b>A.8</b> Quiz 8</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html"><i class="fa fa-check"></i><b>B</b> Appendix B: Homework</a><ul>
<li class="chapter" data-level="B.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-1-updated-for-2018"><i class="fa fa-check"></i><b>B.1</b> Homework #1 (Updated for 2018)</a><ul>
<li class="chapter" data-level="B.1.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#option-1"><i class="fa fa-check"></i><b>B.1.1</b> Option 1</a></li>
<li class="chapter" data-level="B.1.2" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#option-2"><i class="fa fa-check"></i><b>B.1.2</b> Option 2</a></li>
<li class="chapter" data-level="B.1.3" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#special-swirl-commands"><i class="fa fa-check"></i><b>B.1.3</b> Special swirl commands</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-2-updated-for-2018"><i class="fa fa-check"></i><b>B.2</b> Homework #2 (Updated for 2018)</a></li>
<li class="chapter" data-level="B.3" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-3-updated-for-2018"><i class="fa fa-check"></i><b>B.3</b> Homework #3 (Updated for 2018)</a></li>
<li class="chapter" data-level="B.4" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-4"><i class="fa fa-check"></i><b>B.4</b> Homework #4</a></li>
<li class="chapter" data-level="B.5" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-5"><i class="fa fa-check"></i><b>B.5</b> Homework #5</a></li>
<li class="chapter" data-level="B.6" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-6"><i class="fa fa-check"></i><b>B.6</b> Homework #6</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Programming for Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reporting-data-results-1" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Reporting data results #1</h1>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week4.pdf">Download</a> a pdf of the lecture slides covering this topic.</p>
<div id="guidelines-for-good-plots" class="section level2">
<h2><span class="header-section-number">4.1</span> Guidelines for good plots</h2>
<p>There are a number of very thoughtful books and articles about creating graphics that effectively communicate information. Some of the authors I highly recommend (and from whose work I’ve pulled the guidelines for good graphics we’ll talk about this week) are:</p>
<ul>
<li>Edward Tufte</li>
<li>Howard Wainer</li>
<li>Stephen Few</li>
<li>Nathan Yau</li>
</ul>
<p>You should plan, in particular, to read <em>The Visual Display of Quantitative Information</em> by Edward Tufte before you graduate.</p>
<p>This week, we’ll focus on six guidelines for good graphics, based on the writings of these and other specialists in data display. The guidelines are:</p>
<ol style="list-style-type: decimal">
<li>Aim for high data density.</li>
<li>Use clear, meaningful labels.</li>
<li>Provide useful references.</li>
<li>Highlight interesting aspects of the data.</li>
<li>Make order meaningful.</li>
<li>When possible, use small multiples.</li>
</ol>
<p>For the examples, I’ll use <code>dplyr</code> for data cleaning and, for plotting, the packages <code>ggplot2</code>, <code>gridExtra</code>, and <code>ggthemes</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse) ## Loads `dplyr` and `ggplot2`</code></pre></div>
<pre><code>## Warning: package &#39;purrr&#39; was built under R version 3.4.4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gridExtra)
<span class="kw">library</span>(ggthemes)</code></pre></div>
<p>You can load the data for today’s examples with the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(faraway)
<span class="kw">data</span>(nepali)
<span class="kw">data</span>(worldcup)

<span class="kw">library</span>(dlnm)
<span class="kw">data</span>(chicagoNMMAPS)
chic &lt;-<span class="st"> </span>chicagoNMMAPS
chic_july &lt;-<span class="st"> </span>chic <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(month <span class="op">==</span><span class="st"> </span><span class="dv">7</span> <span class="op">&amp;</span><span class="st"> </span>year <span class="op">==</span><span class="st"> </span><span class="dv">1995</span>)</code></pre></div>
</div>
<div id="high-data-density" class="section level2">
<h2><span class="header-section-number">4.2</span> High data density</h2>
<blockquote>
<p>Guideline 1: <strong>Aim for high data density.</strong></p>
</blockquote>
<p>You should try to increase, as much as possible, the <strong>data to ink ratio</strong> in your graphs. This is the ratio of “ink” providing information to all ink used in the figure. One way to think about this is that the only graphs you make that use up a lot of your printer’s ink should be packed with information.</p>
<p>The two graphs in Figure <a href="reporting-data-results-1.html#fig:datainkratio1">4.1</a> show the same information, but use very different amounts of ink. Each shows the number of players in each of four positions in the <code>worldcup</code> dataset. Notice how, in the plot on the right, a single dot for each category shows the same information that a whole filled bar is showing on the left. Further, the plot on the right has removed the gridded background, removing even more “ink”.</p>
<div class="figure" style="text-align: center"><span id="fig:datainkratio1"></span>
<img src="RProgrammingForResearch_files/figure-html/datainkratio1-1.png" alt="Example of plots with lower (left) and higher (right) data-to-ink ratios. Each plot shows the number of players in each position in the worldcup dataset from the faraway package." width="768" />
<p class="caption">
Figure 4.1: Example of plots with lower (left) and higher (right) data-to-ink ratios. Each plot shows the number of players in each position in the worldcup dataset from the faraway package.
</p>
</div>
<p>Figure <a href="reporting-data-results-1.html#fig:datainkratio2">4.2</a> gives another example of two plots that show the same information but with very different data densities. This figure uses the <code>chicagoNMMAPS</code> data from the <code>dlnm</code> package, which includes daily mortality, weather, and air pollution data for Chicago, IL. Both plots show daily mortality counts during July 1995, when a very severe heat wave hit Chicago. Notice how many of the elements in the plot on the left, including the shading under the mortality time series and the colored background and grid lines, are unnecessary for interpreting the message from the data.</p>
<div class="figure" style="text-align: center"><span id="fig:datainkratio2"></span>
<img src="RProgrammingForResearch_files/figure-html/datainkratio2-1.png" alt="Example of plots with lower (left) and higher (right) data-to-ink ratios. Each plot shows daily mortality in Chicago, IL, in July 1995 using the chicagoNMMAPS data from the dlnm package." width="768" />
<p class="caption">
Figure 4.2: Example of plots with lower (left) and higher (right) data-to-ink ratios. Each plot shows daily mortality in Chicago, IL, in July 1995 using the chicagoNMMAPS data from the dlnm package.
</p>
</div>
<p>By increasing the data-to-ink ratio in a plot, you can help viewers see the message of the data more quickly. A cluttered plot is harder to interpret. Further, you leave room to add some of the other elements I’ll talk about, including highlighting interesting data and adding useful references. Notice how the plots on the left in Figures <a href="reporting-data-results-1.html#fig:datainkratio1">4.1</a> and <a href="reporting-data-results-1.html#fig:datainkratio2">4.2</a> are already cluttered and leave little room for adding extra elements, while the plots on the right of those figures have much more room for additions.</p>
<p>One quick way to increase data density in <code>ggplot2</code> is to change the <em>theme</em> for the plot. The theme specifies a number of the “background” elements to a plot, including elements like the plot grid, background color, and the font used for labeling. Some themes come with <code>ggplot2</code>, including:</p>
<ul>
<li><code>theme_bw</code></li>
<li><code>theme_minimal</code></li>
<li><code>theme_void</code></li>
</ul>
<p>You can find more themes in packages that extend <code>ggplot2</code>. The <code>ggthemes</code> package, in particular, has some excellent additional themes.</p>
<p>Figures <a href="reporting-data-results-1.html#fig:themeexamples">4.3</a> shows some examples of the effects of using different themes. All show the same information– a plot of daily deaths in Chicago in July 1995. The top left graph shows the graph with the default theme. The other plots show the effects of adding different themes, including the black-and-white theme that comes with <code>ggplot2</code> (top right) and various themes from the <code>ggthemes</code> package. You can even use themes to add some questionable choices for different elements, like the Excel theme (bottom left).</p>
<div class="figure" style="text-align: center"><span id="fig:themeexamples"></span>
<img src="RProgrammingForResearch_files/figure-html/themeexamples-1.png" alt="Daily mortality in Chicago, IL, in July 1995. This figure gives an example of the plot using different themes." width="768" />
<p class="caption">
Figure 4.3: Daily mortality in Chicago, IL, in July 1995. This figure gives an example of the plot using different themes.
</p>
</div>
</div>
<div id="meaningful-labels" class="section level2">
<h2><span class="header-section-number">4.3</span> Meaningful labels</h2>
<blockquote>
<p>Guideline 2: <strong>Use clear, meaningful labels.</strong></p>
</blockquote>
<p>Graphs often default to use abbreviations for axis labels and other labeling. For example, the default is for <code>ggplot2</code> plots to use column names for the x- and y-axes of a scatterplot. While this is convenient for exploratory plots, it’s often not adequate for plots for presentations and papers. You’ll want to use short and easy-to-type column names in your dataframe to make coding easier, but you should use longer and more meaningful labeling in plots and tables that others need to interpret.</p>
<p>Furthermore, text labels can sometimes be aligned in a way that makes them hard to read. For example, when plotting a categorical variable along the x-axis, it can be difficult to fit labels for each category that are long enough to be meaningful.</p>
<p>Figure <a href="reporting-data-results-1.html#fig:labelsexample">4.4</a> gives an example of the same information shown with labels that are harder to interpret (left) versus with clear, meaningful labels (right). Notice how the graph on the left is using abbreviations for the categorical variable (“DF” for “Defense”), abbreviations for axis labels (“Pos” for “Position” and “Pls” for “Number of players”), and has the player position labels in a vertical alignment. On the right graph, I have made the graph easier to quickly read and interpret by spelling out all labels and switching the x- and y-axes, so that there’s room to fully spell out each position while still keeping the alignment horizontal, so the reader doesn’t have to turn the page (or their head) to read the values.</p>
<div class="figure" style="text-align: center"><span id="fig:labelsexample"></span>
<img src="RProgrammingForResearch_files/figure-html/labelsexample-1.png" alt="The number of players in each position in the worldcup data from the faraway package. Both graphs show the same information, but the left graph has murkier labels, while the right graph has labels that are easier to read and interpret." width="768" />
<p class="caption">
Figure 4.4: The number of players in each position in the worldcup data from the faraway package. Both graphs show the same information, but the left graph has murkier labels, while the right graph has labels that are easier to read and interpret.
</p>
</div>
<p>There are a few strategies you can use to make labels clearer when plotting with <code>ggplot2</code>:</p>
<ul>
<li>Add <code>xlab</code> and <code>ylab</code> elements to the plot, rather than relying on the column names in the original data. You can also relabel x- and y-axes with <code>scale</code> elements (e.g., <code>scale_x_continuous</code>), and the <code>scale</code> functions give you more power to also make other changes to the x- and y-axes (e.g., changing break points for the axis ticks). However, if you only need to change axis labels, <code>xlab</code> and <code>ylab</code> are often quicker.</li>
<li>Include units of measurement in axis titles when relevant. If units are dollars or percent, check out the <code>scales</code> package, which allows you to add labels directly to axis elements by including arguments like <code>labels = percent</code> in <code>scale</code> elements. See the helpfile for <code>scale_x_continuous</code> for some examples.</li>
<li>If the x-variable requires longer labels, as is often the case with categorical data (for example, player positions Figure <a href="reporting-data-results-1.html#fig:labelsexample">4.4</a>), consider flipping the coordinates, rather than abbreviating or rotating the labels. You can use <code>coord_flip</code> to do this.</li>
</ul>
</div>
<div id="references" class="section level2">
<h2><span class="header-section-number">4.4</span> References</h2>
<blockquote>
<p>Guideline 3: <strong>Provide useful references.</strong></p>
</blockquote>
<p>Data is easier to interpret when you add references. For example, if you show what it typical, it helps viewers interpret how unusual outliers are.</p>
<p>Figure <a href="reporting-data-results-1.html#fig:referenceexample1">4.5</a> shows daily mortality during July 1995 in Chicago, IL. The graph on the right has added shading showing the range of daily death counts in July in Chicago for neighboring years (1990–1994 and 1996–2000). This added reference helps clarify for viewers how unusual the number of deaths during the July 1995 heat wave was.</p>
<div class="figure" style="text-align: center"><span id="fig:referenceexample1"></span>
<img src="RProgrammingForResearch_files/figure-html/referenceexample1-1.png" alt="Daily mortality during July 1995 in Chicago, IL. In the graph on the right, I have added a shaded region showing the range of daily mortality counts for neighboring years, to show how unusual this event was." width="768" />
<p class="caption">
Figure 4.5: Daily mortality during July 1995 in Chicago, IL. In the graph on the right, I have added a shaded region showing the range of daily mortality counts for neighboring years, to show how unusual this event was.
</p>
</div>
<p>Another useful way to add references is to add a linear or smooth fit to the data, to help clarify trends in the data. Figure <a href="reporting-data-results-1.html#fig:referenceexample2">4.6</a> shows the relationship between passes and shots for Forwards in the <code>worldcup</code> dataset. The plot on the right has added a smooth function of the relationship between these two variables.</p>
<div class="figure" style="text-align: center"><span id="fig:referenceexample2"></span>
<img src="RProgrammingForResearch_files/figure-html/referenceexample2-1.png" alt="Relationship between passes and shots taken among Forwards in the worldcup dataset from the faraway package. The plot on the right has a smooth function added to help show the relationship between these two variables." width="768" />
<p class="caption">
Figure 4.6: Relationship between passes and shots taken among Forwards in the worldcup dataset from the faraway package. The plot on the right has a smooth function added to help show the relationship between these two variables.
</p>
</div>
<p>For scatterplots created with <code>ggplot2</code>, you can use the function <code>geom_smooth</code> to add a smooth or linear reference line. Here is the code that produces Figure <a href="reporting-data-results-1.html#fig:referenceexample2">4.6</a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="kw">filter</span>(worldcup, Position <span class="op">==</span><span class="st"> &quot;Forward&quot;</span>),
        <span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="fl">1.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">        </span><span class="kw">theme_few</span>()  <span class="op">+</span><span class="st"> </span>
<span class="st">        </span><span class="kw">geom_smooth</span>()</code></pre></div>
<p>The most useful <code>geom_smooth</code> parameters to know are:</p>
<ul>
<li><code>method</code>: The default is to add a loess curve if the data includes less than 1000 points and a generalized additive model for 1000 points or more. However, you can change to show the fitted line from a linear model using <code>method = &quot;lm&quot;</code> or from a generalized linear model using <code>method = &quot;glm&quot;</code>.</li>
<li><code>span</code>: How wiggly or smooth the smooth line should be (smaller value: more wiggly; larger value: more smooth)</li>
<li><code>se</code>: TRUE or FALSE, indicating whether to include shading for 95% confidence intervals.</li>
<li><code>level</code>: Confidence level for confidence interval (e.g., <code>0.90</code> for 90% confidence intervals)</li>
</ul>
<p>Lines and polygons can also be useful for adding references, as in Figure <a href="reporting-data-results-1.html#fig:referenceexample1">4.5</a>. Useful geoms for such shapes include:</p>
<ul>
<li><code>geom_hline</code>, <code>geom_vline</code>: Add a horizontal or vertical line</li>
<li><code>geom_abline</code>: Add a line with an intercept and slope</li>
<li><code>geom_polygon</code>: Add a filled polygon</li>
<li><code>geom_path</code>: Add an unfilled polygon</li>
</ul>
<p>You want these references to support the main data shown in the plot, but not overwhelm it. When adding these references:</p>
<ul>
<li>Add reference elements first, so they will be plotted under the data, instead of on top of it.</li>
<li>Use <code>alpha</code> to add transparency to these elements.</li>
<li>Use colors that are unobtrusive (e.g., grays).</li>
<li>For lines, consider using non-solid line types (e.g., <code>linetype = 3</code>).</li>
</ul>
</div>
<div id="highlighting" class="section level2">
<h2><span class="header-section-number">4.5</span> Highlighting</h2>
<blockquote>
<p>Guideline 4: <strong>Highlight interesting aspects.</strong></p>
</blockquote>
<p>Consider adding elements to highlight noteworthy elements of the data. For example, in the graph on the right of Figure <a href="reporting-data-results-1.html#fig:highlightexample1">4.7</a>, the days of the heat wave (based on temperature measurements) have been highlighted over the mortality time series by using a thick red line.</p>
<div class="figure" style="text-align: center"><span id="fig:highlightexample1"></span>
<img src="RProgrammingForResearch_files/figure-html/highlightexample1-1.png" alt="Mortality in Chicago, July 1995. In the plot on the right, a thick red line has been added to show the dates of a heat wave." width="768" />
<p class="caption">
Figure 4.7: Mortality in Chicago, July 1995. In the plot on the right, a thick red line has been added to show the dates of a heat wave.
</p>
</div>
<p>In the below graphs, the names of the players with the most shots and passes have been added to highlight these unusual points. </p>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-219-1.png" width="768" /></p>
<p>One helpful way to annotate is with text, using <code>geom_text()</code>. For this, you’ll first need to create a dataframe with the hottest day in the data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hottest_day &lt;-<span class="st"> </span>chic_july <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(temp <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(temp))
hottest_day[ , <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>]</code></pre></div>
<pre><code>##         date time year month doy      dow
## 1 1995-07-13 3116 1995     7 194 Thursday</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">chic_plot <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="dt">data =</span> hottest_day, 
                      <span class="dt">label =</span> <span class="st">&quot;Max&quot;</span>,
                      <span class="dt">size =</span> <span class="dv">3</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-221-1.png" width="0.7\textwidth" style="display: block; margin: auto;" /></p>
<p>With <code>geom_text</code>, you’ll often want to use position adjustment (the <code>position</code> parameter) to move the text so it won’t be right on top of the data points:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">chic_plot <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="dt">data =</span> hottest_day, 
                      <span class="dt">label =</span> <span class="st">&quot;Max&quot;</span>,
                      <span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">hjust =</span> <span class="dv">0</span>, <span class="dt">vjust =</span> <span class="op">-</span><span class="dv">1</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-222-1.png" width="0.5\textwidth" style="display: block; margin: auto;" /></p>
<p>You can also use lines to highlight. For this, it is often useful to create a new dataframe with data for the reference. To add a line for the Chicago heat wave, I’ve added a dataframe called <code>hw</code> with the relevant date range. I’m setting the y-value to be high enough (425) to ensure the line will be placed above the mortality data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hw &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">date =</span> <span class="kw">c</span>(<span class="kw">as.Date</span>(<span class="st">&quot;1995-07-12&quot;</span>), 
                          <span class="kw">as.Date</span>(<span class="st">&quot;1995-07-16&quot;</span>)),
                 <span class="dt">death =</span> <span class="kw">c</span>(<span class="dv">425</span>, <span class="dv">425</span>))
        
b &lt;-<span class="st"> </span>chic_plot <span class="op">+</span><span class="st"> </span>
<span class="st">        </span><span class="kw">geom_line</span>(<span class="dt">data =</span> hw,
                  <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> death),
                  <span class="dt">size =</span> <span class="dv">2</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">b</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-224-1.png" width="0.7\textwidth" style="display: block; margin: auto;" /></p>
</div>
<div id="order" class="section level2">
<h2><span class="header-section-number">4.6</span> Order</h2>
<blockquote>
<p>Guideline 5: <strong>Make order meaningful.</strong></p>
</blockquote>
<p>You can make the ranking of data clearer from a graph by using order to show rank. Often, factor or categorical variables are ordered by something that is not interesting, like alphabetical order.</p>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-225-1.png" width="768" /></p>
<p>You can re-order factor variables in a graph by resetting the factor using the <code>factor</code> function and changing the order that levels are included in the <code>levels</code> parameter.</p>
</div>
<div id="small-multiples" class="section level2">
<h2><span class="header-section-number">4.7</span> Small multiples</h2>
<blockquote>
<p>Guideline 6: <strong>When possible, use small multiples.</strong> </p>
</blockquote>
<p><em>Small multiples</em> are graphs that use many small plots showing the same thing for different facets of the data. For example, instead of using color in a single plot to show data for males and females, you could use two small plots, one each for males and females. </p>
<p>Typically, in small multiples, all plots use the same x- and y-axes. This makes it easier to compare across plots, and it also allows you to save room by limiting axis annotation.</p>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-226-1.png" width="768" /></p>
<p>You can use the <code>facet</code> functions to create small multiples. This separates the graph into several small graphs, one for each level of a factor. </p>
<p>The <code>facet</code> functions are:</p>
<ul>
<li><code>facet_grid()</code></li>
<li><code>facet_wrap()</code></li>
</ul>
<p>For example, to create small multiples by sex for the Nepali dataset, when plotting height versus weight, you can call:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(nepali, <span class="kw">aes</span>(ht, wt)) <span class="op">+</span><span class="st"> </span>
<span class="st">        </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">        </span><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>sex)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-227-1.png" width="768" /></p>
<p>The <code>facet_grid</code> function can facet by one or two variables. One will be shown by rows, and one by columns:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Generic code
<span class="kw">facet_grid</span>([factor <span class="cf">for</span> rows] <span class="op">~</span><span class="st"> </span>[factor <span class="cf">for</span> columns])</code></pre></div>
<p>The <code>facet_wrap()</code> function can only facet by one variable, but it can “wrap” the small graphs for that variable, so the don’t all have to be in one row or column:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Generic code
<span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>[factor <span class="cf">for</span> faceting], <span class="dt">ncol =</span> [number of columns])</code></pre></div>
<p>Often, when you do faceting, you’ll want to re-name your factors levels or re-order them. For this, you’ll need to use the <code>factor()</code> function on the original vector. For example, to rename the <code>sex</code> factor levels from “1” and “2” to “Male” and “Female”, you can run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nepali &lt;-<span class="st"> </span>nepali <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sex =</span> <span class="kw">factor</span>(sex, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), 
                      <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>)))</code></pre></div>
<p>Notice that the labels for the two graphs have now changed:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(nepali, <span class="kw">aes</span>(ht, wt)) <span class="op">+</span><span class="st"> </span>
<span class="st">        </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">        </span><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>sex)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-231-1.png" width="768" /></p>
<p>To re-order the factor, and show the plot for “Female” first, you can use <code>factor</code> to change the order of the levels:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nepali &lt;-<span class="st"> </span>nepali <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sex =</span> <span class="kw">factor</span>(sex, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>)))</code></pre></div>
<p>Now notice that the order of the plots has changed:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(nepali, <span class="kw">aes</span>(ht, wt)) <span class="op">+</span><span class="st"> </span>
<span class="st">        </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">        </span><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>sex)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-233-1.png" width="768" /></p>
</div>
<div id="advanced-customization" class="section level2">
<h2><span class="header-section-number">4.8</span> Advanced customization</h2>
<div id="scales" class="section level3">
<h3><span class="header-section-number">4.8.1</span> Scales</h3>
<p>There are a number of different functions for adjusting scales. These follow the following convention:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Generic code
scale_[aesthetic]_[vector type]</code></pre></div>
<p>For example, to adjust the x-axis scale for a continuous variable, you’d use <code>scale_x_continuous</code>. You can use a <code>scale</code> function for an axis to change things like the axis label (which you could also change with <code>xlab</code> or <code>ylab</code>) as well as position and labeling of breaks.</p>
<p>For example, here is the default for plotting time versus passes for the <code>worldcup</code> dataset, with the number of shots taken shown by size and position shown by color:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(worldcup, <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Passes,
                     <span class="dt">color =</span> Position, <span class="dt">size =</span> Shots)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-235-1.png" width="0.8\textwidth" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(worldcup, <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Passes,
                     <span class="dt">color =</span> Position, <span class="dt">size =</span> Shots)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Time played (minutes)&quot;</span>, 
                     <span class="dt">breaks =</span> <span class="dv">90</span> <span class="op">*</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>),
                     <span class="dt">minor_breaks =</span> <span class="dv">90</span> <span class="op">*</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>))</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-236-1.png" width="0.8\textwidth" style="display: block; margin: auto;" /></p>
<p>Parameters you might find useful in <code>scale</code> functions include:</p>
<table>
<thead>
<tr class="header">
<th align="left">Parameter</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">name</td>
<td align="left">Label or legend name</td>
</tr>
<tr class="even">
<td align="left">breaks</td>
<td align="left">Vector of break points</td>
</tr>
<tr class="odd">
<td align="left">minor_breaks</td>
<td align="left">Vector of minor break points</td>
</tr>
<tr class="even">
<td align="left">labels</td>
<td align="left">Labels to use for each break</td>
</tr>
<tr class="odd">
<td align="left">limits</td>
<td align="left">Limits to the range of the axis</td>
</tr>
</tbody>
</table>
<p>For dates, you can use <code>scale</code> functions like <code>scale_x_date</code> and <code>scale_x_datetime</code>. For example, here’s a plot of deaths in Chicago in July 1995 using default values for the x-axis:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(chic_july, <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> death)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>() </code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-238-1.png" width="0.9\textwidth" style="display: block; margin: auto;" /></p>
<p>And here’s an example of changing the formating and name of the x-axis:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(chic_july, <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> death)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">name =</span> <span class="st">&quot;Date in July 1995&quot;</span>,
               <span class="dt">date_labels =</span> <span class="st">&quot;%m-%d&quot;</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-239-1.png" width="0.9\textwidth" style="display: block; margin: auto;" /></p>
<p>You can also use the <code>scale</code> functions to transform an axis. For example, to show the Chicago plot with “deaths” on a log scale, you can run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(chic_july, <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> death)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_log10</span>()</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-240-1.png" width="0.9\textwidth" style="display: block; margin: auto;" /></p>
<p>For colors and fills, the conventions for the names of the <code>scale</code> functions can vary. For example, to adjust the color scale when you’re mapping a discrete variable (i.e., categorical, like gender or animal breed) to color, you’d use <code>scale_color_hue</code>. To adjust the color scale for a continuous variable, like age, you’ll use <code>scale_color_gradient</code>.</p>
<p>For any color scales, consider starting with <code>brewer</code> first (e.g., <code>scale_color_brewer</code>, <code>scale_color_distiller</code>). Scale functions from <code>brewer</code> allow you to set colors using different palettes. You can explore these palettes at <a href="http://colorbrewer2.org/" class="uri">http://colorbrewer2.org/</a>.</p>
<p>The Brewer palettes fall into three categories: sequential, divergent, and qualitative. You should use sequential or divergent for continuous data and qualitative for categorical data. Use <code>display.brewer.pal</code> to show the palette for a given number of colors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RColorBrewer)
<span class="kw">display.brewer.pal</span>(<span class="dt">name =</span> <span class="st">&quot;Set1&quot;</span>, <span class="dt">n =</span> <span class="dv">8</span>)
<span class="kw">display.brewer.pal</span>(<span class="dt">name =</span> <span class="st">&quot;PRGn&quot;</span>, <span class="dt">n =</span> <span class="dv">8</span>)
<span class="kw">display.brewer.pal</span>(<span class="dt">name =</span> <span class="st">&quot;PuBuGn&quot;</span>, <span class="dt">n =</span> <span class="dv">8</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-241-1.png" width="0.32\textwidth" /><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-241-2.png" width="0.32\textwidth" /><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-241-3.png" width="0.32\textwidth" /></p>
<p>Use the <code>palette</code> argument within a <code>scales</code> function to customize the palette:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">y =</span> <span class="kw">rnorm</span>(<span class="dv">5</span>),
                       <span class="dt">group =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]),
            <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y, <span class="dt">color =</span> group)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>()
b &lt;-<span class="st"> </span>a <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Set1&quot;</span>)
c &lt;-<span class="st"> </span>a <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Pastel2&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme_dark</span>()
<span class="kw">grid.arrange</span>(a, b, c, <span class="dt">ncol =</span> <span class="dv">3</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-242-1.png" width="\textwidth" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(worldcup, <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Passes,
                     <span class="dt">color =</span> Position, <span class="dt">size =</span> Shots)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Dark2&quot;</span>,
                     <span class="dt">name =</span> <span class="st">&quot;Player position&quot;</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-243-1.png" width="0.8\textwidth" style="display: block; margin: auto;" /></p>
<p>You can also set colors manually:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(worldcup, <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Passes,
                     <span class="dt">color =</span> Position, <span class="dt">size =</span> Shots)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;red&quot;</span>, 
                                <span class="st">&quot;darkgreen&quot;</span>, <span class="st">&quot;darkgray&quot;</span>))</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-244-1.png" width="0.8\textwidth" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="to-find-out-more" class="section level2">
<h2><span class="header-section-number">4.9</span> To find out more</h2>
<p>Some excellent further references for plotting are:</p>
<ul>
<li>R Graphics Cookbook (book and website)</li>
<li>Google images</li>
</ul>
<p>For more technical details about plotting in R:</p>
<ul>
<li>ggplot2: Elegant Graphics for Data Analysis, Hadley Wickham</li>
<li>R Graphics, Paul Murrell</li>
</ul>
</div>
<div id="in-course-exercise-3" class="section level2">
<h2><span class="header-section-number">4.10</span> In-course exercise</h2>
<div id="designing-a-plot" class="section level3">
<h3><span class="header-section-number">4.10.1</span> Designing a plot</h3>
<p>For today’s exercise, you’ll be building a plot using the <code>worldcup</code> data from the <code>faraway</code> package. First, load in that data. The name of each player is in the rownames of this data. Use the <code>tibble::rownames_to_column()</code> function to move those rownames into a new column named <code>Player</code>. Also install and load the <code>ggplot2</code> and <code>ggthemes</code> packages.</p>
<p>Next, say you want to look at the relationship between the number of minutes that a player played in the 2010 World Cup (<code>Time</code>) and the number of shots the player took on goal (<code>Shots</code>). On a sheet of paper, and talking with your partner, decide how the two of you would design a plot to explore and present this relationship. How would you incorporate some of the principles of creating good graphs?</p>
<div id="example-r-code-6" class="section level4">
<h4><span class="header-section-number">4.10.1.1</span> Example R code</h4>
<p>For this section, the only code needed is code to load the required packages, load the data, and move the rownames to a column named <code>Player</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(faraway)
<span class="kw">data</span>(worldcup)
<span class="kw">head</span>(worldcup, <span class="dv">2</span>)</code></pre></div>
<pre><code>##           Team   Position Time Shots Passes Tackles Saves
## Abdoun Algeria Midfielder   16     0      6       0     0
## Abe      Japan Midfielder  351     0    101      14     0</code></pre>
<p>This dataset has the players’ names as rownames, rather than in a column. Once we start using <code>dplyr</code> functions, we’ll lose these rownames. Therefore, start by converting the rownames to a column called <code>Player</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
worldcup &lt;-<span class="st"> </span>worldcup <span class="op">%&gt;%</span>
<span class="st">  </span>tibble<span class="op">::</span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;Player&quot;</span>)
<span class="kw">head</span>(worldcup, <span class="dv">2</span>)</code></pre></div>
<pre><code>##   Player    Team   Position Time Shots Passes Tackles Saves
## 1 Abdoun Algeria Midfielder   16     0      6       0     0
## 2    Abe   Japan Midfielder  351     0    101      14     0</code></pre>
<p>Install and load the <code>ggplot2</code> package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;ggplot2&quot;)</span>
<span class="kw">library</span>(ggplot2)
<span class="co"># install.packages(&quot;ggthemes&quot;)</span>
<span class="kw">library</span>(ggthemes)</code></pre></div>
</div>
</div>
<div id="implementing-plot-guidelines-1" class="section level3">
<h3><span class="header-section-number">4.10.2</span> Implementing plot guidelines #1</h3>
<p>In this section, we’ll work on creating a plot like this:</p>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-248-1.png" width="768" /></p>
<p>Do the following tasks:</p>
<ul>
<li>Create a simple scatterplot of Time versus Shots for the World Cup data. It should look like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-249-1.png" width="288" /></p>
<ul>
<li>Next, before any more coding, talk with your group members about how this graph is different from the simple one you created with <code>ggplot</code> in the last section. Also discuss what you can figure out from this new graph that was less clear from a simpler scatterplot of Time versus Shots for this data.</li>
<li>Often, in graphs with a lot of points, it’s hard to see some of the points, because they overlap other points. Three strategies to address this are: (a) make the points smaller; and (b) make the points somewhat transparent. Try doing these first two with the scatterplot you’re creating. At this point, the plot should look something like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-250-1.png" width="288" /></p>
<ul>
<li>Create a new column in the <code>worldcup</code> data called <code>top_four</code> that specifies whether or not the <code>Team</code> for that observation was one of the top four teams in the tournament (Netherlands, Uruguay, Spain, and Germany). Make the colors of the points correspond to whether the team was a top-four team. At this point, the plot should look something like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-251-1.png" width="384" /></p>
<ul>
<li>Increase data density: Try changing the theme, to come up with a graph with a bit less non-data ink. From the <code>ggthemes</code> package, try some of the following themes: <code>theme_few()</code>, <code>theme_tufte()</code>, <code>theme_stata()</code>, <code>theme_fivethirtyeight()</code>, <code>theme_economist_white()</code>, and <code>theme_wsj()</code>. Pick a theme that helps increase the graph’s data density. At this point, the plot should look something like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-252-1.png" width="384" /></p>
<ul>
<li>Use meaningful labels: Use the <code>labs()</code> function to make a clearer title for the x-axis. (You may have already written this code in the last section of this exercise.) In addition to setting the x-axis title with the <code>labs</code> function, you can also set the title for the color scale (use <code>color =</code> within the <code>labs</code> function). You may want to make a line break in the color title– you can use the linebreak character (<code>\n</code>) inside the character string with the title to do that. At this point, the plot should look something like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-253-1.png" width="384" /></p>
<ul>
<li>Provide useful references: The standard time for a soccer game is 90 minutes. In the World Cup, all teams play at least three games, and then the top teams continue and play more games. Add a reference line at 270 minutes (i.e., the amount of standard time played for the three games that all teams play). At this point, the plot should look something like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-254-1.png" width="384" /></p>
<div id="example-r-code-7" class="section level4">
<h4><span class="header-section-number">4.10.2.1</span> Example R code</h4>
<p>As a reminder, here’s the code to do a simple scatterplot ot Shots by Time for the <code>worldcup</code> data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> worldcup) <span class="op">+</span>
<span class="st">        </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Shots))</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-255-1.png" width="288" /></p>
<p>Next, try to make it clearer to see the points by making them smaller and somewhat transparent. This can be done with the <code>size</code> and <code>alpha</code> aesthetics for <code>geom_points</code>. For the <code>size</code> aesthetic, a value smaller than about 2 = smaller than default, larger than about 2 = larger than default. For the <code>alpha</code> aesthetic, closer to 0 = more tranparent, closer to 1 = more opaque. As a reminder, in this case you are changing all of the points in the same way, so you will be setting those aesthetics to constant values. That means that you should specify the values <strong>outside</strong> of an <code>aes</code> call. This code could make these changes:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> worldcup) <span class="op">+</span>
<span class="st">        </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Shots),
                   <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-256-1.png" width="288" /></p>
<p>To create a new column called <code>top_four</code>, first create vector that lists those top four teams, then create a logical vector in the dataframe for whether the team for that observation is in one of the top four teams:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">worldcup &lt;-<span class="st"> </span>worldcup <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">top_4 =</span> Team <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Spain&quot;</span>, <span class="st">&quot;Germany&quot;</span>,  
                                <span class="st">&quot;Uruguay&quot;</span>, <span class="st">&quot;Netherlands&quot;</span>))
<span class="kw">head</span>(worldcup)</code></pre></div>
<pre><code>##       Team   Position Time Shots Passes Tackles Saves     Player top_4
## 1  Algeria Midfielder   16     0      6       0     0     Abdoun FALSE
## 2    Japan Midfielder  351     0    101      14     0        Abe FALSE
## 3   France   Defender  180     0     91       6     0     Abidal FALSE
## 4   France Midfielder  270     1    111       5     0 Abou Diaby FALSE
## 5 Cameroon    Forward   46     2     16       0     0  Aboubakar FALSE
## 6  Uruguay    Forward   72     0     15       0     0      Abreu  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(worldcup<span class="op">$</span>top_<span class="dv">4</span>)</code></pre></div>
<pre><code>##    Mode   FALSE    TRUE 
## logical     517      78</code></pre>
<p>To color points by this variable, use <code>color =</code> in the <code>aes()</code> part of the <code>ggplot()</code> call:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> worldcup) <span class="op">+</span>
<span class="st">        </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Shots, <span class="dt">color =</span> top_<span class="dv">4</span>),
                   <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-258-1.png" width="384" /></p>
<p>To increase the data density, try out different themes for the plot. First, I’ll save everything we’ve done so far as the object <code>shot_plot</code>, then I’ll try adding different themes:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shot_plot &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> worldcup) <span class="op">+</span>
<span class="st">        </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Shots, <span class="dt">color =</span> top_<span class="dv">4</span>),
                   <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)

shot_plot <span class="op">+</span><span class="st"> </span><span class="kw">theme_few</span>()</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-259-1.png" width="384" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shot_plot <span class="op">+</span><span class="st"> </span><span class="kw">theme_tufte</span>()</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-259-2.png" width="384" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shot_plot <span class="op">+</span><span class="st"> </span><span class="kw">theme_wsj</span>()</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-259-3.png" width="384" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shot_plot <span class="op">+</span><span class="st"> </span><span class="kw">theme_fivethirtyeight</span>()</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-259-4.png" width="384" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shot_plot <span class="op">+</span><span class="st"> </span><span class="kw">theme_stata</span>()</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-259-5.png" width="384" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shot_plot <span class="op">+</span><span class="st"> </span><span class="kw">theme_economist_white</span>()</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-259-6.png" width="384" /></p>
<p>The data density is increased with the <code>theme_few()</code> theme, so I’ll use that:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> worldcup) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Shots, <span class="dt">color =</span> top_<span class="dv">4</span>),
             <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme_few</span>()</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-260-1.png" width="384" /></p>
<p>To change the titles for some of the scales (the x-axis and color scale), you can use the <code>labs()</code> function. Note that you can use <code>\n</code> to add a line break inside one of these titles (I’ve done that for the title for the color scale):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> worldcup) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Shots, <span class="dt">color =</span> top_<span class="dv">4</span>),
             <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme_few</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Time played in World Cup (minutes)&quot;</span>,
       <span class="dt">color =</span> <span class="st">&quot;Team&#39;s final</span><span class="ch">\n</span><span class="st">ranking&quot;</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-261-1.png" width="384" /></p>
<p>As an extra note, if you want to create nicer labels for the legend for color, convert the <code>top_four</code> column into the factor class, with the labels you want to use in the figure legend:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">worldcup &lt;-<span class="st"> </span>worldcup <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">top_4 =</span> <span class="kw">factor</span>(top_<span class="dv">4</span>, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>),
                        <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Top 4&quot;</span>, <span class="st">&quot;Other&quot;</span>)))
<span class="kw">summary</span>(worldcup<span class="op">$</span>top_<span class="dv">4</span>)</code></pre></div>
<pre><code>## Top 4 Other 
##    78   517</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> worldcup) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Shots, <span class="dt">color =</span> top_<span class="dv">4</span>),
             <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme_few</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Time played in World Cup (minutes)&quot;</span>,
       <span class="dt">color =</span> <span class="st">&quot;Team&#39;s final</span><span class="ch">\n</span><span class="st">ranking&quot;</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-263-1.png" width="384" /></p>
<p>To add a reference line at 270 minutes of time, use the <code>geom_vline()</code> function. You’ll want to make it a light color (like light gray) and dashed or dotted (<code>linetype</code> of 2 or 3), so it won’t be too prominent on the graph:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> worldcup) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">270</span>, <span class="dt">color =</span> <span class="st">&quot;lightgray&quot;</span>, <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Time, <span class="dt">y =</span> Shots, <span class="dt">color =</span> top_<span class="dv">4</span>),
             <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme_few</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Time played in World Cup (minutes)&quot;</span>,
       <span class="dt">color =</span> <span class="st">&quot;Team&#39;s final</span><span class="ch">\n</span><span class="st">ranking&quot;</span>)</code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-264-1.png" width="384" /></p>
</div>
</div>
<div id="implementing-plot-guidelines-2" class="section level3">
<h3><span class="header-section-number">4.10.3</span> Implementing plot guidelines #2</h3>
<ul>
<li>Highlighting interesting data: Who had the most shots in the 2010 World Cup? Was he on a top-four team? Use <code>geom_text()</code> to label his point on the graph with his name (try out some different values of <code>hjust</code> and <code>vjust</code> in this function call to get the label in a place you like). At this point, the plot should look something like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-265-1.png" width="384" /></p>
<ul>
<li>For labeling the player with the top number of shots, instead of only using the player’s name, use the following format: “[Player’s name], [Player’s team]”. (Hint: You may want to use <code>mutate</code> to add a new column, where you used <code>paste0</code> to paste together the player’s name, <code>&quot;, &quot;</code>, and the team name.) At this point, the plot should look something like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-266-1.png" width="384" /></p>
<ul>
<li>Create small multiples. The relationship between time played and shots taken is probably different by the players’ positions. Use faceting to create different graphs for each position. At this point, the plot should look something like this:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-267-1.png" width="768" /></p>
<ul>
<li>Make order meaningful: What order are the faceted graphs currently in? Offensive players have more chances to take shots than defensive players, so that might be a useful ordering for the facets. Re-order the <code>Position</code> factor column to go from nearest your own goal to nearest the opponents goal, and then re-plot the graph from the previous step.</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-268-1.png" width="768" /></p>
<div id="example-r-code-8" class="section level4">
<h4><span class="header-section-number">4.10.3.1</span> Example R code</h4>
<p>To add a text label with just the player with the most shots, you’ll want to create a new dataframe with just the top player. You can use the <code>top_n</code> function to do that (the <code>wt</code> option is specifying that we want the top player in terms of values in the <code>Shots</code> column):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">top_player &lt;-<span class="st"> </span>worldcup <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dt">n =</span> <span class="dv">1</span>, <span class="dt">wt =</span> Shots)</code></pre></div>
<p>Now you can use <code>geom_text()</code> to label this player’s point on the graph with his name. You may need to mess around with some of the options in <code>geom_text()</code>, like <code>size</code>, <code>hjust</code>, and <code>vjust</code> (<code>hjust</code> and <code>vjust</code> say where, in relation to the point location, to put the label), to get something you’re happy with.</p>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-270-1.png" width="384" /></p>
<p>If you want to put both the player’s name and his team, you can add a <code>mutate()</code> function when you create the new dataframe with just the top player, and then use this for the label:</p>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-271-1.png" width="384" /></p>
<p>To create small multiples, use the <code>facet_wrap()</code> command (you’ll probably want to use <code>ncol</code> to specify to use four columns):</p>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-272-1.png" width="768" /></p>
<p>To re-order the <code>Position</code> column of the dataframe, add a <code>mutate</code> statement before you pipe into the plotting code. Use the <code>levels</code> option of the <code>factor()</code> function– whatever order you put the factors in for this argument will be the new order in which R saves the levels of this factor.</p>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-273-1.png" width="768" /></p>
<div class="rmdnote">
<p>
Note from this code example that you can use the <code>levels</code> function to find out the levels and their order for a factor-class vector.
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">worldcup &lt;-<span class="st"> </span>worldcup <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Position =</span> <span class="kw">factor</span>(Position, 
                           <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Goalkeeper&quot;</span>, <span class="st">&quot;Defender&quot;</span>,
                                      <span class="st">&quot;Midfielder&quot;</span>, <span class="st">&quot;Forward&quot;</span>)))
<span class="kw">levels</span>(worldcup<span class="op">$</span>Position)</code></pre></div>
<pre><code>## [1] &quot;Goalkeeper&quot; &quot;Defender&quot;   &quot;Midfielder&quot; &quot;Forward&quot;</code></pre>
</div>
</div>
<div id="data-visualization-cheatsheet" class="section level3">
<h3><span class="header-section-number">4.10.4</span> Data visualization cheatsheet</h3>
<p>RStudio comes with some excellent cheatsheets, which provide quick references to functions and code you might find useful for different tasks. For this part of the group exercise, you’ll explore their cheatsheet for data visualization, both to learn some new <code>ggplot2</code> code and to become familiar with how to use this cheatsheet as you do your own analysis.</p>
<ul>
<li>Open the data visualization cheatsheet. You can do this from RStudio by going to “Help” -&gt; “Cheatsheets” -&gt; “Data Visualization with ggplot2”.</li>
<li>Notice that different sections give examples with some datasets that come with either base R or ggplot2. For example, under the “Graphical Primitives” section, there is code defining the object <code>a</code> as a ggplot object using the “seals” dataset: <code>a &lt;- ggplot(seals, aes(x = long, y = lat))</code>.</li>
<li>Go through the cheatsheet and list all of the example datasets that are used in this cheatsheet. Open their helpfiles to learn more about the data.</li>
<li>Create the example datasets <code>a</code> through <code>l</code> and <code>s</code> through <code>t</code> using the code given on the cheatsheet.</li>
<li>Pick at least one example to try out from each of the following sections: “Graphical Primitives”, “One Variable”, at least three subsections of “Two Variables”, “Three Variables”, “Scales”, “Faceting”, and “Position Adjustments”. As you try these, try to figure out any aesthetics that you aren’t familiar with (e.g., <code>ymin</code>, <code>ymax</code>). Also, use helpfiles for the geoms to look up parameters you aren’t familiar with (e.g., <code>stat</code> for <code>geom_area</code>). If you can’t figure out how to interpret a plot, check the helpfile for the associated geom. <strong>Note</strong>: For the <code>n</code> geom used in “scales”, it should be defined as <code>n &lt;- d + geom_bar(aes(fill = fl))</code>.</li>
</ul>
<div id="example-r-code-9" class="section level4">
<h4><span class="header-section-number">4.10.4.1</span> Example R code</h4>
<p>The code for opening the helpfiles for the example datasets is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?seals
?economics
?mpg
?diamonds
?USArrests</code></pre></div>
<p>Note that, for <code>USArrests</code>, only some of the columns are pulled out (e.g., <code>murder = USArrests$murder</code>) to use in the <code>data</code> example dataframe. Further, the “Visualizing error” examples use a dataframe created specifically for these examples, called <code>df</code>.</p>
<div class="rmdnote">
<p>
Some of the base R and ggplot2 example datasets have become fairly well-known. Some that you’ll see very often in examples are the <code>iris</code>, <code>mpg</code>, and <code>diamonds</code> datasets.
</p>
</div>
<p>All of the code to create the datasets <code>a</code> through <code>l</code> and <code>s</code> through <code>t</code> is given somewhere on the cheatsheet. Here it is in full:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">ggplot</span>(seals, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat))
b &lt;-<span class="st"> </span><span class="kw">ggplot</span>(economics, <span class="kw">aes</span>(date, unemploy))
c &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(hwy))
d &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(fl))
e &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(cty, hwy))
f &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(class, hwy))
g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(cut, color))
h &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(carat, price))
i &lt;-<span class="st"> </span><span class="kw">ggplot</span>(economics, <span class="kw">aes</span>(date, unemploy))
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">grp =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>), <span class="dt">fit =</span> <span class="fl">4.5</span>, <span class="dt">se =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)
j &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(grp, fit, <span class="dt">ymin =</span> fit <span class="op">-</span><span class="st"> </span>se, <span class="dt">ymax =</span> fit <span class="op">+</span><span class="st"> </span>se))
data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">murder =</span> USArrests<span class="op">$</span>Murder,
                   <span class="dt">state =</span> <span class="kw">tolower</span>(<span class="kw">rownames</span>(USArrests)))
map &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="st">&quot;state&quot;</span>)
k &lt;-<span class="st"> </span><span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">fill =</span> murder))
seals<span class="op">$</span>z &lt;-<span class="st"> </span><span class="kw">with</span>(seals, <span class="kw">sqrt</span>(delta_long<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>delta_lat<span class="op">^</span><span class="dv">2</span>))
l &lt;-<span class="st"> </span><span class="kw">ggplot</span>(seals, <span class="kw">aes</span>(long, lat))
s &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(fl, <span class="dt">fill =</span> drv))
t &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(cty, hwy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<p>Notice that, in some places, the aesthetics are defined using the full aesthetic name-value pair (e.g., <code>aes(x = long, y = lat)</code>), while in other places the code relies on position for defining which column of a dataframe maps to which aesthetic (e.g., <code>aes(cty, hwy)</code> or <code>aes(fl)</code>). Either is fine, although relying on position can result in errors if you are not very familiar with the order in which parameters are defined for a function.</p>
<p>This code will vary based on the examples you try, but here is some code for one set of examples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">b <span class="op">+</span><span class="st"> </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> unemploy <span class="op">-</span><span class="st"> </span><span class="dv">900</span>, <span class="dt">ymax =</span> unemploy <span class="op">+</span><span class="st"> </span><span class="dv">900</span>))
c <span class="op">+</span><span class="st"> </span><span class="kw">geom_dotplot</span>()
f <span class="op">+</span><span class="st"> </span><span class="kw">geom_violin</span>(<span class="dt">scale =</span> <span class="st">&quot;area&quot;</span>)
h <span class="op">+</span><span class="st"> </span><span class="kw">geom_hex</span>()
j <span class="op">+</span><span class="st"> </span><span class="kw">geom_pointrange</span>()
k <span class="op">+</span><span class="st"> </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">map_id =</span> state), <span class="dt">map =</span> map) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x =</span> map<span class="op">$</span>long, <span class="dt">y =</span> map<span class="op">$</span>lat)
l <span class="op">+</span><span class="st"> </span><span class="kw">geom_contour</span>(<span class="kw">aes</span>(<span class="dt">z =</span> z))
n &lt;-<span class="st"> </span>d <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> fl))
n <span class="op">+</span><span class="st"> </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Blues&quot;</span>)
o &lt;-<span class="st"> </span>c <span class="op">+</span><span class="st"> </span><span class="kw">geom_dotplot</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> ..x..))
o <span class="op">+</span><span class="st"> </span><span class="kw">scale_fill_gradient</span>(<span class="dt">low =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">high =</span> <span class="st">&quot;yellow&quot;</span>)
t <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>(year <span class="op">~</span><span class="st"> </span>fl)
s <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>)</code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploring-data-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reproducible-research-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/geanders/RProgrammingForResearch/edit/master/04-reportingresults1.Rmd",
"text": "Edit"
},
"download": ["RProgrammingForResearch.pdf", "RProgrammingForResearch.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
