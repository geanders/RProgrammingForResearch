<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Reporting results #2 | R Programming for Research</title>
  <meta name="description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Reporting results #2 | R Programming for Research" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Reporting results #2 | R Programming for Research" />
  
  <meta name="twitter:description" content="This is a bookdown version of the course notes for R Programming for Research, Colorado State University, Fall 2016." />
  

<meta name="author" content="Brooke Anderson, Rachel Severson, and Nicholas Good" />


<meta name="date" content="2023-10-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exploring-data-2.html"/>
<link rel="next" href="reproducible-research-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="libs/bokehjs-0.12.5/bokeh.min.css" rel="stylesheet" />
<link href="libs/bokehjs-0.12.5/loader.css" rel="stylesheet" />
<script src="libs/bokehjs-0.12.5/bokeh.min.js"></script>
<script src="libs/rbokeh-binding-0.5.2/rbokeh.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.28/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36719749-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36719749-2');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Programming for Research</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Online course book, ERHS 535</a></li>
<li class="chapter" data-level="" data-path="course-information.html"><a href="course-information.html"><i class="fa fa-check"></i>Course information</a>
<ul>
<li class="chapter" data-level="0.1" data-path="course-information.html"><a href="course-information.html#course-overview"><i class="fa fa-check"></i><b>0.1</b> Course overview</a></li>
<li class="chapter" data-level="0.2" data-path="course-information.html"><a href="course-information.html#course-syllabus"><i class="fa fa-check"></i><b>0.2</b> Course syllabus</a></li>
<li class="chapter" data-level="0.3" data-path="course-information.html"><a href="course-information.html#time-and-place"><i class="fa fa-check"></i><b>0.3</b> Time and place</a></li>
<li class="chapter" data-level="0.4" data-path="course-information.html"><a href="course-information.html#detailed-schedule"><i class="fa fa-check"></i><b>0.4</b> Detailed schedule</a></li>
<li class="chapter" data-level="0.5" data-path="course-information.html"><a href="course-information.html#final-group-project"><i class="fa fa-check"></i><b>0.5</b> Final group project</a></li>
<li class="chapter" data-level="0.6" data-path="course-information.html"><a href="course-information.html#course-set-up"><i class="fa fa-check"></i><b>0.6</b> Course set-up</a></li>
<li class="chapter" data-level="0.7" data-path="course-information.html"><a href="course-information.html#coursebook"><i class="fa fa-check"></i><b>0.7</b> Coursebook</a>
<ul>
<li class="chapter" data-level="0.7.1" data-path="course-information.html"><a href="course-information.html#other-helpful-books-not-required"><i class="fa fa-check"></i><b>0.7.1</b> Other helpful books (not required)</a></li>
</ul></li>
<li class="chapter" data-level="0.8" data-path="course-information.html"><a href="course-information.html#in-course-exercise-chapter-0"><i class="fa fa-check"></i><b>0.8</b> In-course Exercise Chapter 0</a>
<ul>
<li class="chapter" data-level="0.8.1" data-path="course-information.html"><a href="course-information.html#navigate-the-online-course-book"><i class="fa fa-check"></i><b>0.8.1</b> Navigate the online course book</a></li>
<li class="chapter" data-level="0.8.2" data-path="course-information.html"><a href="course-information.html#find-the-video-lectures"><i class="fa fa-check"></i><b>0.8.2</b> Find the video lectures</a></li>
<li class="chapter" data-level="0.8.3" data-path="course-information.html"><a href="course-information.html#try-coding-a-bit"><i class="fa fa-check"></i><b>0.8.3</b> Try coding a bit</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Part I: Preliminaries</b></span></li>
<li class="chapter" data-level="1" data-path="r-preliminaries.html"><a href="r-preliminaries.html"><i class="fa fa-check"></i><b>1</b> R Preliminaries</a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#objectives"><i class="fa fa-check"></i><b>1.1</b> Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-and-r-studio"><i class="fa fa-check"></i><b>1.2</b> R and R Studio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#what-is-r"><i class="fa fa-check"></i><b>1.2.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#free-and-open-source-software"><i class="fa fa-check"></i><b>1.2.2</b> Free and open-source software</a></li>
<li class="chapter" data-level="1.2.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#what-is-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> What is RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#communicating-with-r"><i class="fa fa-check"></i><b>1.3</b> Communicating with R</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-sessions-the-console-and-the-command-prompt"><i class="fa fa-check"></i><b>1.3.1</b> R sessions, the console, and the command prompt</a></li>
<li class="chapter" data-level="1.3.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-expressions-function-calls-and-objects"><i class="fa fa-check"></i><b>1.3.2</b> R expressions, function calls, and objects</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="r-preliminaries.html"><a href="r-preliminaries.html#functions"><i class="fa fa-check"></i><b>1.4</b> Functions</a></li>
<li class="chapter" data-level="1.5" data-path="r-preliminaries.html"><a href="r-preliminaries.html#objects-and-assignment"><i class="fa fa-check"></i><b>1.5</b> Objects and assignment</a></li>
<li class="chapter" data-level="1.6" data-path="r-preliminaries.html"><a href="r-preliminaries.html#more-on-communicating-with-r"><i class="fa fa-check"></i><b>1.6</b> More on communicating with R</a></li>
<li class="chapter" data-level="1.7" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-scripts"><i class="fa fa-check"></i><b>1.7</b> R scripts</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#commenting-code"><i class="fa fa-check"></i><b>1.7.1</b> Commenting code</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="r-preliminaries.html"><a href="r-preliminaries.html#the-package-system"><i class="fa fa-check"></i><b>1.8</b> The “package” system</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#r-packages"><i class="fa fa-check"></i><b>1.8.1</b> R packages</a></li>
<li class="chapter" data-level="1.8.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#installing-from-cran"><i class="fa fa-check"></i><b>1.8.2</b> Installing from CRAN</a></li>
<li class="chapter" data-level="1.8.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#loading-an-installed-package"><i class="fa fa-check"></i><b>1.8.3</b> Loading an installed package</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="r-preliminaries.html"><a href="r-preliminaries.html#rs-most-basic-object-types"><i class="fa fa-check"></i><b>1.9</b> R’s most basic object types</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#vectors"><i class="fa fa-check"></i><b>1.9.1</b> Vectors</a></li>
<li class="chapter" data-level="1.9.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#dataframes"><i class="fa fa-check"></i><b>1.9.2</b> Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="r-preliminaries.html"><a href="r-preliminaries.html#in-course-exercise-chapter-1"><i class="fa fa-check"></i><b>1.10</b> In-course Exercise Chapter 1</a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="r-preliminaries.html"><a href="r-preliminaries.html#trying-out-the-code-in-slides-for-first-lecture-videos"><i class="fa fa-check"></i><b>1.10.1</b> Trying out the code in slides for first lecture videos</a></li>
<li class="chapter" data-level="1.10.2" data-path="r-preliminaries.html"><a href="r-preliminaries.html#writing-your-code-as-an-r-script"><i class="fa fa-check"></i><b>1.10.2</b> Writing your code as an R script</a></li>
<li class="chapter" data-level="1.10.3" data-path="r-preliminaries.html"><a href="r-preliminaries.html#about-the-dataset"><i class="fa fa-check"></i><b>1.10.3</b> About the dataset</a></li>
<li class="chapter" data-level="1.10.4" data-path="r-preliminaries.html"><a href="r-preliminaries.html#manually-creating-vectors"><i class="fa fa-check"></i><b>1.10.4</b> Manually creating vectors</a></li>
<li class="chapter" data-level="1.10.5" data-path="r-preliminaries.html"><a href="r-preliminaries.html#installing-and-using-a-package"><i class="fa fa-check"></i><b>1.10.5</b> Installing and using a package</a></li>
<li class="chapter" data-level="1.10.6" data-path="r-preliminaries.html"><a href="r-preliminaries.html#manually-creating-a-dataframe"><i class="fa fa-check"></i><b>1.10.6</b> Manually creating a dataframe</a></li>
<li class="chapter" data-level="1.10.7" data-path="r-preliminaries.html"><a href="r-preliminaries.html#getting-the-data-onto-your-computer"><i class="fa fa-check"></i><b>1.10.7</b> Getting the data onto your computer</a></li>
<li class="chapter" data-level="1.10.8" data-path="r-preliminaries.html"><a href="r-preliminaries.html#getting-the-data-into-r"><i class="fa fa-check"></i><b>1.10.8</b> Getting the data into R</a></li>
<li class="chapter" data-level="1.10.9" data-path="r-preliminaries.html"><a href="r-preliminaries.html#checking-out-the-data"><i class="fa fa-check"></i><b>1.10.9</b> Checking out the data</a></li>
<li class="chapter" data-level="1.10.10" data-path="r-preliminaries.html"><a href="r-preliminaries.html#using-the-data-to-answer-questions"><i class="fa fa-check"></i><b>1.10.10</b> Using the data to answer questions</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Part II: Basics</b></span></li>
<li class="chapter" data-level="2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html"><i class="fa fa-check"></i><b>2</b> Entering and cleaning data #1</a>
<ul>
<li class="chapter" data-level="2.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#objectives-1"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#overview"><i class="fa fa-check"></i><b>2.2</b> Overview</a></li>
<li class="chapter" data-level="2.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.3</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-local-flat-files"><i class="fa fa-check"></i><b>2.3.1</b> Reading local flat files</a></li>
<li class="chapter" data-level="2.3.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-in-other-file-types"><i class="fa fa-check"></i><b>2.3.2</b> Reading in other file types</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directories-and-pathnames"><i class="fa fa-check"></i><b>2.4</b> Directories and pathnames</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directory-structure"><i class="fa fa-check"></i><b>2.4.1</b> Directory structure</a></li>
<li class="chapter" data-level="2.4.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#working-directory"><i class="fa fa-check"></i><b>2.4.2</b> Working directory</a></li>
<li class="chapter" data-level="2.4.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#file-and-directory-pathnames"><i class="fa fa-check"></i><b>2.4.3</b> File and directory pathnames</a></li>
<li class="chapter" data-level="2.4.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#diversion-paste"><i class="fa fa-check"></i><b>2.4.4</b> Diversion: <code>paste</code></a></li>
<li class="chapter" data-level="2.4.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-online-flat-files"><i class="fa fa-check"></i><b>2.4.5</b> Reading online flat files</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#data-cleaning"><i class="fa fa-check"></i><b>2.5</b> Data cleaning</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#renaming-columns"><i class="fa fa-check"></i><b>2.5.1</b> Renaming columns</a></li>
<li class="chapter" data-level="2.5.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#selecting-columns"><i class="fa fa-check"></i><b>2.5.2</b> Selecting columns</a></li>
<li class="chapter" data-level="2.5.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#extracting-and-arranging-rows"><i class="fa fa-check"></i><b>2.5.3</b> Extracting and arranging rows</a></li>
<li class="chapter" data-level="2.5.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#slicing-and-sampling"><i class="fa fa-check"></i><b>2.5.4</b> Slicing and sampling</a></li>
<li class="chapter" data-level="2.5.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#arranging-rows"><i class="fa fa-check"></i><b>2.5.5</b> Arranging rows</a></li>
<li class="chapter" data-level="2.5.6" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#filtering-to-certain-rows"><i class="fa fa-check"></i><b>2.5.6</b> Filtering to certain rows</a></li>
<li class="chapter" data-level="2.5.7" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#add-or-change-columns"><i class="fa fa-check"></i><b>2.5.7</b> Add or change columns</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#piping"><i class="fa fa-check"></i><b>2.6</b> Piping</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#base-r-equivalents-to-dplyr-functions"><i class="fa fa-check"></i><b>2.6.1</b> Base R equivalents to <code>dplyr</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#in-course-exercise-chapter-2"><i class="fa fa-check"></i><b>2.7</b> In-course Exercise Chapter 2</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#downloading-and-checking-out-the-example-data"><i class="fa fa-check"></i><b>2.7.1</b> Downloading and checking out the example data</a></li>
<li class="chapter" data-level="2.7.2" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#reading-in-different-types-of-files"><i class="fa fa-check"></i><b>2.7.2</b> Reading in different types of files</a></li>
<li class="chapter" data-level="2.7.3" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#directory-structure-1"><i class="fa fa-check"></i><b>2.7.3</b> Directory structure</a></li>
<li class="chapter" data-level="2.7.4" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#cleaning-up-data-1"><i class="fa fa-check"></i><b>2.7.4</b> Cleaning up data #1</a></li>
<li class="chapter" data-level="2.7.5" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#cleaning-up-data-2"><i class="fa fa-check"></i><b>2.7.5</b> Cleaning up data #2</a></li>
<li class="chapter" data-level="2.7.6" data-path="entering-and-cleaning-data-1.html"><a href="entering-and-cleaning-data-1.html#piping-1"><i class="fa fa-check"></i><b>2.7.6</b> Piping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploring-data-1.html"><a href="exploring-data-1.html"><i class="fa fa-check"></i><b>3</b> Exploring data #1</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#objectives-2"><i class="fa fa-check"></i><b>3.1</b> Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#simple-statistics-functions"><i class="fa fa-check"></i><b>3.2</b> Simple statistics functions</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#summary-statistics"><i class="fa fa-check"></i><b>3.2.1</b> Summary statistics</a></li>
<li class="chapter" data-level="3.2.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#summarize-function"><i class="fa fa-check"></i><b>3.2.2</b> <code>summarize</code> function</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#factor-vectors"><i class="fa fa-check"></i><b>3.3</b> Factor vectors</a></li>
<li class="chapter" data-level="3.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#data-from-a-package"><i class="fa fa-check"></i><b>3.4</b> Data from a package</a></li>
<li class="chapter" data-level="3.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#dates-in-r"><i class="fa fa-check"></i><b>3.5</b> Dates in R</a></li>
<li class="chapter" data-level="3.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#logical-vectors"><i class="fa fa-check"></i><b>3.6</b> Logical vectors</a></li>
<li class="chapter" data-level="3.7" data-path="exploring-data-1.html"><a href="exploring-data-1.html#plots-to-explore-data"><i class="fa fa-check"></i><b>3.7</b> Plots to explore data</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#initializing-a-ggplot-object"><i class="fa fa-check"></i><b>3.7.1</b> Initializing a ggplot object</a></li>
<li class="chapter" data-level="3.7.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#plot-aesthetics"><i class="fa fa-check"></i><b>3.7.2</b> Plot aesthetics</a></li>
<li class="chapter" data-level="3.7.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#adding-geoms"><i class="fa fa-check"></i><b>3.7.3</b> Adding geoms</a></li>
<li class="chapter" data-level="3.7.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#constant-aesthetics"><i class="fa fa-check"></i><b>3.7.4</b> Constant aesthetics</a></li>
<li class="chapter" data-level="3.7.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#useful-plot-additions"><i class="fa fa-check"></i><b>3.7.5</b> Useful plot additions</a></li>
<li class="chapter" data-level="3.7.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#example-dataset"><i class="fa fa-check"></i><b>3.7.6</b> Example dataset</a></li>
<li class="chapter" data-level="3.7.7" data-path="exploring-data-1.html"><a href="exploring-data-1.html#histograms"><i class="fa fa-check"></i><b>3.7.7</b> Histograms</a></li>
<li class="chapter" data-level="3.7.8" data-path="exploring-data-1.html"><a href="exploring-data-1.html#scatterplots"><i class="fa fa-check"></i><b>3.7.8</b> Scatterplots</a></li>
<li class="chapter" data-level="3.7.9" data-path="exploring-data-1.html"><a href="exploring-data-1.html#boxplots"><i class="fa fa-check"></i><b>3.7.9</b> Boxplots</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="exploring-data-1.html"><a href="exploring-data-1.html#in-course-exercise-chapter-3"><i class="fa fa-check"></i><b>3.8</b> In-course Exercise Chapter 3</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="exploring-data-1.html"><a href="exploring-data-1.html#loading-data-from-an-r-package"><i class="fa fa-check"></i><b>3.8.1</b> Loading data from an R package</a></li>
<li class="chapter" data-level="3.8.2" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-simple-statistics-and-summarize"><i class="fa fa-check"></i><b>3.8.2</b> Exploring the data using simple statistics and <code>summarize</code></a></li>
<li class="chapter" data-level="3.8.3" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-logical-statements"><i class="fa fa-check"></i><b>3.8.3</b> Exploring the data using logical statements</a></li>
<li class="chapter" data-level="3.8.4" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-1"><i class="fa fa-check"></i><b>3.8.4</b> Exploring the data using basic plots #1</a></li>
<li class="chapter" data-level="3.8.5" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-2"><i class="fa fa-check"></i><b>3.8.5</b> Exploring the data using basic plots #2</a></li>
<li class="chapter" data-level="3.8.6" data-path="exploring-data-1.html"><a href="exploring-data-1.html#exploring-the-data-using-basic-plots-3"><i class="fa fa-check"></i><b>3.8.6</b> Exploring the data using basic plots #3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html"><i class="fa fa-check"></i><b>4</b> Reporting data results #1</a>
<ul>
<li class="chapter" data-level="4.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#guidelines-for-good-plots"><i class="fa fa-check"></i><b>4.1</b> Guidelines for good plots</a></li>
<li class="chapter" data-level="4.2" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#high-data-density"><i class="fa fa-check"></i><b>4.2</b> High data density</a></li>
<li class="chapter" data-level="4.3" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#meaningful-labels"><i class="fa fa-check"></i><b>4.3</b> Meaningful labels</a></li>
<li class="chapter" data-level="4.4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#references"><i class="fa fa-check"></i><b>4.4</b> References</a></li>
<li class="chapter" data-level="4.5" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#highlighting"><i class="fa fa-check"></i><b>4.5</b> Highlighting</a></li>
<li class="chapter" data-level="4.6" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#order"><i class="fa fa-check"></i><b>4.6</b> Order</a></li>
<li class="chapter" data-level="4.7" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#small-multiples"><i class="fa fa-check"></i><b>4.7</b> Small multiples</a></li>
<li class="chapter" data-level="4.8" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#advanced-customization"><i class="fa fa-check"></i><b>4.8</b> Advanced customization</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#scales"><i class="fa fa-check"></i><b>4.8.1</b> Scales</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#to-find-out-more"><i class="fa fa-check"></i><b>4.9</b> To find out more</a></li>
<li class="chapter" data-level="4.10" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#in-course-exercisechapter-4"><i class="fa fa-check"></i><b>4.10</b> In-course exercise–Chapter 4</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#designing-a-plot"><i class="fa fa-check"></i><b>4.10.1</b> Designing a plot</a></li>
<li class="chapter" data-level="4.10.2" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#implementing-plot-guidelines-1"><i class="fa fa-check"></i><b>4.10.2</b> Implementing plot guidelines #1</a></li>
<li class="chapter" data-level="4.10.3" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#implementing-plot-guidelines-2"><i class="fa fa-check"></i><b>4.10.3</b> Implementing plot guidelines #2</a></li>
<li class="chapter" data-level="4.10.4" data-path="reporting-data-results-1.html"><a href="reporting-data-results-1.html#data-visualization-cheatsheet"><i class="fa fa-check"></i><b>4.10.4</b> Data visualization cheatsheet</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html"><i class="fa fa-check"></i><b>5</b> Reproducible research #1</a>
<ul>
<li class="chapter" data-level="5.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#what-is-reproducible-research"><i class="fa fa-check"></i><b>5.1</b> What is reproducible research?</a></li>
<li class="chapter" data-level="5.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#markdown"><i class="fa fa-check"></i><b>5.2</b> Markdown</a></li>
<li class="chapter" data-level="5.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#literate-programming-in-r"><i class="fa fa-check"></i><b>5.3</b> Literate programming in R</a></li>
<li class="chapter" data-level="5.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#style-guidelines"><i class="fa fa-check"></i><b>5.4</b> Style guidelines</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#line-length"><i class="fa fa-check"></i><b>5.4.1</b> Line length</a></li>
<li class="chapter" data-level="5.4.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#spacing"><i class="fa fa-check"></i><b>5.4.2</b> Spacing</a></li>
<li class="chapter" data-level="5.4.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#semicolons"><i class="fa fa-check"></i><b>5.4.3</b> Semicolons</a></li>
<li class="chapter" data-level="5.4.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#commenting"><i class="fa fa-check"></i><b>5.4.4</b> Commenting</a></li>
<li class="chapter" data-level="5.4.5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#indentation"><i class="fa fa-check"></i><b>5.4.5</b> Indentation</a></li>
<li class="chapter" data-level="5.4.6" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#code-grouping"><i class="fa fa-check"></i><b>5.4.6</b> Code grouping</a></li>
<li class="chapter" data-level="5.4.7" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#broader-guidelines"><i class="fa fa-check"></i><b>5.4.7</b> Broader guidelines</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#more-with-knitr"><i class="fa fa-check"></i><b>5.5</b> More with knitr</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#equations-in-knitr"><i class="fa fa-check"></i><b>5.5.1</b> Equations in <code>knitr</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#figures-from-file"><i class="fa fa-check"></i><b>5.5.2</b> Figures from file</a></li>
<li class="chapter" data-level="5.5.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#saving-graphics-files"><i class="fa fa-check"></i><b>5.5.3</b> Saving graphics files</a></li>
<li class="chapter" data-level="5.5.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#tables-in-r-markdown"><i class="fa fa-check"></i><b>5.5.4</b> Tables in R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#in-course-exercise-chapter-5"><i class="fa fa-check"></i><b>5.6</b> In-course exercise Chapter 5</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#creating-a-markdown-document"><i class="fa fa-check"></i><b>5.6.1</b> Creating a Markdown document</a></li>
<li class="chapter" data-level="5.6.2" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#adding-in-r-code"><i class="fa fa-check"></i><b>5.6.2</b> Adding in R code</a></li>
<li class="chapter" data-level="5.6.3" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#working-with-r-markdown-documents"><i class="fa fa-check"></i><b>5.6.3</b> Working with R Markdown documents</a></li>
<li class="chapter" data-level="5.6.4" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#r-style-guidelines"><i class="fa fa-check"></i><b>5.6.4</b> R style guidelines</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Part III: Intermediate</b></span></li>
<li class="chapter" data-level="6" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html"><i class="fa fa-check"></i><b>6</b> Entering and cleaning data #2</a>
<ul>
<li class="chapter" data-level="6.1" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#tidy-data"><i class="fa fa-check"></i><b>6.1</b> Tidy data</a></li>
<li class="chapter" data-level="6.2" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#joining-datasets"><i class="fa fa-check"></i><b>6.2</b> Joining datasets</a></li>
<li class="chapter" data-level="6.3" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#longer-data"><i class="fa fa-check"></i><b>6.3</b> Longer data</a></li>
<li class="chapter" data-level="6.4" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#working-with-factors"><i class="fa fa-check"></i><b>6.4</b> Working with factors</a></li>
<li class="chapter" data-level="6.5" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#string-operations-and-regular-expressions"><i class="fa fa-check"></i><b>6.5</b> String operations and regular expressions</a></li>
<li class="chapter" data-level="6.6" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#tidy-select"><i class="fa fa-check"></i><b>6.6</b> Tidy select</a></li>
<li class="chapter" data-level="6.7" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#in-course-exercise-chapter-6"><i class="fa fa-check"></i><b>6.7</b> In-course exercise Chapter 6</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#designing-tidy-data"><i class="fa fa-check"></i><b>6.7.1</b> Designing tidy data</a></li>
<li class="chapter" data-level="6.7.2" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#easier-data-wrangling"><i class="fa fa-check"></i><b>6.7.2</b> Easier data wrangling</a></li>
<li class="chapter" data-level="6.7.3" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#more-extensive-data-wrangling"><i class="fa fa-check"></i><b>6.7.3</b> More extensive data wrangling</a></li>
<li class="chapter" data-level="6.7.4" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#tidying-vadeaths-data"><i class="fa fa-check"></i><b>6.7.4</b> Tidying <code>VADeaths</code> data</a></li>
<li class="chapter" data-level="6.7.5" data-path="entering-and-cleaning-data-2.html"><a href="entering-and-cleaning-data-2.html#baby-names"><i class="fa fa-check"></i><b>6.7.5</b> Baby names</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="exploring-data-2.html"><a href="exploring-data-2.html"><i class="fa fa-check"></i><b>7</b> Exploring data #2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#simple-statistical-tests-in-r"><i class="fa fa-check"></i><b>7.1</b> Simple statistical tests in R</a></li>
<li class="chapter" data-level="7.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#matrices"><i class="fa fa-check"></i><b>7.2</b> Matrices</a></li>
<li class="chapter" data-level="7.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#lists"><i class="fa fa-check"></i><b>7.3</b> Lists</a></li>
<li class="chapter" data-level="7.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#apply-a-test-multiple-times"><i class="fa fa-check"></i><b>7.4</b> Apply a test multiple times</a></li>
<li class="chapter" data-level="7.5" data-path="exploring-data-2.html"><a href="exploring-data-2.html#regression-models"><i class="fa fa-check"></i><b>7.5</b> Regression models</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#formula-structure"><i class="fa fa-check"></i><b>7.5.1</b> Formula structure</a></li>
<li class="chapter" data-level="7.5.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#linear-models"><i class="fa fa-check"></i><b>7.5.2</b> Linear models</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="exploring-data-2.html"><a href="exploring-data-2.html#handling-model-objects"><i class="fa fa-check"></i><b>7.6</b> Handling model objects</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomtidy"><i class="fa fa-check"></i><b>7.6.1</b> broom::tidy</a></li>
<li class="chapter" data-level="7.6.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomaugment"><i class="fa fa-check"></i><b>7.6.2</b> broom::augment</a></li>
<li class="chapter" data-level="7.6.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#broomglance"><i class="fa fa-check"></i><b>7.6.3</b> broom::glance</a></li>
<li class="chapter" data-level="7.6.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#references-statistics-in-r"><i class="fa fa-check"></i><b>7.6.4</b> References– statistics in R</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="exploring-data-2.html"><a href="exploring-data-2.html#functions-1"><i class="fa fa-check"></i><b>7.7</b> Functions</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#if-else-statements"><i class="fa fa-check"></i><b>7.7.1</b> if / else statements</a></li>
<li class="chapter" data-level="7.7.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#some-other-control-structures"><i class="fa fa-check"></i><b>7.7.2</b> Some other control structures</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="exploring-data-2.html"><a href="exploring-data-2.html#in-course-exercise-for-chapter-7"><i class="fa fa-check"></i><b>7.8</b> In-course exercise for Chapter 7</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="exploring-data-2.html"><a href="exploring-data-2.html#exploring-taxonomic-profiling-data"><i class="fa fa-check"></i><b>7.8.1</b> Exploring taxonomic profiling data</a></li>
<li class="chapter" data-level="7.8.2" data-path="exploring-data-2.html"><a href="exploring-data-2.html#more-with-baby-names"><i class="fa fa-check"></i><b>7.8.2</b> More with baby names</a></li>
<li class="chapter" data-level="7.8.3" data-path="exploring-data-2.html"><a href="exploring-data-2.html#running-a-simple-statistical-test"><i class="fa fa-check"></i><b>7.8.3</b> Running a simple statistical test</a></li>
<li class="chapter" data-level="7.8.4" data-path="exploring-data-2.html"><a href="exploring-data-2.html#using-regression-models-to-explore-data-1"><i class="fa fa-check"></i><b>7.8.4</b> Using regression models to explore data #1</a></li>
<li class="chapter" data-level="7.8.5" data-path="exploring-data-2.html"><a href="exploring-data-2.html#using-regression-models-to-explore-data-2"><i class="fa fa-check"></i><b>7.8.5</b> Using regression models to explore data #2</a></li>
<li class="chapter" data-level="7.8.6" data-path="exploring-data-2.html"><a href="exploring-data-2.html#trying-out-nesting-and-mapping"><i class="fa fa-check"></i><b>7.8.6</b> Trying out nesting and mapping</a></li>
<li class="chapter" data-level="7.8.7" data-path="exploring-data-2.html"><a href="exploring-data-2.html#writing-functions"><i class="fa fa-check"></i><b>7.8.7</b> Writing functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reporting-results-2.html"><a href="reporting-results-2.html"><i class="fa fa-check"></i><b>8</b> Reporting results #2</a>
<ul>
<li class="chapter" data-level="8.1" data-path="reporting-results-2.html"><a href="reporting-results-2.html#course-lectures"><i class="fa fa-check"></i><b>8.1</b> Course lectures</a></li>
<li class="chapter" data-level="8.2" data-path="reporting-results-2.html"><a href="reporting-results-2.html#example-data"><i class="fa fa-check"></i><b>8.2</b> Example data</a></li>
<li class="chapter" data-level="8.3" data-path="reporting-results-2.html"><a href="reporting-results-2.html#ggplot2-extras-and-extensions"><i class="fa fa-check"></i><b>8.3</b> <code>ggplot2</code> extras and extensions</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="reporting-results-2.html"><a href="reporting-results-2.html#scales-package"><i class="fa fa-check"></i><b>8.3.1</b> <code>scales</code> package</a></li>
<li class="chapter" data-level="8.3.2" data-path="reporting-results-2.html"><a href="reporting-results-2.html#ggplot2-extensions"><i class="fa fa-check"></i><b>8.3.2</b> <code>ggplot2</code> extensions</a></li>
<li class="chapter" data-level="8.3.3" data-path="reporting-results-2.html"><a href="reporting-results-2.html#more-ggplot2-themes"><i class="fa fa-check"></i><b>8.3.3</b> More <code>ggplot2</code> themes</a></li>
<li class="chapter" data-level="8.3.4" data-path="reporting-results-2.html"><a href="reporting-results-2.html#other-useful-ggplot2-extensions"><i class="fa fa-check"></i><b>8.3.4</b> Other useful <code>ggplot2</code> extensions</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="reporting-results-2.html"><a href="reporting-results-2.html#simple-features"><i class="fa fa-check"></i><b>8.4</b> Simple features</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="reporting-results-2.html"><a href="reporting-results-2.html#introduction-to-simple-features"><i class="fa fa-check"></i><b>8.4.1</b> Introduction to simple features</a></li>
<li class="chapter" data-level="8.4.2" data-path="reporting-results-2.html"><a href="reporting-results-2.html#state-boundaries"><i class="fa fa-check"></i><b>8.4.2</b> State boundaries</a></li>
<li class="chapter" data-level="8.4.3" data-path="reporting-results-2.html"><a href="reporting-results-2.html#creating-an-sf-object"><i class="fa fa-check"></i><b>8.4.3</b> Creating an <code>sf</code> object</a></li>
<li class="chapter" data-level="8.4.4" data-path="reporting-results-2.html"><a href="reporting-results-2.html#reading-in-from-gis-files"><i class="fa fa-check"></i><b>8.4.4</b> Reading in from GIS files</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="reporting-results-2.html"><a href="reporting-results-2.html#in-course-exercise-chapter-8"><i class="fa fa-check"></i><b>8.5</b> In-course exercise Chapter 8</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="reporting-results-2.html"><a href="reporting-results-2.html#getting-and-cleaning-the-example-data"><i class="fa fa-check"></i><b>8.5.1</b> Getting and cleaning the example data</a></li>
<li class="chapter" data-level="8.5.2" data-path="reporting-results-2.html"><a href="reporting-results-2.html#trying-out-ggplot2-extensions"><i class="fa fa-check"></i><b>8.5.2</b> Trying out <code>ggplot2</code> extensions</a></li>
<li class="chapter" data-level="8.5.3" data-path="reporting-results-2.html"><a href="reporting-results-2.html#using-simple-features-to-map"><i class="fa fa-check"></i><b>8.5.3</b> Using simple features to map</a></li>
<li class="chapter" data-level="8.5.4" data-path="reporting-results-2.html"><a href="reporting-results-2.html#more-on-mapping"><i class="fa fa-check"></i><b>8.5.4</b> More on mapping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html"><i class="fa fa-check"></i><b>9</b> Reproducible research #2</a>
<ul>
<li class="chapter" data-level="9.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#templates"><i class="fa fa-check"></i><b>9.1</b> Templates</a></li>
<li class="chapter" data-level="9.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#r-projects"><i class="fa fa-check"></i><b>9.2</b> R Projects</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#organization"><i class="fa fa-check"></i><b>9.2.1</b> Organization</a></li>
<li class="chapter" data-level="9.2.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#creating-r-projects"><i class="fa fa-check"></i><b>9.2.2</b> Creating R Projects</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#git"><i class="fa fa-check"></i><b>9.3</b> git</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#initializing-a-git-repository"><i class="fa fa-check"></i><b>9.3.1</b> Initializing a git repository</a></li>
<li class="chapter" data-level="9.3.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#committing"><i class="fa fa-check"></i><b>9.3.2</b> Committing</a></li>
<li class="chapter" data-level="9.3.3" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#browsing-history"><i class="fa fa-check"></i><b>9.3.3</b> Browsing history</a></li>
<li class="chapter" data-level="9.3.4" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#linking-local-repo-to-github-repo"><i class="fa fa-check"></i><b>9.3.4</b> Linking local repo to GitHub repo</a></li>
<li class="chapter" data-level="9.3.5" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#syncing-rstudio-and-github"><i class="fa fa-check"></i><b>9.3.5</b> Syncing RStudio and GitHub</a></li>
<li class="chapter" data-level="9.3.6" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#issues"><i class="fa fa-check"></i><b>9.3.6</b> Issues</a></li>
<li class="chapter" data-level="9.3.7" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#pull-request"><i class="fa fa-check"></i><b>9.3.7</b> Pull request</a></li>
<li class="chapter" data-level="9.3.8" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#merge-conflicts"><i class="fa fa-check"></i><b>9.3.8</b> Merge conflicts</a></li>
<li class="chapter" data-level="9.3.9" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#find-out-more"><i class="fa fa-check"></i><b>9.3.9</b> Find out more</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#in-course-exercise-chapter-9"><i class="fa fa-check"></i><b>9.4</b> In-course exercise Chapter 9</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#organizing-a-project"><i class="fa fa-check"></i><b>9.4.1</b> Organizing a project</a></li>
<li class="chapter" data-level="9.4.2" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#initializing-git-for-an-r-project"><i class="fa fa-check"></i><b>9.4.2</b> Initializing git for an R Project</a></li>
<li class="chapter" data-level="9.4.3" data-path="reproducible-research-2.html"><a href="reproducible-research-2.html#linking-your-project-with-a-github-repository"><i class="fa fa-check"></i><b>9.4.3</b> Linking your project with a GitHub repository</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Part IV: Advanced</b></span></li>
<li class="chapter" data-level="10" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html"><i class="fa fa-check"></i><b>10</b> Entering and cleaning data #3</a>
<ul>
<li class="chapter" data-level="10.1" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#pulling-online-data"><i class="fa fa-check"></i><b>10.1</b> Pulling online data</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#apis"><i class="fa fa-check"></i><b>10.1.1</b> APIs</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#example-r-api-wrapper-packages"><i class="fa fa-check"></i><b>10.2</b> Example R API wrapper packages</a></li>
<li class="chapter" data-level="10.3" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#tigris-package"><i class="fa fa-check"></i><b>10.3</b> <code>tigris</code> package</a></li>
<li class="chapter" data-level="10.4" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#countyweather"><i class="fa fa-check"></i><b>10.4</b> <code>countyweather</code></a></li>
<li class="chapter" data-level="10.5" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#cleaning-very-messy-data"><i class="fa fa-check"></i><b>10.5</b> Cleaning very messy data</a></li>
<li class="chapter" data-level="10.6" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#in-course-exercise-chapter-10"><i class="fa fa-check"></i><b>10.6</b> In-course exercise Chapter 10</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#working-with-an-api-wrapper-package"><i class="fa fa-check"></i><b>10.6.1</b> Working with an API wrapper package</a></li>
<li class="chapter" data-level="10.6.2" data-path="entering-and-cleaning-data-3.html"><a href="entering-and-cleaning-data-3.html#cleaning-very-messy-data-1"><i class="fa fa-check"></i><b>10.6.2</b> Cleaning very messy data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="exploring-data-3.html"><a href="exploring-data-3.html"><i class="fa fa-check"></i><b>11</b> Exploring data #3</a>
<ul>
<li class="chapter" data-level="11.1" data-path="exploring-data-3.html"><a href="exploring-data-3.html#simulations"><i class="fa fa-check"></i><b>11.1</b> Simulations</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="exploring-data-3.html"><a href="exploring-data-3.html#the-lady-tasting-tea"><i class="fa fa-check"></i><b>11.1.1</b> The lady tasting tea</a></li>
<li class="chapter" data-level="11.1.2" data-path="exploring-data-3.html"><a href="exploring-data-3.html#playing-darts"><i class="fa fa-check"></i><b>11.1.2</b> Playing darts</a></li>
<li class="chapter" data-level="11.1.3" data-path="exploring-data-3.html"><a href="exploring-data-3.html#simulations-in-research"><i class="fa fa-check"></i><b>11.1.3</b> Simulations in research</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="exploring-data-3.html"><a href="exploring-data-3.html#other-computationally-intensive-approaches"><i class="fa fa-check"></i><b>11.2</b> Other computationally-intensive approaches</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="exploring-data-3.html"><a href="exploring-data-3.html#bootstrap-and-friends"><i class="fa fa-check"></i><b>11.2.1</b> Bootstrap and friends</a></li>
<li class="chapter" data-level="11.2.2" data-path="exploring-data-3.html"><a href="exploring-data-3.html#bayesian-analysis"><i class="fa fa-check"></i><b>11.2.2</b> Bayesian analysis</a></li>
<li class="chapter" data-level="11.2.3" data-path="exploring-data-3.html"><a href="exploring-data-3.html#ensemble-models-and-friends"><i class="fa fa-check"></i><b>11.2.3</b> Ensemble models and friends</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html"><i class="fa fa-check"></i><b>12</b> Reporting data results #3</a>
<ul>
<li class="chapter" data-level="12.1" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#shiny-web-apps"><i class="fa fa-check"></i><b>12.1</b> Shiny web apps</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#resources-for-learning-shiny"><i class="fa fa-check"></i><b>12.1.1</b> Resources for learning Shiny</a></li>
<li class="chapter" data-level="12.1.2" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#basics-of-shiny-apps"><i class="fa fa-check"></i><b>12.1.2</b> Basics of Shiny apps</a></li>
<li class="chapter" data-level="12.1.3" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#server.r-file"><i class="fa fa-check"></i><b>12.1.3</b> <code>server.R</code> file</a></li>
<li class="chapter" data-level="12.1.4" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#ui.r-file"><i class="fa fa-check"></i><b>12.1.4</b> <code>ui.R</code> file</a></li>
<li class="chapter" data-level="12.1.5" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#making-a-shiny-app"><i class="fa fa-check"></i><b>12.1.5</b> Making a Shiny app</a></li>
<li class="chapter" data-level="12.1.6" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#starting-with-the-ui.r-file"><i class="fa fa-check"></i><b>12.1.6</b> Starting with the <code>ui.R</code> file</a></li>
<li class="chapter" data-level="12.1.7" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#adding-in-widgets"><i class="fa fa-check"></i><b>12.1.7</b> Adding in widgets</a></li>
<li class="chapter" data-level="12.1.8" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#creating-output-in-server.r"><i class="fa fa-check"></i><b>12.1.8</b> Creating output in <code>server.R</code></a></li>
<li class="chapter" data-level="12.1.9" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#making-the-output-reactive"><i class="fa fa-check"></i><b>12.1.9</b> Making the output reactive</a></li>
<li class="chapter" data-level="12.1.10" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#fancier-version"><i class="fa fa-check"></i><b>12.1.10</b> Fancier version</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#htmlwidgets"><i class="fa fa-check"></i><b>12.2</b> htmlWidgets</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#overview-of-htmlwidgets"><i class="fa fa-check"></i><b>12.2.1</b> Overview of htmlWidgets</a></li>
<li class="chapter" data-level="12.2.2" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#plotly-package"><i class="fa fa-check"></i><b>12.2.2</b> <code>plotly</code> package</a></li>
<li class="chapter" data-level="12.2.3" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#rbokeh-package"><i class="fa fa-check"></i><b>12.2.3</b> <code>rbokeh</code> package</a></li>
<li class="chapter" data-level="12.2.4" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#dygraphs-package"><i class="fa fa-check"></i><b>12.2.4</b> <code>dygraphs</code> package</a></li>
<li class="chapter" data-level="12.2.5" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#dt-package"><i class="fa fa-check"></i><b>12.2.5</b> <code>DT</code> package</a></li>
<li class="chapter" data-level="12.2.6" data-path="reporting-data-results-3.html"><a href="reporting-data-results-3.html#creating-your-own-widget"><i class="fa fa-check"></i><b>12.2.6</b> Creating your own widget</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html"><i class="fa fa-check"></i><b>13</b> Reproducible research #3</a>
<ul>
<li class="chapter" data-level="13.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#overview-of-r-packages"><i class="fa fa-check"></i><b>13.1</b> Overview of R packages</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#what-is-an-r-package"><i class="fa fa-check"></i><b>13.1.1</b> What is an R package?</a></li>
<li class="chapter" data-level="13.1.2" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#example-nmmaps-package"><i class="fa fa-check"></i><b>13.1.2</b> Example: NMMAPS package</a></li>
<li class="chapter" data-level="13.1.3" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#sharing-an-r-package"><i class="fa fa-check"></i><b>13.1.3</b> Sharing an R package</a></li>
<li class="chapter" data-level="13.1.4" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#package-names"><i class="fa fa-check"></i><b>13.1.4</b> Package names</a></li>
<li class="chapter" data-level="13.1.5" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#package-maintainer"><i class="fa fa-check"></i><b>13.1.5</b> Package maintainer</a></li>
<li class="chapter" data-level="13.1.6" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#find-out-more-1"><i class="fa fa-check"></i><b>13.1.6</b> Find out more</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#basic-example-package-weathermetrics"><i class="fa fa-check"></i><b>13.2</b> Basic example package: <code>weathermetrics</code></a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#contents-of-weathermetrics-package"><i class="fa fa-check"></i><b>13.2.1</b> Contents of weathermetrics package</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#elements-of-an-r-package"><i class="fa fa-check"></i><b>13.3</b> Elements of an R package</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#basic-elements"><i class="fa fa-check"></i><b>13.3.1</b> Basic elements</a></li>
<li class="chapter" data-level="13.3.2" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#description-file"><i class="fa fa-check"></i><b>13.3.2</b> DESCRIPTION file</a></li>
<li class="chapter" data-level="13.3.3" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#r-folder"><i class="fa fa-check"></i><b>13.3.3</b> R folder</a></li>
<li class="chapter" data-level="13.3.4" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#other-common-elements"><i class="fa fa-check"></i><b>13.3.4</b> Other common elements</a></li>
<li class="chapter" data-level="13.3.5" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#less-common-elements"><i class="fa fa-check"></i><b>13.3.5</b> Less common elements</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#creating-an-r-package"><i class="fa fa-check"></i><b>13.4</b> Creating an R package</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#initializing-an-r-package"><i class="fa fa-check"></i><b>13.4.1</b> Initializing an R package</a></li>
<li class="chapter" data-level="13.4.2" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#working-on-an-r-package"><i class="fa fa-check"></i><b>13.4.2</b> Working on an R package</a></li>
<li class="chapter" data-level="13.4.3" data-path="reproducible-research-3.html"><a href="reproducible-research-3.html#finalizing-an-r-package"><i class="fa fa-check"></i><b>13.4.3</b> Finalizing an R package</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html"><i class="fa fa-check"></i><b>A</b> Appendix A: Vocabulary</a>
<ul>
<li class="chapter" data-level="A.1" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-1r-preliminaries"><i class="fa fa-check"></i><b>A.1</b> Quiz 1—R Preliminaries</a></li>
<li class="chapter" data-level="A.2" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-2entering-cleaning-data-1"><i class="fa fa-check"></i><b>A.2</b> Quiz 2—Entering / cleaning data #1</a></li>
<li class="chapter" data-level="A.3" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-3"><i class="fa fa-check"></i><b>A.3</b> Quiz 3</a></li>
<li class="chapter" data-level="A.4" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-4"><i class="fa fa-check"></i><b>A.4</b> Quiz 4</a></li>
<li class="chapter" data-level="A.5" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-5"><i class="fa fa-check"></i><b>A.5</b> Quiz 5</a></li>
<li class="chapter" data-level="A.6" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-6"><i class="fa fa-check"></i><b>A.6</b> Quiz 6</a></li>
<li class="chapter" data-level="A.7" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-7"><i class="fa fa-check"></i><b>A.7</b> Quiz 7</a></li>
<li class="chapter" data-level="A.8" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-8"><i class="fa fa-check"></i><b>A.8</b> Quiz 8</a></li>
<li class="chapter" data-level="A.9" data-path="appendix-a-vocabulary.html"><a href="appendix-a-vocabulary.html#quiz-9"><i class="fa fa-check"></i><b>A.9</b> Quiz 9</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html"><i class="fa fa-check"></i><b>B</b> Appendix B: Homework</a>
<ul>
<li class="chapter" data-level="B.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-1"><i class="fa fa-check"></i><b>B.1</b> Homework #1</a>
<ul>
<li class="chapter" data-level="B.1.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#option-1"><i class="fa fa-check"></i><b>B.1.1</b> Option 1</a></li>
<li class="chapter" data-level="B.1.2" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#option-2"><i class="fa fa-check"></i><b>B.1.2</b> Option 2</a></li>
<li class="chapter" data-level="B.1.3" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#special-swirl-commands"><i class="fa fa-check"></i><b>B.1.3</b> Special swirl commands</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-2"><i class="fa fa-check"></i><b>B.2</b> Homework #2</a></li>
<li class="chapter" data-level="B.3" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-3"><i class="fa fa-check"></i><b>B.3</b> Homework #3</a></li>
<li class="chapter" data-level="B.4" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-4"><i class="fa fa-check"></i><b>B.4</b> Homework #4</a></li>
<li class="chapter" data-level="B.5" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-5"><i class="fa fa-check"></i><b>B.5</b> Homework #5</a>
<ul>
<li class="chapter" data-level="B.5.1" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#setting-up-a-github-repository-for-this-project"><i class="fa fa-check"></i><b>B.5.1</b> Setting up a GitHub repository for this project</a></li>
</ul></li>
<li class="chapter" data-level="B.6" data-path="appendix-b-homework.html"><a href="appendix-b-homework.html#homework-6"><i class="fa fa-check"></i><b>B.6</b> Homework #6</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Programming for Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reporting-results-2" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapter 8</span> Reporting results #2<a href="reporting-results-2.html#reporting-results-2" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://github.com/geanders/RProgrammingForResearch/raw/master/slides/CourseNotes_Week9a.pdf">Download</a> a pdf of the lecture slides covering this topic.</p>
<div id="course-lectures" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Course lectures<a href="reporting-results-2.html#course-lectures" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In 2019, we cancelled our in-course meeting for bad weather.</p>
<p>There are videos of the lecture available, covering ggplot2 extensions and mapping in ggplot:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/aUwsIHii_UQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/laZpOPOsN3s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RheCnDJ_SgU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p>Example commit.</p>
</div>
<div id="example-data" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Example data<a href="reporting-results-2.html#example-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This week, we’ll be using some example data from NOAA’s Storm Events Database.
This data lists major weather-related storm events during 2017.
For each event, it includes information like the start and end dates, where it
happened, associated deaths, injuries, and property damage, and some other
characteristics.</p>
<p>See the in-course
exercises for this week for more on getting and cleaning this data. As part of the in-course
exercise, you’ll be making the following plot and saving it as the object <code>storm_plot</code>:</p>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-523-1.png" width="576" /></p>
<p>We’ll be using the data and this plot in the next sections.</p>
</div>
<div id="ggplot2-extras-and-extensions" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> <code>ggplot2</code> extras and extensions<a href="reporting-results-2.html#ggplot2-extras-and-extensions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="scales-package" class="section level3 hasAnchor" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> <code>scales</code> package<a href="reporting-results-2.html#scales-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>scales</code> package gives you a few more options for labeling with
your <code>ggplot</code> scales. For example, if you wanted to change the notation
for the axes in the plot of state area versus number of storm events,
you could use the <code>scales</code> package to add commas to the numeric axis values.</p>
<p>For the rest of these slides, I’ve saved the <code>ggplot</code> object with out plot to
the object named <code>storm_plot</code>, so we don’t have to repeat that code every time.</p>
<div class="sourceCode" id="cb957"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb957-1"><a href="reporting-results-2.html#cb957-1" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb957-2"><a href="reporting-results-2.html#cb957-2" tabindex="-1"></a>storm_plot <span class="sc">+</span> </span>
<span id="cb957-3"><a href="reporting-results-2.html#cb957-3" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span> </span>
<span id="cb957-4"><a href="reporting-results-2.html#cb957-4" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma)</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-524-1.png" width="576" /></p>
<p>The <code>scales</code> package also includes labeling functions for:</p>
<ul>
<li>dollars (<code>labels = dollar</code>)</li>
<li>percent (<code>labels = percent</code>)</li>
</ul>
</div>
<div id="ggplot2-extensions" class="section level3 hasAnchor" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> <code>ggplot2</code> extensions<a href="reporting-results-2.html#ggplot2-extensions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>ggplot2</code> framework is set up so that others can create packages that “extend”
the system, creating functions that can be added on as layers to a ggplot object.
Some of the types of extensions available include:</p>
<ul>
<li>More themes</li>
<li>Useful additions (things that you may be able to do without the package, but that
the package makes easier)</li>
<li>Tools for plotting different types of data</li>
</ul>
<p>There is a gallery with links to <code>ggplot2</code> extensions at <a href="https://exts.ggplot2.tidyverse.org/gallery/" class="uri">https://exts.ggplot2.tidyverse.org/gallery/</a>
This list may not be exhaustive—there may be other extensions on CRAN or on GitHub
that the package maintainer did not submit for this gallery.</p>
</div>
<div id="more-ggplot2-themes" class="section level3 hasAnchor" number="8.3.3">
<h3><span class="header-section-number">8.3.3</span> More <code>ggplot2</code> themes<a href="reporting-results-2.html#more-ggplot2-themes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You have already played around a lot with using <code>ggplot</code> themes to change how your
graphs look.
Several people have created packages with additional themes:</p>
<ul>
<li><code>ggthemes</code></li>
<li><code>ggthemr</code></li>
<li><code>ggtech</code></li>
<li><code>ggsci</code></li>
</ul>
<div class="sourceCode" id="cb958"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb958-1"><a href="reporting-results-2.html#cb958-1" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb958-2"><a href="reporting-results-2.html#cb958-2" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb958-3"><a href="reporting-results-2.html#cb958-3" tabindex="-1"></a></span>
<span id="cb958-4"><a href="reporting-results-2.html#cb958-4" tabindex="-1"></a>a <span class="ot">&lt;-</span> storm_plot <span class="sc">+</span></span>
<span id="cb958-5"><a href="reporting-results-2.html#cb958-5" tabindex="-1"></a>  <span class="fu">theme_fivethirtyeight</span>() <span class="sc">+</span> </span>
<span id="cb958-6"><a href="reporting-results-2.html#cb958-6" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Five Thirty Eight&quot;</span>)</span>
<span id="cb958-7"><a href="reporting-results-2.html#cb958-7" tabindex="-1"></a>b <span class="ot">&lt;-</span> storm_plot <span class="sc">+</span></span>
<span id="cb958-8"><a href="reporting-results-2.html#cb958-8" tabindex="-1"></a>  <span class="fu">theme_economist</span>() <span class="sc">+</span> </span>
<span id="cb958-9"><a href="reporting-results-2.html#cb958-9" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Economist&quot;</span>)</span>
<span id="cb958-10"><a href="reporting-results-2.html#cb958-10" tabindex="-1"></a>c <span class="ot">&lt;-</span> storm_plot <span class="sc">+</span></span>
<span id="cb958-11"><a href="reporting-results-2.html#cb958-11" tabindex="-1"></a>  <span class="fu">theme_excel</span>() <span class="sc">+</span> </span>
<span id="cb958-12"><a href="reporting-results-2.html#cb958-12" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Excel&quot;</span>)</span>
<span id="cb958-13"><a href="reporting-results-2.html#cb958-13" tabindex="-1"></a>d <span class="ot">&lt;-</span> storm_plot <span class="sc">+</span></span>
<span id="cb958-14"><a href="reporting-results-2.html#cb958-14" tabindex="-1"></a>  <span class="fu">theme_few</span>() <span class="sc">+</span> </span>
<span id="cb958-15"><a href="reporting-results-2.html#cb958-15" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Stephen Few&quot;</span>)</span>
<span id="cb958-16"><a href="reporting-results-2.html#cb958-16" tabindex="-1"></a></span>
<span id="cb958-17"><a href="reporting-results-2.html#cb958-17" tabindex="-1"></a><span class="fu">grid.arrange</span>(a, b, c, d, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-525-1.png" width="1152" /></p>
</div>
<div id="other-useful-ggplot2-extensions" class="section level3 hasAnchor" number="8.3.4">
<h3><span class="header-section-number">8.3.4</span> Other useful <code>ggplot2</code> extensions<a href="reporting-results-2.html#other-useful-ggplot2-extensions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Other <code>ggplot2</code> extensions do things you might have been able to figure out how
to do without the extension, but the extension makes it much easier to do.
These tasks include:</p>
<ul>
<li>Highlighting interesting points</li>
<li>“Repelling” text labels</li>
<li>Arranging plots</li>
</ul>
<div id="repelling-highlighting-with-text-labels" class="section level4 hasAnchor" number="8.3.4.1">
<h4><span class="header-section-number">8.3.4.1</span> Repelling / highlighting with text labels<a href="reporting-results-2.html#repelling-highlighting-with-text-labels" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The first is repelling text labels.
When you add labels to points on a plot, they often overlap:</p>
<div class="sourceCode" id="cb959"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb959-1"><a href="reporting-results-2.html#cb959-1" tabindex="-1"></a>storm_plot <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span> region) <span class="sc">+</span> </span>
<span id="cb959-2"><a href="reporting-results-2.html#cb959-2" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> state))</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-526-1.png" width="960" /></p>
<p>The <code>ggrepel</code> package helps make sure that these labels don’t overlap:</p>
<div class="sourceCode" id="cb960"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb960-1"><a href="reporting-results-2.html#cb960-1" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb960-2"><a href="reporting-results-2.html#cb960-2" tabindex="-1"></a>storm_plot <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span> region) <span class="sc">+</span> </span>
<span id="cb960-3"><a href="reporting-results-2.html#cb960-3" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> state))</span></code></pre></div>
<pre><code>## Warning: ggrepel: 5 unlabeled data points (too many overlaps). Consider
## increasing max.overlaps</code></pre>
<pre><code>## Warning: ggrepel: 3 unlabeled data points (too many overlaps). Consider
## increasing max.overlaps</code></pre>
<pre><code>## Warning: ggrepel: 12 unlabeled data points (too many overlaps). Consider
## increasing max.overlaps</code></pre>
<pre><code>## Warning: ggrepel: 10 unlabeled data points (too many overlaps). Consider
## increasing max.overlaps</code></pre>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-527-1.png" width="960" /></p>
<p>It may be too much to label every point. Instead, you may just want to
highlight notable point.
You can use the <code>gghighlight</code> package to do that.</p>
<div class="sourceCode" id="cb965"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb965-1"><a href="reporting-results-2.html#cb965-1" tabindex="-1"></a><span class="fu">library</span>(gghighlight)</span>
<span id="cb965-2"><a href="reporting-results-2.html#cb965-2" tabindex="-1"></a>storm_plot <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span> region) <span class="sc">+</span> </span>
<span id="cb965-3"><a href="reporting-results-2.html#cb965-3" tabindex="-1"></a>  <span class="fu">gghighlight</span>(area <span class="sc">&gt;</span> <span class="dv">150000</span> <span class="sc">|</span> n <span class="sc">&gt;</span> <span class="dv">1500</span>, <span class="at">label_key =</span> state)</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-528-1.png" width="768" /></p>
<p>The <code>gghighlight</code> package also works for things like histograms. For example, you could
create a dataset with the count by day-of-year of certain types of events:</p>
<div class="sourceCode" id="cb966"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb966-1"><a href="reporting-results-2.html#cb966-1" tabindex="-1"></a>storms_by_month <span class="ot">&lt;-</span> storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb966-2"><a href="reporting-results-2.html#cb966-2" tabindex="-1"></a>  <span class="fu">filter</span>(event_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Flood&quot;</span>, <span class="st">&quot;Flash Flood&quot;</span>, <span class="st">&quot;Heavy Rain&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb966-3"><a href="reporting-results-2.html#cb966-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(begin_date_time, <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb966-4"><a href="reporting-results-2.html#cb966-4" tabindex="-1"></a>  <span class="fu">group_by</span>(month, event_type) <span class="sc">%&gt;%</span> </span>
<span id="cb966-5"><a href="reporting-results-2.html#cb966-5" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb966-6"><a href="reporting-results-2.html#cb966-6" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb966-7"><a href="reporting-results-2.html#cb966-7" tabindex="-1"></a>storms_by_month <span class="sc">%&gt;%</span> </span>
<span id="cb966-8"><a href="reporting-results-2.html#cb966-8" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   month event_type      n
##   &lt;ord&gt; &lt;chr&gt;       &lt;int&gt;
## 1 Jan   Flash Flood   113
## 2 Jan   Flood         255
## 3 Jan   Heavy Rain     80
## 4 Feb   Flash Flood    65</code></pre>
<div class="sourceCode" id="cb968"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb968-1"><a href="reporting-results-2.html#cb968-1" tabindex="-1"></a><span class="fu">ggplot</span>(storms_by_month, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> n, <span class="at">group =</span> event_type)) <span class="sc">+</span>  </span>
<span id="cb968-2"><a href="reporting-results-2.html#cb968-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb968-3"><a href="reporting-results-2.html#cb968-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Month&quot;</span>, <span class="at">y =</span> <span class="st">&quot;# of events&quot;</span>) <span class="sc">+</span> </span>
<span id="cb968-4"><a href="reporting-results-2.html#cb968-4" tabindex="-1"></a>  <span class="fu">gghighlight</span>(<span class="fu">max</span>(n) <span class="sc">&gt;</span> <span class="dv">400</span>, <span class="at">label_key =</span> event_type) <span class="sc">+</span></span>
<span id="cb968-5"><a href="reporting-results-2.html#cb968-5" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> event_type, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-530-1.png" width="672" /></p>
</div>
<div id="arranging-plots" class="section level4 hasAnchor" number="8.3.4.2">
<h4><span class="header-section-number">8.3.4.2</span> Arranging plots<a href="reporting-results-2.html#arranging-plots" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You may have multiple related plots you want to have as multiple panels of a
single figure.
There are a few packages that help with this. One very good one is <code>patchwork</code>.
You need to install this from GitHub:</p>
<div class="sourceCode" id="cb969"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb969-1"><a href="reporting-results-2.html#cb969-1" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;thomasp85/patchwork&quot;</span>)</span></code></pre></div>
<p>Find out more: <a href="https://github.com/thomasp85/patchwork#patchwork" class="uri">https://github.com/thomasp85/patchwork#patchwork</a></p>
<p>Say we want to plot seasonal patterns in events in the five counties with
the highest number of events in 2017. We can use <code>dplyr</code> to figure out these
counties:</p>
<div class="sourceCode" id="cb970"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb970-1"><a href="reporting-results-2.html#cb970-1" tabindex="-1"></a>top_counties <span class="ot">&lt;-</span> storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb970-2"><a href="reporting-results-2.html#cb970-2" tabindex="-1"></a>  <span class="fu">group_by</span>(fips, state, cz_name) <span class="sc">%&gt;%</span> </span>
<span id="cb970-3"><a href="reporting-results-2.html#cb970-3" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb970-4"><a href="reporting-results-2.html#cb970-4" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb970-5"><a href="reporting-results-2.html#cb970-5" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">5</span>, <span class="at">wt =</span> n) </span></code></pre></div>
<p>Then create a plot with the time patterns:</p>
<div class="sourceCode" id="cb971"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb971-1"><a href="reporting-results-2.html#cb971-1" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb971-2"><a href="reporting-results-2.html#cb971-2" tabindex="-1"></a>top_counties_month <span class="ot">&lt;-</span> storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb971-3"><a href="reporting-results-2.html#cb971-3" tabindex="-1"></a>  <span class="fu">semi_join</span>(top_counties, <span class="at">by =</span> <span class="st">&quot;fips&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb971-4"><a href="reporting-results-2.html#cb971-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(begin_date_time),</span>
<span id="cb971-5"><a href="reporting-results-2.html#cb971-5" tabindex="-1"></a>         <span class="at">county =</span> <span class="fu">paste</span>(cz_name, <span class="st">&quot; County, &quot;</span>, state, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb971-6"><a href="reporting-results-2.html#cb971-6" tabindex="-1"></a>  <span class="fu">count</span>(county, month) <span class="sc">%&gt;%</span> </span>
<span id="cb971-7"><a href="reporting-results-2.html#cb971-7" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> n)) <span class="sc">+</span> </span>
<span id="cb971-8"><a href="reporting-results-2.html#cb971-8" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb971-9"><a href="reporting-results-2.html#cb971-9" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">fct_reorder</span>(county, n, <span class="at">.fun =</span> sum, <span class="at">.desc =</span> <span class="cn">TRUE</span>), <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb971-10"><a href="reporting-results-2.html#cb971-10" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">&quot;&quot;</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">10</span>),</span>
<span id="cb971-11"><a href="reporting-results-2.html#cb971-11" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Oct&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb971-12"><a href="reporting-results-2.html#cb971-12" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>))</span></code></pre></div>
<p>Here’s this plot:</p>
<div class="sourceCode" id="cb972"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb972-1"><a href="reporting-results-2.html#cb972-1" tabindex="-1"></a>top_counties_month</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-534-1.png" width="576" /></p>
<p>Now that you have two ggplot objects (<code>storm_plot</code> and <code>top_counties_month</code>), you can use
<code>patchwork</code> to put them together:</p>
<div class="sourceCode" id="cb973"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb973-1"><a href="reporting-results-2.html#cb973-1" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb973-2"><a href="reporting-results-2.html#cb973-2" tabindex="-1"></a>storm_plot <span class="sc">+</span></span>
<span id="cb973-3"><a href="reporting-results-2.html#cb973-3" tabindex="-1"></a>  top_counties_month <span class="sc">+</span> </span>
<span id="cb973-4"><a href="reporting-results-2.html#cb973-4" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-535-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>A slightly fancier version:</p>
<div class="sourceCode" id="cb974"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb974-1"><a href="reporting-results-2.html#cb974-1" tabindex="-1"></a>(storm_plot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">+</span> </span>
<span id="cb974-2"><a href="reporting-results-2.html#cb974-2" tabindex="-1"></a>    <span class="fu">gghighlight</span>(n <span class="sc">&gt;</span> <span class="dv">1500</span> <span class="sc">|</span> area <span class="sc">&gt;</span> <span class="dv">200000</span>, </span>
<span id="cb974-3"><a href="reporting-results-2.html#cb974-3" tabindex="-1"></a>                <span class="at">label_key =</span> state)) <span class="sc">+</span></span>
<span id="cb974-4"><a href="reporting-results-2.html#cb974-4" tabindex="-1"></a>  top_counties_month <span class="sc">+</span> </span>
<span id="cb974-5"><a href="reporting-results-2.html#cb974-5" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-536-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>Other packages for arranging <code>ggplot</code> objects include:</p>
<ul>
<li><code>gridExtra</code></li>
<li><code>cowplot</code></li>
</ul>
</div>
</div>
</div>
<div id="simple-features" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Simple features<a href="reporting-results-2.html#simple-features" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="introduction-to-simple-features" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Introduction to simple features<a href="reporting-results-2.html#introduction-to-simple-features" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>sf</code> objects: “Simple features”</p>
<ul>
<li>R framework that is in active development</li>
<li>There will likely be changes in the near future</li>
<li>Plays very well with tidyverse functions, including <code>dplyr</code> and <code>ggplot2</code> tools</li>
</ul>
<div class="sourceCode" id="cb975"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb975-1"><a href="reporting-results-2.html#cb975-1" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code></pre></div>
<p>To show simple features, we’ll pull in the Colorado county boundaries from the U.S. Census.</p>
<p>To do this, we’ll use the <code>tigris</code> package, which accesses the U.S. Census API. It allows you
to pull geographic data for U.S. counties, states, tracts, voting districts, roads, rails,
and a number of other geographies.</p>
<p>To learn more about the <code>tigris</code> package, check out this article:
<a href="https://journal.r-project.org/archive/2016/RJ-2016-043/index.html" class="uri">https://journal.r-project.org/archive/2016/RJ-2016-043/index.html</a></p>
<p>With <code>tigris</code>, you can read in data for county boundaries using the <code>counties</code>
function.</p>
<p>We’ll use the option
<code>class = "sf"</code> to read these spatial dataframes in as <code>sf</code> objects.</p>
<div class="sourceCode" id="cb976"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb976-1"><a href="reporting-results-2.html#cb976-1" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb976-2"><a href="reporting-results-2.html#cb976-2" tabindex="-1"></a>co_counties <span class="ot">&lt;-</span> <span class="fu">counties</span>(<span class="at">state =</span> <span class="st">&quot;CO&quot;</span>, <span class="at">cb =</span> <span class="cn">TRUE</span>, <span class="at">class =</span> <span class="st">&quot;sf&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb977"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb977-1"><a href="reporting-results-2.html#cb977-1" tabindex="-1"></a><span class="fu">class</span>(co_counties)</span></code></pre></div>
<pre><code>## [1] &quot;sf&quot;         &quot;data.frame&quot;</code></pre>
<p>You can think of an <code>sf</code> object as a dataframe, but with one special column called <code>geometry</code>.</p>
<div class="sourceCode" id="cb979"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb979-1"><a href="reporting-results-2.html#cb979-1" tabindex="-1"></a>co_counties <span class="sc">%&gt;%</span> </span>
<span id="cb979-2"><a href="reporting-results-2.html#cb979-2" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## Simple feature collection with 3 features and 12 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -108.3811 ymin: 36.99902 xmax: -105.0487 ymax: 39.92525
## Geodetic CRS:  NAD83
##   STATEFP COUNTYFP COUNTYNS       AFFGEOID GEOID      NAME         NAMELSAD
## 1      08      037 00198134 0500000US08037 08037     Eagle     Eagle County
## 2      08      059 00198145 0500000US08059 08059 Jefferson Jefferson County
## 3      08      067 00198148 0500000US08067 08067  La Plata  La Plata County
##   STUSPS STATE_NAME LSAD      ALAND   AWATER                       geometry
## 1     CO   Colorado   06 4362754228 18970639 MULTIPOLYGON (((-107.1137 3...
## 2     CO   Colorado   06 1979735379 25071495 MULTIPOLYGON (((-105.0558 3...
## 3     CO   Colorado   06 4376255277 25642579 MULTIPOLYGON (((-108.3796 3...</code></pre>
<p>The <code>geometry</code> column has a special class (sfc):</p>
<div class="sourceCode" id="cb981"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb981-1"><a href="reporting-results-2.html#cb981-1" tabindex="-1"></a><span class="fu">class</span>(co_counties<span class="sc">$</span>geometry)</span></code></pre></div>
<pre><code>## [1] &quot;sfc_MULTIPOLYGON&quot; &quot;sfc&quot;</code></pre>
<p>You’ll notice there’s some extra stuff up at the top, too:</p>
<ul>
<li><strong>Geometry type</strong>: Points, polygons, lines</li>
<li><strong>Dimension</strong>: Often two-dimensional, but can go up to four (if you have, for example, time
for each measurement and some measure of measurement error / uncertainty)</li>
<li><strong>Bounding box (bbox)</strong>: The x- and y-range of the data included</li>
<li><strong>EPSG</strong>: The EPSG Geodetic Parameter Dataset code for the Coordinate Reference Systems</li>
<li><strong>Projection (proj4string)</strong>: How the data is currently projected, includes projection (“+proj”) and datum (“+datum”)</li>
</ul>
<p>You can pull some of this information out of the <code>geometry</code> column. For example, you can pull
out the coordinates of the bounding box:</p>
<div class="sourceCode" id="cb983"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb983-1"><a href="reporting-results-2.html#cb983-1" tabindex="-1"></a><span class="fu">st_bbox</span>(co_counties<span class="sc">$</span>geometry)      <span class="co"># For all counties</span></span></code></pre></div>
<pre><code>##       xmin       ymin       xmax       ymax 
## -109.06025   36.99243 -102.04152   41.00344</code></pre>
<div class="sourceCode" id="cb985"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb985-1"><a href="reporting-results-2.html#cb985-1" tabindex="-1"></a><span class="fu">st_bbox</span>(co_counties<span class="sc">$</span>geometry[<span class="dv">1</span>]) <span class="co"># Just for first county</span></span></code></pre></div>
<pre><code>##       xmin       ymin       xmax       ymax 
## -107.11395   39.34947 -106.17592   39.92525</code></pre>
<p>You can add <code>sf</code> objects to <code>ggplot</code> objects using <code>geom_sf</code>:</p>
<div class="sourceCode" id="cb987"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb987-1"><a href="reporting-results-2.html#cb987-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb987-2"><a href="reporting-results-2.html#cb987-2" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb987-3"><a href="reporting-results-2.html#cb987-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_counties)</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-543-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>You can map one of the columns in the <code>sf</code> object to the fill aesthetic to make a <strong>choropleth</strong>:</p>
<div class="sourceCode" id="cb988"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb988-1"><a href="reporting-results-2.html#cb988-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb988-2"><a href="reporting-results-2.html#cb988-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_counties, <span class="fu">aes</span>(<span class="at">fill =</span> ALAND))</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-544-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>You can use all your usual <code>ggplot</code> tricks with this:</p>
<div class="sourceCode" id="cb989"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb989-1"><a href="reporting-results-2.html#cb989-1" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb989-2"><a href="reporting-results-2.html#cb989-2" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb989-3"><a href="reporting-results-2.html#cb989-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_counties, <span class="fu">aes</span>(<span class="at">fill =</span> ALAND)) <span class="sc">+</span> </span>
<span id="cb989-4"><a href="reporting-results-2.html#cb989-4" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">name =</span> <span class="st">&quot;Land area&quot;</span>, <span class="at">label =</span> comma) <span class="sc">+</span> </span>
<span id="cb989-5"><a href="reporting-results-2.html#cb989-5" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Land areas of Colorado counties&quot;</span>) <span class="sc">+</span> </span>
<span id="cb989-6"><a href="reporting-results-2.html#cb989-6" tabindex="-1"></a>  <span class="fu">theme_dark</span>()</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-545-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>Because simple features are a special type of dataframe, you can also use a lot of <code>dplyr</code> tricks.</p>
<p>For example, you could pull out just Larimer County, CO:</p>
<div class="sourceCode" id="cb990"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb990-1"><a href="reporting-results-2.html#cb990-1" tabindex="-1"></a>larimer <span class="ot">&lt;-</span> co_counties <span class="sc">%&gt;%</span> </span>
<span id="cb990-2"><a href="reporting-results-2.html#cb990-2" tabindex="-1"></a>  <span class="fu">filter</span>(NAME <span class="sc">==</span> <span class="st">&quot;Larimer&quot;</span>)</span>
<span id="cb990-3"><a href="reporting-results-2.html#cb990-3" tabindex="-1"></a>larimer</span></code></pre></div>
<pre><code>## Simple feature collection with 1 feature and 12 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -106.1954 ymin: 40.25788 xmax: -104.9431 ymax: 40.99821
## Geodetic CRS:  NAD83
##   STATEFP COUNTYFP COUNTYNS       AFFGEOID GEOID    NAME       NAMELSAD STUSPS
## 1      08      069 00198150 0500000US08069 08069 Larimer Larimer County     CO
##   STATE_NAME LSAD      ALAND   AWATER                       geometry
## 1   Colorado   06 6723017943 98980718 MULTIPOLYGON (((-106.1954 4...</code></pre>
<p>Note: You may need the development version of <code>ggplot2</code> for the next piece of code to work (<code>devtools::install_github("tidyverse/ggplot2")</code>).</p>
<div class="sourceCode" id="cb992"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb992-1"><a href="reporting-results-2.html#cb992-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb992-2"><a href="reporting-results-2.html#cb992-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_counties, <span class="at">color =</span> <span class="st">&quot;lightgray&quot;</span>) <span class="sc">+</span> </span>
<span id="cb992-3"><a href="reporting-results-2.html#cb992-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> larimer, <span class="at">fill =</span> <span class="st">&quot;darkcyan&quot;</span>) <span class="sc">+</span> </span>
<span id="cb992-4"><a href="reporting-results-2.html#cb992-4" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="at">data =</span> larimer, <span class="fu">aes</span>(<span class="at">label =</span> NAME), <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span> </span>
<span id="cb992-5"><a href="reporting-results-2.html#cb992-5" tabindex="-1"></a>  <span class="fu">theme_dark</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-547-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>This operability with tidyverse functions means that you should now be able to figure out how to
create a map of the number of events listed in the NOAA Storm Events database (of those listed by
county) for each county in Colorado (for the code, see the in-course exercise):</p>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-548-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="state-boundaries" class="section level3 hasAnchor" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> State boundaries<a href="reporting-results-2.html#state-boundaries" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>tigris</code> package allows you to pull state boundaries, as well, but on some computers
mapping these seems to take a really long time.</p>
<p>Instead, for now I recommend that you pull the state boundaries using base R’s <code>maps</code>
package and convert that to an <code>sf</code> object:</p>
<div class="sourceCode" id="cb993"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb993-1"><a href="reporting-results-2.html#cb993-1" tabindex="-1"></a><span class="fu">library</span>(maps)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;maps&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:viridis&#39;:
## 
##     unemp</code></pre>
<pre><code>## The following object is masked from &#39;package:faraway&#39;:
## 
##     ozone</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     map</code></pre>
<div class="sourceCode" id="cb998"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb998-1"><a href="reporting-results-2.html#cb998-1" tabindex="-1"></a>us_states <span class="ot">&lt;-</span> <span class="fu">map</span>(<span class="st">&quot;state&quot;</span>, <span class="at">plot =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb998-2"><a href="reporting-results-2.html#cb998-2" tabindex="-1"></a>  <span class="fu">st_as_sf</span>()</span></code></pre></div>
<p>You can see these borders include an <code>ID</code> column that you can use to join by state:</p>
<div class="sourceCode" id="cb999"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb999-1"><a href="reporting-results-2.html#cb999-1" tabindex="-1"></a><span class="fu">head</span>(us_states)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 1 field
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -124.3834 ymin: 30.24071 xmax: -71.78015 ymax: 42.04937
## Geodetic CRS:  +proj=longlat +ellps=clrk66 +no_defs +type=crs
##            ID                           geom
## 1     alabama MULTIPOLYGON (((-87.46201 3...
## 2     arizona MULTIPOLYGON (((-114.6374 3...
## 3    arkansas MULTIPOLYGON (((-94.05103 3...
## 4  california MULTIPOLYGON (((-120.006 42...
## 5    colorado MULTIPOLYGON (((-102.0552 4...
## 6 connecticut MULTIPOLYGON (((-73.49902 4...</code></pre>
<p>As with other <code>sf</code> objects, you can map these state boundaries using <code>ggplot</code>:</p>
<div class="sourceCode" id="cb1001"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1001-1"><a href="reporting-results-2.html#cb1001-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb1001-2"><a href="reporting-results-2.html#cb1001-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> us_states, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb1001-3"><a href="reporting-results-2.html#cb1001-3" tabindex="-1"></a>          <span class="at">fill =</span> <span class="st">&quot;darkcyan&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-551-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>As a note, you can use <code>xlim</code> and <code>ylim</code> with these plots, but remember that the x-axis is longitude in degrees West, which are negative:</p>
<div class="sourceCode" id="cb1002"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1002-1"><a href="reporting-results-2.html#cb1002-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb1002-2"><a href="reporting-results-2.html#cb1002-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> us_states, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb1002-3"><a href="reporting-results-2.html#cb1002-3" tabindex="-1"></a>          <span class="at">fill =</span> <span class="st">&quot;darkcyan&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb1002-4"><a href="reporting-results-2.html#cb1002-4" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">90</span>, <span class="sc">-</span><span class="dv">75</span>)) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">38</span>))</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-552-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="creating-an-sf-object" class="section level3 hasAnchor" number="8.4.3">
<h3><span class="header-section-number">8.4.3</span> Creating an <code>sf</code> object<a href="reporting-results-2.html#creating-an-sf-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can create an <code>sf</code> object from a regular dataframe.</p>
<p>You just need to specify:</p>
<ol style="list-style-type: decimal">
<li>The coordinate information (which columns are longitudes and latitudes)</li>
<li>The Coordinate Reference System (CRS) (how to translate your coordinates to places in the world)</li>
</ol>
<p>For the CRS, if you are mapping the new <code>sf</code> object with other, existing <code>sf</code> objects,
make sure that you use the same CRS for all <code>sf</code> objects.</p>
<p>Spatial objects can have different Coordinate Reference Systems (CRSs). CRSs can be <em>geographic</em> (e.g., WGS84, for longitude-latitude data) or <em>projected</em> (e.g., UTM, NADS83).</p>
<p>There is a website that lists projection strings and can be useful in setting projection information or re-projecting data: <a href="http://www.spatialreference.org" class="uri">http://www.spatialreference.org</a></p>
<p>Here is an excellent resource on projections and maps in R from Melanie Frazier: <a href="https://www.nceas.ucsb.edu/~frazier/RSpatialGuides/OverviewCoordinateReferenceSystems.pdf" class="uri">https://www.nceas.ucsb.edu/~frazier/RSpatialGuides/OverviewCoordinateReferenceSystems.pdf</a></p>
<p>Let’s look at floods in Colorado. First, clean up the data:</p>
<div class="sourceCode" id="cb1003"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1003-1"><a href="reporting-results-2.html#cb1003-1" tabindex="-1"></a>co_floods <span class="ot">&lt;-</span> storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb1003-2"><a href="reporting-results-2.html#cb1003-2" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">&quot;Colorado&quot;</span> <span class="sc">&amp;</span> </span>
<span id="cb1003-3"><a href="reporting-results-2.html#cb1003-3" tabindex="-1"></a>           event_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Flood&quot;</span>, <span class="st">&quot;Flash Flood&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1003-4"><a href="reporting-results-2.html#cb1003-4" tabindex="-1"></a>  <span class="fu">select</span>(begin_date_time, event_id, begin_lat<span class="sc">:</span>end_lon) <span class="sc">%&gt;%</span> </span>
<span id="cb1003-5"><a href="reporting-results-2.html#cb1003-5" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;key&quot;</span>, <span class="at">value =</span> <span class="st">&quot;value&quot;</span>, </span>
<span id="cb1003-6"><a href="reporting-results-2.html#cb1003-6" tabindex="-1"></a>         <span class="sc">-</span>begin_date_time, <span class="sc">-</span>event_id) <span class="sc">%&gt;%</span> </span>
<span id="cb1003-7"><a href="reporting-results-2.html#cb1003-7" tabindex="-1"></a>  <span class="fu">separate</span>(key, <span class="fu">c</span>(<span class="st">&quot;time&quot;</span>, <span class="st">&quot;key&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1003-8"><a href="reporting-results-2.html#cb1003-8" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">key =</span> key, <span class="at">value =</span> value)</span></code></pre></div>
<p>There are now two rows per event, one with the starting location and one with the ending location:</p>
<div class="sourceCode" id="cb1004"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1004-1"><a href="reporting-results-2.html#cb1004-1" tabindex="-1"></a>co_floods <span class="sc">%&gt;%</span> </span>
<span id="cb1004-2"><a href="reporting-results-2.html#cb1004-2" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 5
##   begin_date_time     event_id time    lat   lon
##   &lt;dttm&gt;                 &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 2017-05-08 16:00:00   693374 begin  40.3 -105.
## 2 2017-05-08 16:00:00   693374 end    40.5 -104.
## 3 2017-05-10 15:00:00   686479 begin  38.1 -105.
## 4 2017-05-10 15:00:00   686479 end    38.1 -105.
## 5 2017-05-10 15:20:00   686480 begin  38.2 -105.</code></pre>
<p>Change to an <code>sf</code> object by saying which columns are the coordinates and setting a CRS:</p>
<div class="sourceCode" id="cb1006"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1006-1"><a href="reporting-results-2.html#cb1006-1" tabindex="-1"></a>co_floods <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(co_floods, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1006-2"><a href="reporting-results-2.html#cb1006-2" tabindex="-1"></a>  <span class="fu">st_set_crs</span>(<span class="dv">4269</span>)</span>
<span id="cb1006-3"><a href="reporting-results-2.html#cb1006-3" tabindex="-1"></a>co_floods <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## Simple feature collection with 3 features and 3 fields
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -105.0496 ymin: 38.1167 xmax: -104.39 ymax: 40.49
## Geodetic CRS:  NAD83
## # A tibble: 3 × 4
##   begin_date_time     event_id time             geometry
##   &lt;dttm&gt;                 &lt;dbl&gt; &lt;chr&gt;         &lt;POINT [°]&gt;
## 1 2017-05-08 16:00:00   693374 begin     (-104.76 40.32)
## 2 2017-05-08 16:00:00   693374 end       (-104.39 40.49)
## 3 2017-05-10 15:00:00   686479 begin (-105.0496 38.1167)</code></pre>
<p>Now you can map the data:</p>
<div class="sourceCode" id="cb1008"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1008-1"><a href="reporting-results-2.html#cb1008-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb1008-2"><a href="reporting-results-2.html#cb1008-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_counties, <span class="at">color =</span> <span class="st">&quot;lightgray&quot;</span>) <span class="sc">+</span> </span>
<span id="cb1008-3"><a href="reporting-results-2.html#cb1008-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_floods, <span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">month</span>(begin_date_time),</span>
<span id="cb1008-4"><a href="reporting-results-2.html#cb1008-4" tabindex="-1"></a>                                  <span class="at">shape =</span> time)) <span class="sc">+</span> </span>
<span id="cb1008-5"><a href="reporting-results-2.html#cb1008-5" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">name =</span> <span class="st">&quot;Month&quot;</span>) </span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-556-1.png" width="576" /></p>
<p>If you want to show lines instead of points, group by the appropriate ID and then summarize
within each event to get a line:</p>
<div class="sourceCode" id="cb1009"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1009-1"><a href="reporting-results-2.html#cb1009-1" tabindex="-1"></a>co_floods <span class="ot">&lt;-</span> co_floods <span class="sc">%&gt;%</span> </span>
<span id="cb1009-2"><a href="reporting-results-2.html#cb1009-2" tabindex="-1"></a>  <span class="fu">group_by</span>(event_id) <span class="sc">%&gt;%</span> </span>
<span id="cb1009-3"><a href="reporting-results-2.html#cb1009-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">month =</span> <span class="fu">month</span>(<span class="fu">first</span>(begin_date_time)),</span>
<span id="cb1009-4"><a href="reporting-results-2.html#cb1009-4" tabindex="-1"></a>            <span class="at">do_union =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1009-5"><a href="reporting-results-2.html#cb1009-5" tabindex="-1"></a>  <span class="fu">st_cast</span>(<span class="st">&quot;LINESTRING&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb1010"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1010-1"><a href="reporting-results-2.html#cb1010-1" tabindex="-1"></a><span class="fu">head</span>(co_floods)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 2 fields
## Geometry type: LINESTRING
## Dimension:     XY
## Bounding box:  xmin: -105.8286 ymin: 38.0708 xmax: -104.39 ymax: 40.49
## Geodetic CRS:  NAD83
## # A tibble: 6 × 3
##   event_id month                               geometry
##      &lt;dbl&gt; &lt;dbl&gt;                       &lt;LINESTRING [°]&gt;
## 1   686479     5 (-105.0496 38.1167, -104.9687 38.0708)
## 2   686480     5 (-104.8425 38.2275, -104.8137 38.1854)
## 3   693306     6  (-104.8947 38.999, -104.8734 38.8783)
## 4   693374     5         (-104.76 40.32, -104.39 40.49)
## 5   693444     6 (-105.7688 38.3753, -105.8286 38.3127)
## 6   693449     6     (-105.07 38.15, -105.0973 38.1524)</code></pre>
<p>Now this data will map as lines:</p>
<div class="sourceCode" id="cb1012"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1012-1"><a href="reporting-results-2.html#cb1012-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb1012-2"><a href="reporting-results-2.html#cb1012-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_counties, <span class="at">color =</span> <span class="st">&quot;lightgray&quot;</span>) <span class="sc">+</span> </span>
<span id="cb1012-3"><a href="reporting-results-2.html#cb1012-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_floods, </span>
<span id="cb1012-4"><a href="reporting-results-2.html#cb1012-4" tabindex="-1"></a>          <span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">factor</span>(month), <span class="at">fill =</span> <span class="fu">factor</span>(month))) <span class="sc">+</span> </span>
<span id="cb1012-5"><a href="reporting-results-2.html#cb1012-5" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">name =</span> <span class="st">&quot;Month&quot;</span>, <span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> </span>
<span id="cb1012-6"><a href="reporting-results-2.html#cb1012-6" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">name =</span> <span class="st">&quot;Month&quot;</span>, <span class="at">discrete =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-559-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="reading-in-from-gis-files" class="section level3 hasAnchor" number="8.4.4">
<h3><span class="header-section-number">8.4.4</span> Reading in from GIS files<a href="reporting-results-2.html#reading-in-from-gis-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can also create <code>sf</code> objects by reading in data from files you would normally use for GIS.</p>
<p>For example, you can read in an <code>sf</code> object from a shapefile, which is a format often used for GIS in which a collection of several files jointly store geographic data. The files making up a shapefile can include:</p>
<ul>
<li>“.shp”: The coordinates defining the shape of each geographic object. For a point, this
would be a single coordinate (e.g., latitude and longitude). For lines and polygons, there
will be multiple coordinates per geographic object.</li>
<li>“.prf”: Information on the projection of the data (how to get from the coordinates to
a place in the world).</li>
<li>“.dbf”: Data that goes along with each geographical object. For example, earlier we looked
at data on counties, and one thing measured for each county was its land area. Characteristics
like that would be included in the “.dbf” file in a shapefile.</li>
</ul>
<p>Often, with geographic data, you will be given the option to downloaded a compressed
file (e.g., a zipped file). When you unzip the folder, it will include a number of
files in these types of formats (“.shp”, “prf”, “.dbf”, etc.).</p>
<p>Sometimes, that single folder will include multiple files from each extension. For
example, it might have several files that end with “.shp”. In this case, you have
multiple <strong>layers</strong> of geographic information you can read in.</p>
<p>We’ve been looking at data on storms from NOAA for 2017. As an example, let’s try to
pair that data up with some from the National Hurricane Center for the same year.</p>
<p>The National Hurricane Center allows you to access a variety of GIS data through
the webpage <a href="https://www.nhc.noaa.gov/gis/?text" class="uri">https://www.nhc.noaa.gov/gis/?text</a>.</p>
<p>Let’s pull some data on Hurricane Harvey in 2017 and map it with information from
the NOAA Storm Events database.</p>
<p>On <a href="https://www.nhc.noaa.gov/gis/?text" class="uri">https://www.nhc.noaa.gov/gis/?text</a>, go to the section called “Preliminary Best Track”.
Select the year 2017. Then select “Hurricane Harvey” and download “al092017_best_track.zip”.</p>
<p>Depending on your computer, you may then need to unzip this file (many computers will
unzip it automatically). Base R has a function called <code>unzip</code> that can help with this.</p>
<p>You’ll then have a folder with a number of different files in it. Move this folder
somewhere that is convenient for the working directory you use for class. For example,
I moved it into the “data” subdirectory of the working directory I use for the class.</p>
<p>You can use <code>list.files</code> to see all the files in this unzipped folder:</p>
<div class="sourceCode" id="cb1013"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1013-1"><a href="reporting-results-2.html#cb1013-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&quot;data/al092017_best_track/&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;al092017_lin.dbf&quot;           &quot;al092017_lin.prj&quot;          
##  [3] &quot;al092017_lin.shp&quot;           &quot;al092017_lin.shp.xml&quot;      
##  [5] &quot;al092017_lin.shx&quot;           &quot;al092017_pts.dbf&quot;          
##  [7] &quot;al092017_pts.prj&quot;           &quot;al092017_pts.shp&quot;          
##  [9] &quot;al092017_pts.shp.xml&quot;       &quot;al092017_pts.shx&quot;          
## [11] &quot;al092017_radii.dbf&quot;         &quot;al092017_radii.prj&quot;        
## [13] &quot;al092017_radii.shp&quot;         &quot;al092017_radii.shp.xml&quot;    
## [15] &quot;al092017_radii.shx&quot;         &quot;al092017_windswath.dbf&quot;    
## [17] &quot;al092017_windswath.prj&quot;     &quot;al092017_windswath.shp&quot;    
## [19] &quot;al092017_windswath.shp.xml&quot; &quot;al092017_windswath.shx&quot;</code></pre>
<p>You can use <code>st_layers</code> to find out the available layers in a shapefile directory:</p>
<div class="sourceCode" id="cb1015"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1015-1"><a href="reporting-results-2.html#cb1015-1" tabindex="-1"></a><span class="fu">st_layers</span>(<span class="st">&quot;data/al092017_best_track/&quot;</span>)</span></code></pre></div>
<pre><code>## Driver: ESRI Shapefile 
## Available layers:
##           layer_name geometry_type features fields
## 1       al092017_lin   Line String       17      3
## 2       al092017_pts         Point       74     15
## 3     al092017_radii       Polygon       61      9
## 4 al092017_windswath       Polygon        4      6
##                                       crs_name
## 1 Unknown datum based upon the Authalic Sphere
## 2 Unknown datum based upon the Authalic Sphere
## 3 Unknown datum based upon the Authalic Sphere
## 4 Unknown datum based upon the Authalic Sphere</code></pre>
<p>Once you know which layer you want, you can use <code>read_sf</code> to read it in as an <code>sf</code> object:</p>
<div class="sourceCode" id="cb1017"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1017-1"><a href="reporting-results-2.html#cb1017-1" tabindex="-1"></a>harvey_track <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">&quot;data/al092017_best_track/&quot;</span>,</span>
<span id="cb1017-2"><a href="reporting-results-2.html#cb1017-2" tabindex="-1"></a>                        <span class="at">layer =</span> <span class="st">&quot;al092017_lin&quot;</span>)</span>
<span id="cb1017-3"><a href="reporting-results-2.html#cb1017-3" tabindex="-1"></a><span class="fu">head</span>(harvey_track)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 3 fields
## Geometry type: LINESTRING
## Dimension:     XY
## Bounding box:  xmin: -92.3 ymin: 13 xmax: -45.8 ymax: 21.4
## Geodetic CRS:  Unknown datum based upon the Authalic Sphere
## # A tibble: 6 × 4
##   STORMNUM STORMTYPE              SS                                    geometry
##      &lt;dbl&gt; &lt;chr&gt;               &lt;int&gt;                            &lt;LINESTRING [°]&gt;
## 1        9 Low                     0 (-45.8 13.7, -47.4 13.7, -49 13.6, -50.6 1…
## 2        9 Tropical Depression     0              (-52 13.4, -53.4 13.1, -55 13)
## 3        9 Tropical Storm          0 (-55 13, -56.6 13, -58.4 13, -59.6 13.1, -…
## 4        9 Tropical Depression     0                    (-67.5 13.7, -69.2 13.8)
## 5        9 Tropical Wave           0 (-69.2 13.8, -71 14, -72.9 14.2, -75 14.4,…
## 6        9 Low                     0 (-89.7 20, -90.7 20.5, -91.6 20.9, -92.3 2…</code></pre>
<div class="sourceCode" id="cb1019"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1019-1"><a href="reporting-results-2.html#cb1019-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb1019-2"><a href="reporting-results-2.html#cb1019-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">filter</span>(us_states, ID <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;texas&quot;</span>, <span class="st">&quot;louisiana&quot;</span>))) <span class="sc">+</span> </span>
<span id="cb1019-3"><a href="reporting-results-2.html#cb1019-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> harvey_track, <span class="fu">aes</span>(<span class="at">color =</span> STORMTYPE)) <span class="sc">+</span> </span>
<span id="cb1019-4"><a href="reporting-results-2.html#cb1019-4" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">107</span>, <span class="sc">-</span><span class="dv">89</span>)) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">37</span>)) </span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-563-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>You can read in other layers:</p>
<div class="sourceCode" id="cb1020"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1020-1"><a href="reporting-results-2.html#cb1020-1" tabindex="-1"></a>harvey_windswath <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">&quot;data/al092017_best_track/&quot;</span>,</span>
<span id="cb1020-2"><a href="reporting-results-2.html#cb1020-2" tabindex="-1"></a>                            <span class="at">layer =</span> <span class="st">&quot;al092017_windswath&quot;</span>)</span>
<span id="cb1020-3"><a href="reporting-results-2.html#cb1020-3" tabindex="-1"></a><span class="fu">head</span>(harvey_windswath)</span></code></pre></div>
<pre><code>## Simple feature collection with 4 features and 6 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: -98.66872 ymin: 12.94564 xmax: -54.58527 ymax: 31.15894
## Geodetic CRS:  Unknown datum based upon the Authalic Sphere
## # A tibble: 4 × 7
##   RADII STORMID  BASIN STORMNUM STARTDTG   ENDDTG                       geometry
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                   &lt;POLYGON [°]&gt;
## 1    34 al092017 AL           9 2017081718 2017081906 ((-65.68199 14.50528, -65…
## 2    34 al092017 AL           9 2017082318 2017083018 ((-96.22456 31.15752, -96…
## 3    50 al092017 AL           9 2017082406 2017082618 ((-97.32707 29.60604, -97…
## 4    64 al092017 AL           9 2017082418 2017082612 ((-97.20689 29.08475, -97…</code></pre>
<div class="sourceCode" id="cb1022"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1022-1"><a href="reporting-results-2.html#cb1022-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb1022-2"><a href="reporting-results-2.html#cb1022-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">filter</span>(us_states, ID <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;texas&quot;</span>, <span class="st">&quot;louisiana&quot;</span>))) <span class="sc">+</span> </span>
<span id="cb1022-3"><a href="reporting-results-2.html#cb1022-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> harvey_windswath, </span>
<span id="cb1022-4"><a href="reporting-results-2.html#cb1022-4" tabindex="-1"></a>          <span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">factor</span>(RADII)), <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb1022-5"><a href="reporting-results-2.html#cb1022-5" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">107</span>, <span class="sc">-</span><span class="dv">89</span>)) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">37</span>)) <span class="sc">+</span> </span>
<span id="cb1022-6"><a href="reporting-results-2.html#cb1022-6" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">name =</span> <span class="st">&quot;Wind (kts)&quot;</span>, <span class="at">discrete =</span> <span class="cn">TRUE</span>, </span>
<span id="cb1022-7"><a href="reporting-results-2.html#cb1022-7" tabindex="-1"></a>                     <span class="at">option =</span> <span class="st">&quot;B&quot;</span>, <span class="at">begin =</span> <span class="fl">0.6</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-565-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>The <code>read_sf</code> function is very powerful and can read in data from lots of different
formats.</p>
<p>See Section 2 of the <code>sf</code> manual (<a href="https://cran.r-project.org/web/packages/sf/vignettes/sf2.html" class="uri">https://cran.r-project.org/web/packages/sf/vignettes/sf2.html</a>)
for more on this function.</p>
<p>You can find (much, much) more on working with spatial data in R online:</p>
<ul>
<li><strong>R Spatial</strong>: <a href="http://rspatial.org/index.html" class="uri">http://rspatial.org/index.html</a></li>
<li><strong>Geocomputation with R</strong>: <a href="https://geocompr.robinlovelace.net" class="uri">https://geocompr.robinlovelace.net</a></li>
</ul>
</div>
</div>
<div id="in-course-exercise-chapter-8" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> In-course exercise Chapter 8<a href="reporting-results-2.html#in-course-exercise-chapter-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="getting-and-cleaning-the-example-data" class="section level3 hasAnchor" number="8.5.1">
<h3><span class="header-section-number">8.5.1</span> Getting and cleaning the example data<a href="reporting-results-2.html#getting-and-cleaning-the-example-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This week, we’ll be using some example data from NOAA’s Storm Events Database.
This data lists major weather-related storm events during 2017.
For each event, it includes information like the start and end dates, where it
happened, associated deaths, injuries, and property damage, and some other
characteristics.
Each row is a separate <strong>event</strong>. However, often several events are grouped together
within the same <strong>episode</strong>.
Some of the event types are listed by their county ID (FIPS code) (“C”), but some are listed
by a forecast zone ID (“Z”). Which ID is used is given in the column <code>CZ_TYPE</code>.</p>
<ul>
<li>Go to <a href="https://www1.ncdc.noaa.gov/pub/data/swdi/stormevents/csvfiles/" class="uri">https://www1.ncdc.noaa.gov/pub/data/swdi/stormevents/csvfiles/</a> and download
the bulk storm details data for 2017, in the file that starts
“StormEvents_details” and includes “d2017”.</li>
<li>Move this into a good directory for your current working directory and read it in
using <code>read_csv</code> from the <code>readr</code> package.</li>
<li>Limit the dataframe to: the beginning and ending dates and times,
the episode ID, the event ID, the state name and
FIPS, the “CZ” name, type, and FIPS, the event type, the source, and the
begining latitude and longitude and ending latitude and longitude</li>
<li>Convert the beginning and ending dates to a “date-time” class (there should
be one column for the beginning date-time and one for the ending date-time)</li>
<li>Change state and county names to title case (e.g., “New Jersey” instead of “NEW JERSEY”)</li>
<li>Limit to the events listed by county FIPS (<code>CZ_TYPE</code> of “C”) and then remove the
<code>CZ_TYPE</code> column</li>
<li>Pad the state and county FIPS with a “0” at the beginning (hint: there’s
a function in <code>stringr</code> to do this) and then unite the two columns to make
one <code>fips</code> column with the 5-digit county FIPS code</li>
<li>Change all the column names to lower case (you may want to try the <code>rename_all</code>
function for this)</li>
<li>There is data that comes with R on U.S. states (<code>data("state")</code>). Use that to create a dataframe
with the state name, area, and region</li>
<li>Create a dataframe with the number of events per state in 2017. Merge in the state information
dataframe you just created. Remove any states that are not in the state information
dataframe</li>
<li>Create the following plot:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-566-1.png" width="576" /></p>
<div id="example-r-code-20" class="section level4 hasAnchor" number="8.5.1.1">
<h4><span class="header-section-number">8.5.1.1</span> Example R code<a href="reporting-results-2.html#example-r-code-20" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Read in the data using <code>read_csv</code>. Here’s the code I used. Yours might be a bit different,
depending on the current name of the file and where you moved it.</p>
<div class="sourceCode" id="cb1023"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1023-1"><a href="reporting-results-2.html#cb1023-1" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1023-2"><a href="reporting-results-2.html#cb1023-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1023-3"><a href="reporting-results-2.html#cb1023-3" tabindex="-1"></a></span>
<span id="cb1023-4"><a href="reporting-results-2.html#cb1023-4" tabindex="-1"></a>storms_2017 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/StormEvents_details-ftp_v1.0_d2017_c20180918.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 56989 Columns: 51
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (26): STATE, MONTH_NAME, EVENT_TYPE, CZ_TYPE, CZ_NAME, WFO, BEGIN_DATE_T...
## dbl (25): BEGIN_YEARMONTH, BEGIN_DAY, BEGIN_TIME, END_YEARMONTH, END_DAY, EN...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>Here’s what the first few columns and rows should look like:</p>
<div class="sourceCode" id="cb1025"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1025-1"><a href="reporting-results-2.html#cb1025-1" tabindex="-1"></a>storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb1025-2"><a href="reporting-results-2.html#cb1025-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1025-3"><a href="reporting-results-2.html#cb1025-3" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   BEGIN_YEARMONTH BEGIN_DAY BEGIN_TIME
##             &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
## 1          201704         6       1509
## 2          201704         6        930
## 3          201704         5       1749</code></pre>
<p>Once you’ve read the data in, here’s the code that I used to clean the data:</p>
<div class="sourceCode" id="cb1027"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1027-1"><a href="reporting-results-2.html#cb1027-1" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1027-2"><a href="reporting-results-2.html#cb1027-2" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1027-3"><a href="reporting-results-2.html#cb1027-3" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1027-4"><a href="reporting-results-2.html#cb1027-4" tabindex="-1"></a></span>
<span id="cb1027-5"><a href="reporting-results-2.html#cb1027-5" tabindex="-1"></a>storms_2017 <span class="ot">&lt;-</span> storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb1027-6"><a href="reporting-results-2.html#cb1027-6" tabindex="-1"></a>  <span class="fu">select</span>(BEGIN_DATE_TIME, END_DATE_TIME, </span>
<span id="cb1027-7"><a href="reporting-results-2.html#cb1027-7" tabindex="-1"></a>         EPISODE_ID<span class="sc">:</span>STATE_FIPS, EVENT_TYPE<span class="sc">:</span>CZ_NAME, SOURCE,</span>
<span id="cb1027-8"><a href="reporting-results-2.html#cb1027-8" tabindex="-1"></a>         BEGIN_LAT<span class="sc">:</span>END_LON) <span class="sc">%&gt;%</span> </span>
<span id="cb1027-9"><a href="reporting-results-2.html#cb1027-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">BEGIN_DATE_TIME =</span> <span class="fu">dmy_hms</span>(BEGIN_DATE_TIME),</span>
<span id="cb1027-10"><a href="reporting-results-2.html#cb1027-10" tabindex="-1"></a>         <span class="at">END_DATE_TIME =</span> <span class="fu">dmy_hms</span>(END_DATE_TIME),</span>
<span id="cb1027-11"><a href="reporting-results-2.html#cb1027-11" tabindex="-1"></a>         <span class="at">STATE =</span> <span class="fu">str_to_title</span>(STATE),</span>
<span id="cb1027-12"><a href="reporting-results-2.html#cb1027-12" tabindex="-1"></a>         <span class="at">CZ_NAME =</span> <span class="fu">str_to_title</span>(CZ_NAME)) <span class="sc">%&gt;%</span> </span>
<span id="cb1027-13"><a href="reporting-results-2.html#cb1027-13" tabindex="-1"></a>  <span class="fu">filter</span>(CZ_TYPE <span class="sc">==</span> <span class="st">&quot;C&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1027-14"><a href="reporting-results-2.html#cb1027-14" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>CZ_TYPE) <span class="sc">%&gt;%</span> </span>
<span id="cb1027-15"><a href="reporting-results-2.html#cb1027-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">STATE_FIPS =</span> <span class="fu">str_pad</span>(STATE_FIPS, <span class="dv">2</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>, <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>),</span>
<span id="cb1027-16"><a href="reporting-results-2.html#cb1027-16" tabindex="-1"></a>         <span class="at">CZ_FIPS =</span> <span class="fu">str_pad</span>(CZ_FIPS, <span class="dv">3</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>, <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1027-17"><a href="reporting-results-2.html#cb1027-17" tabindex="-1"></a>  <span class="fu">unite</span>(fips, STATE_FIPS, CZ_FIPS, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1027-18"><a href="reporting-results-2.html#cb1027-18" tabindex="-1"></a>  <span class="fu">rename_all</span>(<span class="fu">funs</span>(<span class="fu">str_to_lower</span>(.)))</span></code></pre></div>
<pre><code>## Warning: `funs()` was deprecated in dplyr 0.8.0.
## ℹ Please use a list of either functions or lambdas:
## 
## # Simple named list: list(mean = mean, median = median)
## 
## # Auto named with `tibble::lst()`: tibble::lst(mean, median)
## 
## # Using lambdas list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was
## generated.</code></pre>
<p>Here’s what the data looks like now:</p>
<div class="sourceCode" id="cb1029"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1029-1"><a href="reporting-results-2.html#cb1029-1" tabindex="-1"></a>storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb1029-2"><a href="reporting-results-2.html#cb1029-2" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 13
##   begin_date_time     end_date_time       episode_id event_id state      fips 
##   &lt;dttm&gt;              &lt;dttm&gt;                   &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;
## 1 2017-04-06 15:09:00 2017-04-06 15:09:00     113355   678791 New Jersey 34015
## 2 2017-04-06 09:30:00 2017-04-06 09:40:00     113459   679228 Florida    12071
## 3 2017-04-05 17:49:00 2017-04-05 17:53:00     113448   679268 Ohio       39057
## # ℹ 7 more variables: event_type &lt;chr&gt;, cz_name &lt;chr&gt;, source &lt;chr&gt;,
## #   begin_lat &lt;dbl&gt;, begin_lon &lt;dbl&gt;, end_lat &lt;dbl&gt;, end_lon &lt;dbl&gt;</code></pre>
<p>There is data that comes with R on U.S. states (<code>data("state")</code>). Use that to create a dataframe
with the state name, area, and region:</p>
<div class="sourceCode" id="cb1031"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1031-1"><a href="reporting-results-2.html#cb1031-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;state&quot;</span>)</span>
<span id="cb1031-2"><a href="reporting-results-2.html#cb1031-2" tabindex="-1"></a>us_state_info <span class="ot">&lt;-</span> <span class="fu">data_frame</span>(<span class="at">state =</span> state.name, </span>
<span id="cb1031-3"><a href="reporting-results-2.html#cb1031-3" tabindex="-1"></a>                            <span class="at">area =</span> state.area,</span>
<span id="cb1031-4"><a href="reporting-results-2.html#cb1031-4" tabindex="-1"></a>                            <span class="at">region =</span> state.region)</span></code></pre></div>
<p>Create a dataframe with the number of events per state in 2017. Merge in the state information
dataframe you just created. Remove any states that are not in the state information
dataframe:</p>
<div class="sourceCode" id="cb1032"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1032-1"><a href="reporting-results-2.html#cb1032-1" tabindex="-1"></a>state_storms <span class="ot">&lt;-</span> storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb1032-2"><a href="reporting-results-2.html#cb1032-2" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span> </span>
<span id="cb1032-3"><a href="reporting-results-2.html#cb1032-3" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1032-4"><a href="reporting-results-2.html#cb1032-4" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1032-5"><a href="reporting-results-2.html#cb1032-5" tabindex="-1"></a>  <span class="fu">right_join</span>(us_state_info, <span class="at">by =</span> <span class="st">&quot;state&quot;</span>)</span></code></pre></div>
<p>To create the plot:</p>
<p>Ultimately, in this group exercise, you will create a plot of state land area versus the number
of storm events in the state:</p>
<div class="sourceCode" id="cb1033"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1033-1"><a href="reporting-results-2.html#cb1033-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1033-2"><a href="reporting-results-2.html#cb1033-2" tabindex="-1"></a>storm_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(state_storms, <span class="fu">aes</span>(<span class="at">x =</span> area, <span class="at">y =</span> n)) <span class="sc">+</span> </span>
<span id="cb1033-3"><a href="reporting-results-2.html#cb1033-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> region)) <span class="sc">+</span> </span>
<span id="cb1033-4"><a href="reporting-results-2.html#cb1033-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Land area (square miles)&quot;</span>, </span>
<span id="cb1033-5"><a href="reporting-results-2.html#cb1033-5" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;# of storm events in 2017&quot;</span>)</span>
<span id="cb1033-6"><a href="reporting-results-2.html#cb1033-6" tabindex="-1"></a>storm_plot</span></code></pre></div>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-573-1.png" width="576" /></p>
</div>
</div>
<div id="trying-out-ggplot2-extensions" class="section level3 hasAnchor" number="8.5.2">
<h3><span class="header-section-number">8.5.2</span> Trying out <code>ggplot2</code> extensions<a href="reporting-results-2.html#trying-out-ggplot2-extensions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Go back through the notes so far for this week. Pick your favorite plot that’s been shown
so far and recreate it. All the code is in the notes, but you’ll need to work through it
closely to make sure that you understand how to add code from the extension into the
rest of the <code>ggplot2</code> code.</li>
</ul>
</div>
<div id="using-simple-features-to-map" class="section level3 hasAnchor" number="8.5.3">
<h3><span class="header-section-number">8.5.3</span> Using simple features to map<a href="reporting-results-2.html#using-simple-features-to-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Re-create the following map of the number of events listed in the NOAA Storm Events database (of those listed by
county) for each county in Colorado:</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-574-1.png" width="576" style="display: block; margin: auto;" /></p>
<ul>
<li>If you have time, try this one, too. It shows the number of three certain types of events
by county. If a county had no events, it’s shown in gray (as having a missing value when
you count up the events that did happen).</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-575-1.png" width="768" /></p>
<div id="example-r-code-21" class="section level4 hasAnchor" number="8.5.3.1">
<h4><span class="header-section-number">8.5.3.1</span> Example R code<a href="reporting-results-2.html#example-r-code-21" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Here is some R code that could be used to create the figure. Note that the code to create <code>storms_2017</code> and
<code>co_counties</code> is available in the course notes.</p>
<div class="sourceCode" id="cb1034"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1034-1"><a href="reporting-results-2.html#cb1034-1" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb1034-2"><a href="reporting-results-2.html#cb1034-2" tabindex="-1"></a></span>
<span id="cb1034-3"><a href="reporting-results-2.html#cb1034-3" tabindex="-1"></a>co_event_counts <span class="ot">&lt;-</span> storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb1034-4"><a href="reporting-results-2.html#cb1034-4" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">&quot;Colorado&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1034-5"><a href="reporting-results-2.html#cb1034-5" tabindex="-1"></a>  <span class="fu">group_by</span>(fips) <span class="sc">%&gt;%</span> </span>
<span id="cb1034-6"><a href="reporting-results-2.html#cb1034-6" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1034-7"><a href="reporting-results-2.html#cb1034-7" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb1034-8"><a href="reporting-results-2.html#cb1034-8" tabindex="-1"></a></span>
<span id="cb1034-9"><a href="reporting-results-2.html#cb1034-9" tabindex="-1"></a>co_county_events <span class="ot">&lt;-</span> co_counties <span class="sc">%&gt;%</span> </span>
<span id="cb1034-10"><a href="reporting-results-2.html#cb1034-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fips =</span> <span class="fu">paste</span>(STATEFP, COUNTYFP, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1034-11"><a href="reporting-results-2.html#cb1034-11" tabindex="-1"></a>  <span class="fu">full_join</span>(co_event_counts, <span class="at">by =</span> <span class="st">&quot;fips&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1034-12"><a href="reporting-results-2.html#cb1034-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(n), n, <span class="dv">0</span>))</span>
<span id="cb1034-13"><a href="reporting-results-2.html#cb1034-13" tabindex="-1"></a></span>
<span id="cb1034-14"><a href="reporting-results-2.html#cb1034-14" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb1034-15"><a href="reporting-results-2.html#cb1034-15" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_county_events, <span class="fu">aes</span>(<span class="at">fill =</span> n)) <span class="sc">+</span> </span>
<span id="cb1034-16"><a href="reporting-results-2.html#cb1034-16" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">name =</span> <span class="st">&quot;Number of events</span><span class="sc">\n</span><span class="st">(2017)&quot;</span>)</span></code></pre></div>
<p>Example code for second plot:</p>
<div class="sourceCode" id="cb1035"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1035-1"><a href="reporting-results-2.html#cb1035-1" tabindex="-1"></a>co_event_counts <span class="ot">&lt;-</span> storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb1035-2"><a href="reporting-results-2.html#cb1035-2" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">&quot;Colorado&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1035-3"><a href="reporting-results-2.html#cb1035-3" tabindex="-1"></a>  <span class="fu">filter</span>(event_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Tornado&quot;</span>, <span class="st">&quot;Heavy Rain&quot;</span>, <span class="st">&quot;Hail&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1035-4"><a href="reporting-results-2.html#cb1035-4" tabindex="-1"></a>  <span class="fu">group_by</span>(fips, event_type) <span class="sc">%&gt;%</span> </span>
<span id="cb1035-5"><a href="reporting-results-2.html#cb1035-5" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1035-6"><a href="reporting-results-2.html#cb1035-6" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb1035-7"><a href="reporting-results-2.html#cb1035-7" tabindex="-1"></a></span>
<span id="cb1035-8"><a href="reporting-results-2.html#cb1035-8" tabindex="-1"></a>co_county_events <span class="ot">&lt;-</span> co_counties <span class="sc">%&gt;%</span> </span>
<span id="cb1035-9"><a href="reporting-results-2.html#cb1035-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fips =</span> <span class="fu">paste</span>(STATEFP, COUNTYFP, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1035-10"><a href="reporting-results-2.html#cb1035-10" tabindex="-1"></a>  <span class="fu">right_join</span>(co_event_counts, <span class="at">by =</span> <span class="st">&quot;fips&quot;</span>)</span>
<span id="cb1035-11"><a href="reporting-results-2.html#cb1035-11" tabindex="-1"></a></span>
<span id="cb1035-12"><a href="reporting-results-2.html#cb1035-12" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1035-13"><a href="reporting-results-2.html#cb1035-13" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_counties, <span class="at">color =</span> <span class="st">&quot;lightgray&quot;</span>) <span class="sc">+</span> </span>
<span id="cb1035-14"><a href="reporting-results-2.html#cb1035-14" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> co_county_events, <span class="fu">aes</span>(<span class="at">fill =</span> n)) <span class="sc">+</span> </span>
<span id="cb1035-15"><a href="reporting-results-2.html#cb1035-15" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">name =</span> <span class="st">&quot;Number of events</span><span class="sc">\n</span><span class="st">(2017)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb1035-16"><a href="reporting-results-2.html#cb1035-16" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">+</span> </span>
<span id="cb1035-17"><a href="reporting-results-2.html#cb1035-17" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> event_type, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb1035-18"><a href="reporting-results-2.html#cb1035-18" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1035-19"><a href="reporting-results-2.html#cb1035-19" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1035-20"><a href="reporting-results-2.html#cb1035-20" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
</div>
</div>
<div id="more-on-mapping" class="section level3 hasAnchor" number="8.5.4">
<h3><span class="header-section-number">8.5.4</span> More on mapping<a href="reporting-results-2.html#more-on-mapping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>See if you can put everything we’ve talked about together
to create the following map. Note that you can get the county boundaries using the <code>tigris</code>
package and the hurricane data from the NHC website mentioned in the text. The storm events
data is in the <code>storms_2017</code> dataframe created in code in the text. See how close you can
get to this figure.</li>
</ul>
<p><img src="RProgrammingForResearch_files/figure-html/unnamed-chunk-578-1.png" width="672" style="display: block; margin: auto;" /></p>
<div id="example-r-code-22" class="section level4 hasAnchor" number="8.5.4.1">
<h4><span class="header-section-number">8.5.4.1</span> Example R code<a href="reporting-results-2.html#example-r-code-22" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Here is the code I used to create the figure:</p>
<div class="sourceCode" id="cb1036"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1036-1"><a href="reporting-results-2.html#cb1036-1" tabindex="-1"></a>harvey_events <span class="ot">&lt;-</span> storms_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb1036-2"><a href="reporting-results-2.html#cb1036-2" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Texas&quot;</span>, <span class="st">&quot;Louisiana&quot;</span>) <span class="sc">&amp;</span> </span>
<span id="cb1036-3"><a href="reporting-results-2.html#cb1036-3" tabindex="-1"></a>           <span class="fu">ymd_hms</span>(<span class="st">&quot;2017-08-25 00:00:00&quot;</span>) <span class="sc">&lt;</span> begin_date_time <span class="sc">&amp;</span> </span>
<span id="cb1036-4"><a href="reporting-results-2.html#cb1036-4" tabindex="-1"></a>           begin_date_time <span class="sc">&lt;</span> <span class="fu">ymd_hms</span>(<span class="st">&quot;2017-10-05 00:00:00&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1036-5"><a href="reporting-results-2.html#cb1036-5" tabindex="-1"></a>  <span class="fu">group_by</span>(fips) <span class="sc">%&gt;%</span> </span>
<span id="cb1036-6"><a href="reporting-results-2.html#cb1036-6" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1036-7"><a href="reporting-results-2.html#cb1036-7" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb1036-8"><a href="reporting-results-2.html#cb1036-8" tabindex="-1"></a></span>
<span id="cb1036-9"><a href="reporting-results-2.html#cb1036-9" tabindex="-1"></a>tx_la_counties <span class="ot">&lt;-</span> <span class="fu">counties</span>(<span class="at">state =</span> <span class="fu">c</span>(<span class="st">&quot;TX&quot;</span>, <span class="st">&quot;LA&quot;</span>), <span class="at">cb =</span> <span class="cn">TRUE</span>, <span class="at">class =</span> <span class="st">&quot;sf&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1036-10"><a href="reporting-results-2.html#cb1036-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fips =</span> <span class="fu">paste</span>(STATEFP, COUNTYFP, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1036-11"><a href="reporting-results-2.html#cb1036-11" tabindex="-1"></a>  <span class="fu">full_join</span>(harvey_events, <span class="at">by =</span> <span class="st">&quot;fips&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1036-12"><a href="reporting-results-2.html#cb1036-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(n), <span class="dv">0</span>, n))</span>
<span id="cb1036-13"><a href="reporting-results-2.html#cb1036-13" tabindex="-1"></a></span>
<span id="cb1036-14"><a href="reporting-results-2.html#cb1036-14" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb1036-15"><a href="reporting-results-2.html#cb1036-15" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> tx_la_counties, <span class="at">color =</span> <span class="cn">NA</span>, </span>
<span id="cb1036-16"><a href="reporting-results-2.html#cb1036-16" tabindex="-1"></a>          <span class="fu">aes</span>(<span class="at">fill =</span> n)) <span class="sc">+</span></span>
<span id="cb1036-17"><a href="reporting-results-2.html#cb1036-17" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">filter</span>(us_states, ID <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;texas&quot;</span>, <span class="st">&quot;louisiana&quot;</span>)), </span>
<span id="cb1036-18"><a href="reporting-results-2.html#cb1036-18" tabindex="-1"></a>          <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;lightgray&quot;</span>) <span class="sc">+</span> </span>
<span id="cb1036-19"><a href="reporting-results-2.html#cb1036-19" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> harvey_windswath, </span>
<span id="cb1036-20"><a href="reporting-results-2.html#cb1036-20" tabindex="-1"></a>          <span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">factor</span>(RADII)), <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span> </span>
<span id="cb1036-21"><a href="reporting-results-2.html#cb1036-21" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> harvey_track, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, </span>
<span id="cb1036-22"><a href="reporting-results-2.html#cb1036-22" tabindex="-1"></a>          <span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb1036-23"><a href="reporting-results-2.html#cb1036-23" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">107</span>, <span class="sc">-</span><span class="dv">89</span>)) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">37</span>)) <span class="sc">+</span> </span>
<span id="cb1036-24"><a href="reporting-results-2.html#cb1036-24" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">name =</span> <span class="st">&quot;# of events&quot;</span>, <span class="at">option =</span> <span class="st">&quot;A&quot;</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb1036-25"><a href="reporting-results-2.html#cb1036-25" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">name =</span> <span class="st">&quot;Wind (kts)&quot;</span>, <span class="at">discrete =</span> <span class="cn">TRUE</span>, </span>
<span id="cb1036-26"><a href="reporting-results-2.html#cb1036-26" tabindex="-1"></a>                      <span class="at">option =</span> <span class="st">&quot;B&quot;</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb1036-27"><a href="reporting-results-2.html#cb1036-27" tabindex="-1"></a>  <span class="fu">theme_dark</span>() <span class="sc">+</span> </span>
<span id="cb1036-28"><a href="reporting-results-2.html#cb1036-28" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Number of events near Harvey&#39;s landfall&quot;</span>,</span>
<span id="cb1036-29"><a href="reporting-results-2.html#cb1036-29" tabindex="-1"></a>          <span class="at">subtitle =</span> <span class="st">&quot;# events starting Aug. 25 to Sept. 5, 2017&quot;</span>)</span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploring-data-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reproducible-research-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/geanders/RProgrammingForResearch/edit/master/09a-reportingresults2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["RProgrammingForResearch.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
